(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function Wv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Hd={exports:{}},Ll={};var r_;function h2(){if(r_)return Ll;r_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:s,type:a,key:f,ref:l!==void 0?l:null,props:c}}return Ll.Fragment=e,Ll.jsx=n,Ll.jsxs=n,Ll}var o_;function f2(){return o_||(o_=1,Hd.exports=h2()),Hd.exports}var y=f2(),Fd={exports:{}},De={};var l_;function d2(){if(l_)return De;l_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),x=Symbol.iterator;function P(k){return k===null||typeof k!="object"?null:(k=x&&k[x]||k["@@iterator"],typeof k=="function"?k:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,F={};function te(k,K,oe){this.props=k,this.context=K,this.refs=F,this.updater=oe||$}te.prototype.isReactComponent={},te.prototype.setState=function(k,K){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,K,"setState")},te.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ie(){}ie.prototype=te.prototype;function ae(k,K,oe){this.props=k,this.context=K,this.refs=F,this.updater=oe||$}var ye=ae.prototype=new ie;ye.constructor=ae,X(ye,te.prototype),ye.isPureReactComponent=!0;var ve=Array.isArray;function be(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function R(k,K,oe){var ne=oe.ref;return{$$typeof:s,type:k,key:K,ref:ne!==void 0?ne:null,props:oe}}function M(k,K){return R(k.type,K,k.props)}function D(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function V(k){var K={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return K[oe]})}var N=/\/+/g;function Re(k,K){return typeof k=="object"&&k!==null&&k.key!=null?V(""+k.key):K.toString(36)}function Qe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(be,be):(k.status="pending",k.then(function(K){k.status==="pending"&&(k.status="fulfilled",k.value=K)},function(K){k.status==="pending"&&(k.status="rejected",k.reason=K)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function G(k,K,oe,ne,me){var Se=typeof k;(Se==="undefined"||Se==="boolean")&&(k=null);var se=!1;if(k===null)se=!0;else switch(Se){case"bigint":case"string":case"number":se=!0;break;case"object":switch(k.$$typeof){case s:case e:se=!0;break;case E:return se=k._init,G(se(k._payload),K,oe,ne,me)}}if(se)return me=me(k),se=ne===""?"."+Re(k,0):ne,ve(me)?(oe="",se!=null&&(oe=se.replace(N,"$&/")+"/"),G(me,K,oe,"",function(ut){return ut})):me!=null&&(D(me)&&(me=M(me,oe+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(N,"$&/")+"/")+se)),K.push(me)),1;se=0;var pe=ne===""?".":ne+":";if(ve(k))for(var Ee=0;Ee<k.length;Ee++)ne=k[Ee],Se=pe+Re(ne,Ee),se+=G(ne,K,oe,Se,me);else if(Ee=P(k),typeof Ee=="function")for(k=Ee.call(k),Ee=0;!(ne=k.next()).done;)ne=ne.value,Se=pe+Re(ne,Ee++),se+=G(ne,K,oe,Se,me);else if(Se==="object"){if(typeof k.then=="function")return G(Qe(k),K,oe,ne,me);throw K=String(k),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return se}function re(k,K,oe){if(k==null)return k;var ne=[],me=0;return G(k,ne,"","",function(Se){return K.call(oe,Se,me++)}),ne}function ce(k){if(k._status===-1){var K=k._result;K=K(),K.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=K)}if(k._status===1)return k._result.default;throw k._result}var Me=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Pe={map:re,forEach:function(k,K,oe){re(k,function(){K.apply(this,arguments)},oe)},count:function(k){var K=0;return re(k,function(){K++}),K},toArray:function(k){return re(k,function(K){return K})||[]},only:function(k){if(!D(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return De.Activity=S,De.Children=Pe,De.Component=te,De.Fragment=n,De.Profiler=l,De.PureComponent=ae,De.StrictMode=a,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,De.__COMPILER_RUNTIME={__proto__:null,c:function(k){return I.H.useMemoCache(k)}},De.cache=function(k){return function(){return k.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(k,K,oe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ne=X({},k.props),me=k.key;if(K!=null)for(Se in K.key!==void 0&&(me=""+K.key),K)!w.call(K,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&K.ref===void 0||(ne[Se]=K[Se]);var Se=arguments.length-2;if(Se===1)ne.children=oe;else if(1<Se){for(var se=Array(Se),pe=0;pe<Se;pe++)se[pe]=arguments[pe+2];ne.children=se}return R(k.type,me,ne)},De.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},De.createElement=function(k,K,oe){var ne,me={},Se=null;if(K!=null)for(ne in K.key!==void 0&&(Se=""+K.key),K)w.call(K,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(me[ne]=K[ne]);var se=arguments.length-2;if(se===1)me.children=oe;else if(1<se){for(var pe=Array(se),Ee=0;Ee<se;Ee++)pe[Ee]=arguments[Ee+2];me.children=pe}if(k&&k.defaultProps)for(ne in se=k.defaultProps,se)me[ne]===void 0&&(me[ne]=se[ne]);return R(k,Se,me)},De.createRef=function(){return{current:null}},De.forwardRef=function(k){return{$$typeof:m,render:k}},De.isValidElement=D,De.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:ce}},De.memo=function(k,K){return{$$typeof:_,type:k,compare:K===void 0?null:K}},De.startTransition=function(k){var K=I.T,oe={};I.T=oe;try{var ne=k(),me=I.S;me!==null&&me(oe,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(be,Me)}catch(Se){Me(Se)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),I.T=K}},De.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},De.use=function(k){return I.H.use(k)},De.useActionState=function(k,K,oe){return I.H.useActionState(k,K,oe)},De.useCallback=function(k,K){return I.H.useCallback(k,K)},De.useContext=function(k){return I.H.useContext(k)},De.useDebugValue=function(){},De.useDeferredValue=function(k,K){return I.H.useDeferredValue(k,K)},De.useEffect=function(k,K){return I.H.useEffect(k,K)},De.useEffectEvent=function(k){return I.H.useEffectEvent(k)},De.useId=function(){return I.H.useId()},De.useImperativeHandle=function(k,K,oe){return I.H.useImperativeHandle(k,K,oe)},De.useInsertionEffect=function(k,K){return I.H.useInsertionEffect(k,K)},De.useLayoutEffect=function(k,K){return I.H.useLayoutEffect(k,K)},De.useMemo=function(k,K){return I.H.useMemo(k,K)},De.useOptimistic=function(k,K){return I.H.useOptimistic(k,K)},De.useReducer=function(k,K,oe){return I.H.useReducer(k,K,oe)},De.useRef=function(k){return I.H.useRef(k)},De.useState=function(k){return I.H.useState(k)},De.useSyncExternalStore=function(k,K,oe){return I.H.useSyncExternalStore(k,K,oe)},De.useTransition=function(){return I.H.useTransition()},De.version="19.2.3",De}var c_;function Bm(){return c_||(c_=1,Fd.exports=d2()),Fd.exports}var ee=Bm();const e1=Wv(ee);var Gd={exports:{}},Ul={},Qd={exports:{}},$d={};var u_;function m2(){return u_||(u_=1,(function(s){function e(G,re){var ce=G.length;G.push(re);e:for(;0<ce;){var Me=ce-1>>>1,Pe=G[Me];if(0<l(Pe,re))G[Me]=re,G[ce]=Pe,ce=Me;else break e}}function n(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var re=G[0],ce=G.pop();if(ce!==re){G[0]=ce;e:for(var Me=0,Pe=G.length,k=Pe>>>1;Me<k;){var K=2*(Me+1)-1,oe=G[K],ne=K+1,me=G[ne];if(0>l(oe,ce))ne<Pe&&0>l(me,oe)?(G[Me]=me,G[ne]=ce,Me=ne):(G[Me]=oe,G[K]=ce,Me=K);else if(ne<Pe&&0>l(me,ce))G[Me]=me,G[ne]=ce,Me=ne;else break e}}return re}function l(G,re){var ce=G.sortIndex-re.sortIndex;return ce!==0?ce:G.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],_=[],E=1,S=null,x=3,P=!1,$=!1,X=!1,F=!1,te=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ye(G){for(var re=n(_);re!==null;){if(re.callback===null)a(_);else if(re.startTime<=G)a(_),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(_)}}function ve(G){if(X=!1,ye(G),!$)if(n(g)!==null)$=!0,be||(be=!0,V());else{var re=n(_);re!==null&&Qe(ve,re.startTime-G)}}var be=!1,I=-1,w=5,R=-1;function M(){return F?!0:!(s.unstable_now()-R<w)}function D(){if(F=!1,be){var G=s.unstable_now();R=G;var re=!0;try{e:{$=!1,X&&(X=!1,ie(I),I=-1),P=!0;var ce=x;try{t:{for(ye(G),S=n(g);S!==null&&!(S.expirationTime>G&&M());){var Me=S.callback;if(typeof Me=="function"){S.callback=null,x=S.priorityLevel;var Pe=Me(S.expirationTime<=G);if(G=s.unstable_now(),typeof Pe=="function"){S.callback=Pe,ye(G),re=!0;break t}S===n(g)&&a(g),ye(G)}else a(g);S=n(g)}if(S!==null)re=!0;else{var k=n(_);k!==null&&Qe(ve,k.startTime-G),re=!1}}break e}finally{S=null,x=ce,P=!1}re=void 0}}finally{re?V():be=!1}}}var V;if(typeof ae=="function")V=function(){ae(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Re=N.port2;N.port1.onmessage=D,V=function(){Re.postMessage(null)}}else V=function(){te(D,0)};function Qe(G,re){I=te(function(){G(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(G){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var ce=x;x=re;try{return G()}finally{x=ce}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=x;x=G;try{return re()}finally{x=ce}},s.unstable_scheduleCallback=function(G,re,ce){var Me=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Me+ce:Me):ce=Me,G){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ce+Pe,G={id:E++,callback:re,priorityLevel:G,startTime:ce,expirationTime:Pe,sortIndex:-1},ce>Me?(G.sortIndex=ce,e(_,G),n(g)===null&&G===n(_)&&(X?(ie(I),I=-1):X=!0,Qe(ve,ce-Me))):(G.sortIndex=Pe,e(g,G),$||P||($=!0,be||(be=!0,V()))),G},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(G){var re=x;return function(){var ce=x;x=re;try{return G.apply(this,arguments)}finally{x=ce}}}})($d)),$d}var h_;function p2(){return h_||(h_=1,Qd.exports=m2()),Qd.exports}var Kd={exports:{}},rn={};var f_;function g2(){if(f_)return rn;f_=1;var s=Bm();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,_,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:g,containerInfo:_,implementation:E}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,rn.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,E)},rn.flushSync=function(g){var _=f.T,E=a.p;try{if(f.T=null,a.p=2,g)return g()}finally{f.T=_,a.p=E,a.d.f()}},rn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(g,_))},rn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},rn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,S=m(E,_.crossOrigin),x=typeof _.integrity=="string"?_.integrity:void 0,P=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?a.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:x,fetchPriority:P}):E==="script"&&a.d.X(g,{crossOrigin:S,integrity:x,fetchPriority:P,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},rn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);a.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(g)},rn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,S=m(E,_.crossOrigin);a.d.L(g,E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},rn.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=m(_.as,_.crossOrigin);a.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(g)},rn.requestFormReset=function(g){a.d.r(g)},rn.unstable_batchedUpdates=function(g,_){return g(_)},rn.useFormState=function(g,_,E){return f.H.useFormState(g,_,E)},rn.useFormStatus=function(){return f.H.useHostTransitionStatus()},rn.version="19.2.3",rn}var d_;function y2(){if(d_)return Kd.exports;d_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Kd.exports=g2(),Kd.exports}var m_;function _2(){if(m_)return Ul;m_=1;var s=p2(),e=Bm(),n=y2();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,o=i;;){var h=r.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===r)return g(h),t;if(d===o)return g(h),i;d=d.sibling}throw Error(a(188))}if(r.return!==o.return)r=h,o=d;else{for(var v=!1,T=h.child;T;){if(T===r){v=!0,r=h,o=d;break}if(T===o){v=!0,o=h,r=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===r){v=!0,r=d,o=h;break}if(T===o){v=!0,o=d,r=h;break}T=T.sibling}if(!v)throw Error(a(189))}}if(r.alternate!==o)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,x=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Re(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case te:return"Profiler";case F:return"StrictMode";case ve:return"Suspense";case be:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $:return"Portal";case ae:return t.displayName||"Context";case ie:return(t._context.displayName||"Context")+".Consumer";case ye:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:Re(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Re(t(i))}catch{}}return null}var Qe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Me=[],Pe=-1;function k(t){return{current:t}}function K(t){0>Pe||(t.current=Me[Pe],Me[Pe]=null,Pe--)}function oe(t,i){Pe++,Me[Pe]=t.current,t.current=i}var ne=k(null),me=k(null),Se=k(null),se=k(null);function pe(t,i){switch(oe(Se,i),oe(me,t),oe(ne,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Iy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Iy(i),t=Cy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(ne),oe(ne,t)}function Ee(){K(ne),K(me),K(Se)}function ut(t){t.memoizedState!==null&&oe(se,t);var i=ne.current,r=Cy(i,t.type);i!==r&&(oe(me,t),oe(ne,r))}function Bt(t){me.current===t&&(K(ne),K(me)),se.current===t&&(K(se),Ol._currentValue=ce)}var mn,Gt;function pn(t){if(mn===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);mn=i&&i[1]||"",Gt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+t+Gt}var Un=!1;function hn(t,i){if(!t||Un)return"";Un=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var B=H}Reflect.construct(t,[],J)}else{try{J.call()}catch(H){B=H}t.call(J.prototype)}}else{try{throw Error()}catch(H){B=H}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var C=v.split(`
`),z=T.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===z.length)for(o=C.length-1,h=z.length-1;1<=o&&0<=h&&C[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==z[h]){var Q=`
`+C[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{Un=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?pn(r):""}function ri(t,i){switch(t.tag){case 26:case 27:case 5:return pn(t.type);case 16:return pn("Lazy");case 13:return t.child!==i&&i!==null?pn("Suspense Fallback"):pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return hn(t.type,!1);case 11:return hn(t.type.render,!1);case 1:return hn(t.type,!0);case 31:return pn("Activity");default:return""}}function Yi(t){try{var i="",r=null;do i+=ri(t,r),r=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ft=Object.prototype.hasOwnProperty,gt=s.unstable_scheduleCallback,Tt=s.unstable_cancelCallback,Os=s.unstable_shouldYield,zn=s.unstable_requestPaint,qt=s.unstable_now,Rn=s.unstable_getCurrentPriorityLevel,Va=s.unstable_ImmediatePriority,ja=s.unstable_UserBlockingPriority,bi=s.unstable_NormalPriority,Uo=s.unstable_LowPriority,Pa=s.unstable_IdlePriority,wr=s.log,xr=s.unstable_setDisableYieldValue,sn=null,Dt=null;function gn(t){if(typeof wr=="function"&&xr(t),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(sn,t)}catch{}}var yt=Math.clz32?Math.clz32:Nr,Rr=Math.log,Vs=Math.LN2;function Nr(t){return t>>>=0,t===0?32:31-(Rr(t)/Vs|0)|0}var Bn=256,Xi=262144,At=4194304;function qn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hn(t,i,r){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=qn(o):(v&=T,v!==0?h=qn(v):r||(r=T&~t,r!==0&&(h=qn(r))))):(T=o&~d,T!==0?h=qn(T):v!==0?h=qn(v):r||(r=o&~t,r!==0&&(h=qn(r)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,r=i&-i,d>=r||d===32&&(r&4194048)!==0)?i:h}function Nn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function js(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(){var t=At;return At<<=1,(At&62914560)===0&&(At=4194304),t}function Fn(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function Zi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zo(t,i,r,o,h,d){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,z=t.hiddenUpdates;for(r=v&~r;0<r;){var Q=31-yt(r),J=1<<Q;T[Q]=0,C[Q]=-1;var B=z[Q];if(B!==null)for(z[Q]=null,Q=0;Q<B.length;Q++){var H=B[Q];H!==null&&(H.lane&=-536870913)}r&=~J}o!==0&&Ji(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Ji(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-yt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function La(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var o=31-yt(r),h=1<<o;h&i|t[o]&i&&(t[o]|=i),r&=~h}}function Ua(t,i){var r=i&-i;return r=(r&42)!==0?1:Wi(r),(r&(t.suspendedLanes|i))!==0?0:r}function Wi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function oi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cr(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Wy(t.type))}function Ie(t,i){var r=re.p;try{return re.p=t,i()}finally{re.p=r}}var et=Math.random().toString(36).slice(2),tt="__reactFiber$"+et,Ke="__reactProps$"+et,an="__reactContainer$"+et,Gn="__reactEvents$"+et,es="__reactListeners$"+et,Ps="__reactHandles$"+et,Ac="__reactResources$"+et,Ei="__reactMarker$"+et;function Dr(t){delete t[tt],delete t[Ke],delete t[Gn],delete t[es],delete t[Ps]}function Ti(t){var i=t[tt];if(i)return i;for(var r=t.parentNode;r;){if(i=r[an]||r[tt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=Py(t);t!==null;){if(r=t[tt])return r;t=Py(t)}return i}t=r,r=t.parentNode}return null}function Qn(t){if(t=t[tt]||t[an]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function In(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Ai(t){var i=t[Ac];return i||(i=t[Ac]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kt(t){t[Ei]=!0}var Bo=new Set,qo={};function Si(t,i){wi(t,i),wi(t+"Capture",i)}function wi(t,i){for(qo[t]=i,t=0;t<i.length;t++)Bo.add(i[t])}var Ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},Go={};function Sc(t){return ft.call(Go,t)?!0:ft.call(Fo,t)?!1:Ho.test(t)?Go[t]=!0:(Fo[t]=!0,!1)}function kr(t,i,r){if(Sc(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function Cn(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function Mt(t,i,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+o)}}function Qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ls(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qo(t,i,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){r=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function nt(t){if(!t._valueTracker){var i=Ls(t)?"checked":"value";t._valueTracker=Qo(t,i,""+t[i])}}function za(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),o="";return t&&(o=Ls(t)?t.checked?"true":"false":t.value),t=o,t!==r?(i.setValue(t),!0):!1}function xi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ba=/[\n"\\]/g;function yn(t){return t.replace(Ba,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Mr(t,i,r,o,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Qt(i)):t.value!==""+Qt(i)&&(t.value=""+Qt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?$o(t,v,Qt(i)):r!=null?$o(t,v,Qt(r)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Qt(T):t.removeAttribute("name")}function wc(t,i,r,o,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){nt(t);return}r=r!=null?""+Qt(r):"",i=i!=null?""+Qt(i):r,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),nt(t)}function $o(t,i,r){i==="number"&&xi(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Us(t,i,r,o){if(t=t.options,i){i={};for(var h=0;h<r.length;h++)i["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=i.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Qt(r),i=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function xc(t,i,r){if(i!=null&&(i=""+Qt(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+Qt(r):""}function zs(t,i,r,o){if(i==null){if(o!=null){if(r!=null)throw Error(a(92));if(Qe(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),i=r}r=Qt(i),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),nt(t)}function _n(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(t,i,r){var o=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,r):typeof r!="number"||r===0||Rc.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function Yo(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&r[h]!==o&&Ko(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Ko(t,d,i[d])}function Or(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vr(t){return Bs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var Xo=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qs=null,Ri=null;function qa(t){var i=Qn(t);if(i&&(t=i.stateNode)){var r=t[Ke]||null;e:switch(t=i.stateNode,i.type){case"input":if(Mr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+yn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var o=r[i];if(o!==t&&o.form===t.form){var h=o[Ke]||null;if(!h)throw Error(a(90));Mr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<r.length;i++)o=r[i],o.form===t.form&&za(o)}break e;case"textarea":xc(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Us(t,!!r.multiple,i,!1)}}}var jr=!1;function Hs(t,i,r){if(jr)return t(i,r);jr=!0;try{var o=t(i);return o}finally{if(jr=!1,(qs!==null||Ri!==null)&&(Eu(),qs&&(i=qs,t=Ri,Ri=qs=null,qa(i),t)))for(i=0;i<t.length;i++)qa(t[i])}}function ci(t,i){var r=t.stateNode;if(r===null)return null;var o=r[Ke]||null;if(o===null)return null;r=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ha=!1;if(Kn)try{var at={};Object.defineProperty(at,"passive",{get:function(){Ha=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{Ha=!1}var Ni=null,Zo=null,Fa=null;function Jo(){if(Fa)return Fa;var t,i=Zo,r=i.length,o,h="value"in Ni?Ni.value:Ni.textContent,d=h.length;for(t=0;t<r&&i[t]===h[t];t++);var v=r-t;for(o=1;o<=v&&i[r-o]===h[d-o];o++);return Fa=h.slice(t,1<o?1-o:void 0)}function Ga(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ts(){return!0}function ui(){return!1}function Yt(t){function i(r,o,h,d,v){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(r=t[T],this[T]=r?r(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ts:ui,this.isPropagationStopped=ui,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),i}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Yt(ns),Fs=S({},ns,{view:0,detail:0}),Wo=Yt(Fs),Gs,Pr,Ci,Lr=S({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Gs=t.screenX-Ci.screenX,Pr=t.screenY-Ci.screenY):Pr=Gs=0,Ci=t),Gs)},movementY:function(t){return"movementY"in t?t.movementY:Pr}}),el=Yt(Lr),Qa=S({},Lr,{dataTransfer:0}),Ic=Yt(Qa),Cc=S({},Fs,{relatedTarget:0}),$a=Yt(Cc),tl=S({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Dc=Yt(tl),Ur=S({},ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kc=Yt(Ur),Mc=S({},ns,{data:0}),Di=Yt(Mc),Oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=jc[t])?!!i[t]:!1}function Qs(){return Pc}var fn=S({},Fs,{key:function(t){if(t.key){var i=Oc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(t){return t.type==="keypress"?Ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lc=Yt(fn),Uc=S({},Lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=Yt(Uc),u=S({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),p=Yt(u),b=S({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Yt(b),L=S({},Lr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q=Yt(L),le=S({},ns,{newState:0,oldState:0}),Oe=Yt(le),xt=[9,13,27,32],Ze=Kn&&"CompositionEvent"in window,_t=null;Kn&&"documentMode"in document&&(_t=document.documentMode);var Yn=Kn&&"TextEvent"in window&&!_t,ki=Kn&&(!Ze||_t&&8<_t&&11>=_t),hi=" ",fi=!1;function Ka(t,i){switch(t){case"keyup":return xt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Br=!1;function VE(t,i){switch(t){case"compositionend":return zr(i);case"keypress":return i.which!==32?null:(fi=!0,hi);case"textInput":return t=i.data,t===hi&&fi?null:t;default:return null}}function jE(t,i){if(Br)return t==="compositionend"||!Ze&&Ka(t,i)?(t=Jo(),Fa=Zo=Ni=null,Br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ki&&i.locale!=="ko"?null:i.data;default:return null}}var PE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!PE[t.type]:i==="textarea"}function Bp(t,i,r,o){qs?Ri?Ri.push(o):Ri=[o]:qs=o,i=Nu(i,"onChange"),0<i.length&&(r=new Ii("onChange","change",null,r,o),t.push({event:r,listeners:i}))}var nl=null,il=null;function LE(t){Ay(t,0)}function zc(t){var i=In(t);if(za(i))return t}function qp(t,i){if(t==="change")return i}var Hp=!1;if(Kn){var Yh;if(Kn){var Xh="oninput"in document;if(!Xh){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),Xh=typeof Fp.oninput=="function"}Yh=Xh}else Yh=!1;Hp=Yh&&(!document.documentMode||9<document.documentMode)}function Gp(){nl&&(nl.detachEvent("onpropertychange",Qp),il=nl=null)}function Qp(t){if(t.propertyName==="value"&&zc(il)){var i=[];Bp(i,il,t,$n(t)),Hs(LE,i)}}function UE(t,i,r){t==="focusin"?(Gp(),nl=i,il=r,nl.attachEvent("onpropertychange",Qp)):t==="focusout"&&Gp()}function zE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zc(il)}function BE(t,i){if(t==="click")return zc(i)}function qE(t,i){if(t==="input"||t==="change")return zc(i)}function HE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Dn=typeof Object.is=="function"?Object.is:HE;function sl(t,i){if(Dn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),o=Object.keys(i);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!ft.call(i,h)||!Dn(t[h],i[h]))return!1}return!0}function $p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kp(t,i){var r=$p(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=i&&o>=i)return{node:r,offset:i-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$p(r)}}function Yp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Yp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Xp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=xi(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=xi(t.document)}return i}function Zh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var FE=Kn&&"documentMode"in document&&11>=document.documentMode,qr=null,Jh=null,al=null,Wh=!1;function Zp(t,i,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wh||qr==null||qr!==xi(o)||(o=qr,"selectionStart"in o&&Zh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),al&&sl(al,o)||(al=o,o=Nu(Jh,"onSelect"),0<o.length&&(i=new Ii("onSelect","select",null,i,r),t.push({event:i,listeners:o}),i.target=qr)))}function Ya(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var Hr={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},ef={},Jp={};Kn&&(Jp=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Xa(t){if(ef[t])return ef[t];if(!Hr[t])return t;var i=Hr[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in Jp)return ef[t]=i[r];return t}var Wp=Xa("animationend"),eg=Xa("animationiteration"),tg=Xa("animationstart"),GE=Xa("transitionrun"),QE=Xa("transitionstart"),$E=Xa("transitioncancel"),ng=Xa("transitionend"),ig=new Map,tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tf.push("scrollEnd");function di(t,i){ig.set(t,i),Si(i,[t])}var Bc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xn=[],Fr=0,nf=0;function qc(){for(var t=Fr,i=nf=Fr=0;i<t;){var r=Xn[i];Xn[i++]=null;var o=Xn[i];Xn[i++]=null;var h=Xn[i];Xn[i++]=null;var d=Xn[i];if(Xn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&sg(r,h,d)}}function Hc(t,i,r,o){Xn[Fr++]=t,Xn[Fr++]=i,Xn[Fr++]=r,Xn[Fr++]=o,nf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function sf(t,i,r,o){return Hc(t,i,r,o),Fc(t)}function Za(t,i){return Hc(t,null,null,i),Fc(t)}function sg(t,i,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var h=!1,d=t.return;d!==null;)d.childLanes|=r,o=d.alternate,o!==null&&(o.childLanes|=r),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-yt(r),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=r|536870912),d):null}function Fc(t){if(50<Rl)throw Rl=0,dd=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Gr={};function KE(t,i,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,i,r,o){return new KE(t,i,r,o)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ss(t,i){var r=t.alternate;return r===null?(r=kn(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function ag(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Gc(t,i,r,o,h,d){var v=0;if(o=t,typeof t=="function")af(t)&&(v=1);else if(typeof t=="string")v=WT(t,r,ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=kn(31,r,i,h),t.elementType=R,t.lanes=d,t;case X:return Ja(r.children,h,d,i);case F:v=8,h|=24;break;case te:return t=kn(12,r,i,h|2),t.elementType=te,t.lanes=d,t;case ve:return t=kn(13,r,i,h),t.elementType=ve,t.lanes=d,t;case be:return t=kn(19,r,i,h),t.elementType=be,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:v=10;break e;case ie:v=9;break e;case ye:v=11;break e;case I:v=14;break e;case w:v=16,o=null;break e}v=29,r=Error(a(130,t===null?"null":typeof t,"")),o=null}return i=kn(v,r,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Ja(t,i,r,o){return t=kn(7,t,o,i),t.lanes=r,t}function rf(t,i,r){return t=kn(6,t,null,i),t.lanes=r,t}function rg(t){var i=kn(18,null,null,0);return i.stateNode=t,i}function of(t,i,r){return i=kn(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var og=new WeakMap;function Zn(t,i){if(typeof t=="object"&&t!==null){var r=og.get(t);return r!==void 0?r:(i={value:t,source:i,stack:Yi(i)},og.set(t,i),i)}return{value:t,source:i,stack:Yi(i)}}var Qr=[],$r=0,Qc=null,rl=0,Jn=[],Wn=0,$s=null,Mi=1,Oi="";function as(t,i){Qr[$r++]=rl,Qr[$r++]=Qc,Qc=t,rl=i}function lg(t,i,r){Jn[Wn++]=Mi,Jn[Wn++]=Oi,Jn[Wn++]=$s,$s=t;var o=Mi;t=Oi;var h=32-yt(o)-1;o&=~(1<<h),r+=1;var d=32-yt(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Mi=1<<32-yt(i)+h|r<<h|o,Oi=d+t}else Mi=1<<d|r<<h|o,Oi=t}function lf(t){t.return!==null&&(as(t,1),lg(t,1,0))}function cf(t){for(;t===Qc;)Qc=Qr[--$r],Qr[$r]=null,rl=Qr[--$r],Qr[$r]=null;for(;t===$s;)$s=Jn[--Wn],Jn[Wn]=null,Oi=Jn[--Wn],Jn[Wn]=null,Mi=Jn[--Wn],Jn[Wn]=null}function cg(t,i){Jn[Wn++]=Mi,Jn[Wn++]=Oi,Jn[Wn++]=$s,Mi=i.id,Oi=i.overflow,$s=t}var Xt=null,mt=null,Ge=!1,Ks=null,ei=!1,uf=Error(a(519));function Ys(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(Zn(i,t)),uf}function ug(t){var i=t.stateNode,r=t.type,o=t.memoizedProps;switch(i[tt]=t,i[Ke]=o,r){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(r=0;r<Il.length;r++)Ue(Il[r],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),wc(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),zs(i,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||o.suppressHydrationWarning===!0||Ry(i.textContent,r)?(o.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),o.onScroll!=null&&Ue("scroll",i),o.onScrollEnd!=null&&Ue("scrollend",i),o.onClick!=null&&(i.onclick=li),i=!0):i=!1,i||Ys(t,!0)}function hg(t){for(Xt=t.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Xt=Xt.return}}function Kr(t){if(t!==Xt)return!1;if(!Ge)return hg(t),Ge=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Nd(t.type,t.memoizedProps)),r=!r),r&&mt&&Ys(t),hg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));mt=jy(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));mt=jy(t)}else i===27?(i=mt,ca(t.type)?(t=Md,Md=null,mt=t):mt=i):mt=Xt?ni(t.stateNode.nextSibling):null;return!0}function Wa(){mt=Xt=null,Ge=!1}function hf(){var t=Ks;return t!==null&&(Tn===null?Tn=t:Tn.push.apply(Tn,t),Ks=null),t}function ol(t){Ks===null?Ks=[t]:Ks.push(t)}var ff=k(null),er=null,rs=null;function Xs(t,i,r){oe(ff,i._currentValue),i._currentValue=r}function os(t){t._currentValue=ff.current,K(ff)}function df(t,i,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===r)break;t=t.return}}function mf(t,i,r,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){d.lanes|=r,T=d.alternate,T!==null&&(T.lanes|=r),df(d.return,r,t),o||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(a(341));v.lanes|=r,d=v.alternate,d!==null&&(d.lanes|=r),df(v,r,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Yr(t,i,r,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var T=h.type;Dn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===se.current){if(v=h.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ol):t=[Ol])}h=h.return}t!==null&&mf(i,t,r,o),i.flags|=262144}function $c(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function tr(t){er=t,rs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return fg(er,t)}function Kc(t,i){return er===null&&tr(t),fg(t,i)}function fg(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},rs===null){if(t===null)throw Error(a(308));rs=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else rs=rs.next=i;return r}var YE=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},XE=s.unstable_scheduleCallback,ZE=s.unstable_NormalPriority,Ot={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new YE,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&XE(ZE,function(){t.controller.abort()})}var cl=null,gf=0,Xr=0,Zr=null;function JE(t,i){if(cl===null){var r=cl=[];gf=0,Xr=vd(),Zr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return gf++,i.then(dg,dg),i}function dg(){if(--gf===0&&cl!==null){Zr!==null&&(Zr.status="fulfilled");var t=cl;cl=null,Xr=0,Zr=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function WE(t,i){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<r.length;h++)(0,r[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var mg=G.S;G.S=function(t,i){Z0=qt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&JE(t,i),mg!==null&&mg(t,i)};var nr=k(null);function yf(){var t=nr.current;return t!==null?t:ht.pooledCache}function Yc(t,i){i===null?oe(nr,nr.current):oe(nr,i.pool)}function pg(){var t=yf();return t===null?null:{parent:Ot._currentValue,pool:t}}var Jr=Error(a(460)),_f=Error(a(474)),Xc=Error(a(542)),Zc={then:function(){}};function gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yg(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(li,li),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vg(t),t;default:if(typeof i.status=="string")i.then(li,li);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vg(t),t}throw sr=i,Jr}}function ir(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(sr=r,Jr):r}}var sr=null;function _g(){if(sr===null)throw Error(a(459));var t=sr;return sr=null,t}function vg(t){if(t===Jr||t===Xc)throw Error(a(483))}var Wr=null,ul=0;function Jc(t){var i=ul;return ul+=1,Wr===null&&(Wr=[]),yg(Wr,t,i)}function hl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Wc(t,i){throw i.$$typeof===x?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function bg(t){function i(j,O){if(t){var U=j.deletions;U===null?(j.deletions=[O],j.flags|=16):U.push(O)}}function r(j,O){if(!t)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function o(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function h(j,O){return j=ss(j,O),j.index=0,j.sibling=null,j}function d(j,O,U){return j.index=U,t?(U=j.alternate,U!==null?(U=U.index,U<O?(j.flags|=67108866,O):U):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function v(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,O,U,Y){return O===null||O.tag!==6?(O=rf(U,j.mode,Y),O.return=j,O):(O=h(O,U),O.return=j,O)}function C(j,O,U,Y){var Te=U.type;return Te===X?Q(j,O,U.props.children,Y,U.key):O!==null&&(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===w&&ir(Te)===O.type)?(O=h(O,U.props),hl(O,U),O.return=j,O):(O=Gc(U.type,U.key,U.props,null,j.mode,Y),hl(O,U),O.return=j,O)}function z(j,O,U,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=of(U,j.mode,Y),O.return=j,O):(O=h(O,U.children||[]),O.return=j,O)}function Q(j,O,U,Y,Te){return O===null||O.tag!==7?(O=Ja(U,j.mode,Y,Te),O.return=j,O):(O=h(O,U),O.return=j,O)}function J(j,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=rf(""+O,j.mode,U),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P:return U=Gc(O.type,O.key,O.props,null,j.mode,U),hl(U,O),U.return=j,U;case $:return O=of(O,j.mode,U),O.return=j,O;case w:return O=ir(O),J(j,O,U)}if(Qe(O)||V(O))return O=Ja(O,j.mode,U,null),O.return=j,O;if(typeof O.then=="function")return J(j,Jc(O),U);if(O.$$typeof===ae)return J(j,Kc(j,O),U);Wc(j,O)}return null}function B(j,O,U,Y){var Te=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Te!==null?null:T(j,O,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case P:return U.key===Te?C(j,O,U,Y):null;case $:return U.key===Te?z(j,O,U,Y):null;case w:return U=ir(U),B(j,O,U,Y)}if(Qe(U)||V(U))return Te!==null?null:Q(j,O,U,Y,null);if(typeof U.then=="function")return B(j,O,Jc(U),Y);if(U.$$typeof===ae)return B(j,O,Kc(j,U),Y);Wc(j,U)}return null}function H(j,O,U,Y,Te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return j=j.get(U)||null,T(O,j,""+Y,Te);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:return j=j.get(Y.key===null?U:Y.key)||null,C(O,j,Y,Te);case $:return j=j.get(Y.key===null?U:Y.key)||null,z(O,j,Y,Te);case w:return Y=ir(Y),H(j,O,U,Y,Te)}if(Qe(Y)||V(Y))return j=j.get(U)||null,Q(O,j,Y,Te,null);if(typeof Y.then=="function")return H(j,O,U,Jc(Y),Te);if(Y.$$typeof===ae)return H(j,O,U,Kc(O,Y),Te);Wc(O,Y)}return null}function de(j,O,U,Y){for(var Te=null,Ye=null,_e=O,je=O=0,Be=null;_e!==null&&je<U.length;je++){_e.index>je?(Be=_e,_e=null):Be=_e.sibling;var Xe=B(j,_e,U[je],Y);if(Xe===null){_e===null&&(_e=Be);break}t&&_e&&Xe.alternate===null&&i(j,_e),O=d(Xe,O,je),Ye===null?Te=Xe:Ye.sibling=Xe,Ye=Xe,_e=Be}if(je===U.length)return r(j,_e),Ge&&as(j,je),Te;if(_e===null){for(;je<U.length;je++)_e=J(j,U[je],Y),_e!==null&&(O=d(_e,O,je),Ye===null?Te=_e:Ye.sibling=_e,Ye=_e);return Ge&&as(j,je),Te}for(_e=o(_e);je<U.length;je++)Be=H(_e,j,je,U[je],Y),Be!==null&&(t&&Be.alternate!==null&&_e.delete(Be.key===null?je:Be.key),O=d(Be,O,je),Ye===null?Te=Be:Ye.sibling=Be,Ye=Be);return t&&_e.forEach(function(ma){return i(j,ma)}),Ge&&as(j,je),Te}function we(j,O,U,Y){if(U==null)throw Error(a(151));for(var Te=null,Ye=null,_e=O,je=O=0,Be=null,Xe=U.next();_e!==null&&!Xe.done;je++,Xe=U.next()){_e.index>je?(Be=_e,_e=null):Be=_e.sibling;var ma=B(j,_e,Xe.value,Y);if(ma===null){_e===null&&(_e=Be);break}t&&_e&&ma.alternate===null&&i(j,_e),O=d(ma,O,je),Ye===null?Te=ma:Ye.sibling=ma,Ye=ma,_e=Be}if(Xe.done)return r(j,_e),Ge&&as(j,je),Te;if(_e===null){for(;!Xe.done;je++,Xe=U.next())Xe=J(j,Xe.value,Y),Xe!==null&&(O=d(Xe,O,je),Ye===null?Te=Xe:Ye.sibling=Xe,Ye=Xe);return Ge&&as(j,je),Te}for(_e=o(_e);!Xe.done;je++,Xe=U.next())Xe=H(_e,j,je,Xe.value,Y),Xe!==null&&(t&&Xe.alternate!==null&&_e.delete(Xe.key===null?je:Xe.key),O=d(Xe,O,je),Ye===null?Te=Xe:Ye.sibling=Xe,Ye=Xe);return t&&_e.forEach(function(u2){return i(j,u2)}),Ge&&as(j,je),Te}function lt(j,O,U,Y){if(typeof U=="object"&&U!==null&&U.type===X&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case P:e:{for(var Te=U.key;O!==null;){if(O.key===Te){if(Te=U.type,Te===X){if(O.tag===7){r(j,O.sibling),Y=h(O,U.props.children),Y.return=j,j=Y;break e}}else if(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===w&&ir(Te)===O.type){r(j,O.sibling),Y=h(O,U.props),hl(Y,U),Y.return=j,j=Y;break e}r(j,O);break}else i(j,O);O=O.sibling}U.type===X?(Y=Ja(U.props.children,j.mode,Y,U.key),Y.return=j,j=Y):(Y=Gc(U.type,U.key,U.props,null,j.mode,Y),hl(Y,U),Y.return=j,j=Y)}return v(j);case $:e:{for(Te=U.key;O!==null;){if(O.key===Te)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){r(j,O.sibling),Y=h(O,U.children||[]),Y.return=j,j=Y;break e}else{r(j,O);break}else i(j,O);O=O.sibling}Y=of(U,j.mode,Y),Y.return=j,j=Y}return v(j);case w:return U=ir(U),lt(j,O,U,Y)}if(Qe(U))return de(j,O,U,Y);if(V(U)){if(Te=V(U),typeof Te!="function")throw Error(a(150));return U=Te.call(U),we(j,O,U,Y)}if(typeof U.then=="function")return lt(j,O,Jc(U),Y);if(U.$$typeof===ae)return lt(j,O,Kc(j,U),Y);Wc(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(r(j,O.sibling),Y=h(O,U),Y.return=j,j=Y):(r(j,O),Y=rf(U,j.mode,Y),Y.return=j,j=Y),v(j)):r(j,O)}return function(j,O,U,Y){try{ul=0;var Te=lt(j,O,U,Y);return Wr=null,Te}catch(_e){if(_e===Jr||_e===Xc)throw _e;var Ye=kn(29,_e,null,j.mode);return Ye.lanes=Y,Ye.return=j,Ye}}}var ar=bg(!0),Eg=bg(!1),Zs=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Js(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ws(t,i,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Je&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Fc(t),sg(t,null,r),i}return Hc(t,o,i,r),Fc(t)}function fl(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,r|=o,i.lanes=r,La(t,r)}}function Ef(t,i){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,r=r.next}while(r!==null);d===null?h=d=i:d=d.next=i}else h=d=i;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Tf=!1;function dl(){if(Tf){var t=Zr;if(t!==null)throw t}}function ml(t,i,r,o){Tf=!1;var h=t.updateQueue;Zs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,z=C.next;C.next=null,v===null?d=z:v.next=z,v=C;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=z:T.next=z,Q.lastBaseUpdate=C))}if(d!==null){var J=h.baseState;v=0,Q=z=C=null,T=d;do{var B=T.lane&-536870913,H=B!==T.lane;if(H?(ze&B)===B:(o&B)===B){B!==0&&B===Xr&&(Tf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var de=t,we=T;B=i;var lt=r;switch(we.tag){case 1:if(de=we.payload,typeof de=="function"){J=de.call(lt,J,B);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=we.payload,B=typeof de=="function"?de.call(lt,J,B):de,B==null)break e;J=S({},J,B);break e;case 2:Zs=!0}}B=T.callback,B!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[B]:H.push(B))}else H={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(z=Q=H,C=J):Q=Q.next=H,v|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Q===null&&(C=J),h.baseState=C,h.firstBaseUpdate=z,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),sa|=v,t.lanes=v,t.memoizedState=J}}function Tg(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Ag(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Tg(r[t],i)}var eo=k(null),eu=k(0);function Sg(t,i){t=gs,oe(eu,t),oe(eo,i),gs=t|i.baseLanes}function Af(){oe(eu,gs),oe(eo,eo.current)}function Sf(){gs=eu.current,K(eo),K(eu)}var Mn=k(null),ti=null;function ea(t){var i=t.alternate;oe(Rt,Rt.current&1),oe(Mn,t),ti===null&&(i===null||eo.current!==null||i.memoizedState!==null)&&(ti=t)}function wf(t){oe(Rt,Rt.current),oe(Mn,t),ti===null&&(ti=t)}function wg(t){t.tag===22?(oe(Rt,Rt.current),oe(Mn,t),ti===null&&(ti=t)):ta()}function ta(){oe(Rt,Rt.current),oe(Mn,Mn.current)}function On(t){K(Mn),ti===t&&(ti=null),K(Rt)}var Rt=k(0);function tu(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Dd(r)||kd(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ls=0,Ve=null,rt=null,Vt=null,nu=!1,to=!1,rr=!1,iu=0,pl=0,no=null,eT=0;function St(){throw Error(a(321))}function xf(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Dn(t[r],i[r]))return!1;return!0}function Rf(t,i,r,o,h,d){return ls=d,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?l0:qf,rr=!1,d=r(o,h),rr=!1,to&&(d=Rg(i,r,o,h)),xg(t),d}function xg(t){G.H=_l;var i=rt!==null&&rt.next!==null;if(ls=0,Vt=rt=Ve=null,nu=!1,pl=0,no=null,i)throw Error(a(300));t===null||jt||(t=t.dependencies,t!==null&&$c(t)&&(jt=!0))}function Rg(t,i,r,o){Ve=t;var h=0;do{if(to&&(no=null),pl=0,to=!1,25<=h)throw Error(a(301));if(h+=1,Vt=rt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=c0,d=i(r,o)}while(to);return d}function tT(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?gl(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Ve.flags|=1024),i}function Nf(){var t=iu!==0;return iu=0,t}function If(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function Cf(t){if(nu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}nu=!1}ls=0,Vt=rt=Ve=null,to=!1,pl=iu=0,no=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ve.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function Nt(){if(rt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=Vt===null?Ve.memoizedState:Vt.next;if(i!==null)Vt=i,rt=t;else{if(t===null)throw Ve.alternate===null?Error(a(467)):Error(a(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Vt===null?Ve.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var i=pl;return pl+=1,no===null&&(no=[]),t=yg(no,t,i),i=Ve,(Vt===null?i.memoizedState:Vt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?l0:qf),t}function au(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===ae)return Zt(t)}throw Error(a(438,String(t)))}function Df(t){var i=null,r=Ve.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var o=Ve.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=su(),Ve.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),o=0;o<t;o++)r[o]=M;return i.index++,r}function cs(t,i){return typeof i=="function"?i(t):i}function ru(t){var i=Nt();return kf(i,rt,t)}function kf(t,i,r){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,C=null,z=i,Q=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(ze&J)===J:(ls&J)===J){var B=z.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===Xr&&(Q=!0);else if((ls&B)===B){z=z.next,B===Xr&&(Q=!0);continue}else J={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=J,v=d):C=C.next=J,Ve.lanes|=B,sa|=B;J=z.action,rr&&r(d,J),d=z.hasEagerState?z.eagerState:r(d,J)}else B={lane:J,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=B,v=d):C=C.next=B,Ve.lanes|=J,sa|=J;z=z.next}while(z!==null&&z!==i);if(C===null?v=d:C.next=T,!Dn(d,t.memoizedState)&&(jt=!0,Q&&(r=Zr,r!==null)))throw r;t.memoizedState=d,t.baseState=v,t.baseQueue=C,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Mf(t){var i=Nt(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var o=r.dispatch,h=r.pending,d=i.memoizedState;if(h!==null){r.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Dn(d,i.memoizedState)||(jt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),r.lastRenderedState=d}return[d,o]}function Ng(t,i,r){var o=Ve,h=Nt(),d=Ge;if(d){if(r===void 0)throw Error(a(407));r=r()}else r=i();var v=!Dn((rt||h).memoizedState,r);if(v&&(h.memoizedState=r,jt=!0),h=h.queue,jf(Dg.bind(null,o,h,t),[t]),h.getSnapshot!==i||v||Vt!==null&&Vt.memoizedState.tag&1){if(o.flags|=2048,io(9,{destroy:void 0},Cg.bind(null,o,h,r,i),null),ht===null)throw Error(a(349));d||(ls&127)!==0||Ig(o,i,r)}return r}function Ig(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=Ve.updateQueue,i===null?(i=su(),Ve.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function Cg(t,i,r,o){i.value=r,i.getSnapshot=o,kg(i)&&Mg(t)}function Dg(t,i,r){return r(function(){kg(i)&&Mg(t)})}function kg(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Dn(t,r)}catch{return!0}}function Mg(t){var i=Za(t,2);i!==null&&An(i,t,2)}function Of(t){var i=dn();if(typeof t=="function"){var r=t;if(t=r(),rr){gn(!0);try{r()}finally{gn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},i}function Og(t,i,r,o){return t.baseState=r,kf(t,rt,typeof o=="function"?o:cs)}function nT(t,i,r,o,h){if(cu(t))throw Error(a(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?r(!0):d.isTransition=!1,o(d),r=i.pending,r===null?(d.next=i.pending=d,Vg(i,d)):(d.next=r.next,i.pending=r.next=d)}}function Vg(t,i){var r=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=G.T,v={};G.T=v;try{var T=r(h,o),C=G.S;C!==null&&C(v,T),jg(t,i,T)}catch(z){Vf(t,i,z)}finally{d!==null&&v.types!==null&&(d.types=v.types),G.T=d}}else try{d=r(h,o),jg(t,i,d)}catch(z){Vf(t,i,z)}}function jg(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Pg(t,i,o)},function(o){return Vf(t,i,o)}):Pg(t,i,r)}function Pg(t,i,r){i.status="fulfilled",i.value=r,Lg(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,Vg(t,r)))}function Vf(t,i,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=r,Lg(i),i=i.next;while(i!==o)}t.action=null}function Lg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Ug(t,i){return i}function zg(t,i){if(Ge){var r=ht.formState;if(r!==null){e:{var o=Ve;if(Ge){if(mt){t:{for(var h=mt,d=ei;h.nodeType!==8;){if(!d){h=null;break t}if(h=ni(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){mt=ni(h.nextSibling),o=h.data==="F!";break e}}Ys(o)}o=!1}o&&(i=r[0])}}return r=dn(),r.memoizedState=r.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ug,lastRenderedState:i},r.queue=o,r=a0.bind(null,Ve,o),o.dispatch=r,o=Of(!1),d=Bf.bind(null,Ve,!1,o.queue),o=dn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,r=nT.bind(null,Ve,h,d,r),h.dispatch=r,o.memoizedState=t,[i,r,!1]}function Bg(t){var i=Nt();return qg(i,rt,t)}function qg(t,i,r){if(i=kf(t,i,Ug)[0],t=ru(cs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=gl(i)}catch(v){throw v===Jr?Xc:v}else o=i;i=Nt();var h=i.queue,d=h.dispatch;return r!==i.memoizedState&&(Ve.flags|=2048,io(9,{destroy:void 0},iT.bind(null,h,r),null)),[o,d,t]}function iT(t,i){t.action=i}function Hg(t){var i=Nt(),r=rt;if(r!==null)return qg(i,r,t);Nt(),i=i.memoizedState,r=Nt();var o=r.queue.dispatch;return r.memoizedState=t,[i,o,!1]}function io(t,i,r,o){return t={tag:t,create:r,deps:o,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=su(),Ve.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,i.lastEffect=t),t}function Fg(){return Nt().memoizedState}function ou(t,i,r,o){var h=dn();Ve.flags|=t,h.memoizedState=io(1|i,{destroy:void 0},r,o===void 0?null:o)}function lu(t,i,r,o){var h=Nt();o=o===void 0?null:o;var d=h.memoizedState.inst;rt!==null&&o!==null&&xf(o,rt.memoizedState.deps)?h.memoizedState=io(i,d,r,o):(Ve.flags|=t,h.memoizedState=io(1|i,d,r,o))}function Gg(t,i){ou(8390656,8,t,i)}function jf(t,i){lu(2048,8,t,i)}function sT(t){Ve.flags|=4;var i=Ve.updateQueue;if(i===null)i=su(),Ve.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function Qg(t){var i=Nt().memoizedState;return sT({ref:i,nextImpl:t}),function(){if((Je&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function $g(t,i){return lu(4,2,t,i)}function Kg(t,i){return lu(4,4,t,i)}function Yg(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Xg(t,i,r){r=r!=null?r.concat([t]):null,lu(4,4,Yg.bind(null,i,t),r)}function Pf(){}function Zg(t,i){var r=Nt();i=i===void 0?null:i;var o=r.memoizedState;return i!==null&&xf(i,o[1])?o[0]:(r.memoizedState=[t,i],t)}function Jg(t,i){var r=Nt();i=i===void 0?null:i;var o=r.memoizedState;if(i!==null&&xf(i,o[1]))return o[0];if(o=t(),rr){gn(!0);try{t()}finally{gn(!1)}}return r.memoizedState=[o,i],o}function Lf(t,i,r){return r===void 0||(ls&1073741824)!==0&&(ze&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=W0(),Ve.lanes|=t,sa|=t,r)}function Wg(t,i,r,o){return Dn(r,i)?r:eo.current!==null?(t=Lf(t,r,o),Dn(t,i)||(jt=!0),t):(ls&42)===0||(ls&1073741824)!==0&&(ze&261930)===0?(jt=!0,t.memoizedState=r):(t=W0(),Ve.lanes|=t,sa|=t,i)}function e0(t,i,r,o,h){var d=re.p;re.p=d!==0&&8>d?d:8;var v=G.T,T={};G.T=T,Bf(t,!1,i,r);try{var C=h(),z=G.S;if(z!==null&&z(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Q=WE(C,o);yl(t,i,Q,Pn(t))}else yl(t,i,o,Pn(t))}catch(J){yl(t,i,{then:function(){},status:"rejected",reason:J},Pn())}finally{re.p=d,v!==null&&T.types!==null&&(v.types=T.types),G.T=v}}function aT(){}function Uf(t,i,r,o){if(t.tag!==5)throw Error(a(476));var h=t0(t).queue;e0(t,h,i,ce,r===null?aT:function(){return n0(t),r(o)})}function t0(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:ce},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function n0(t){var i=t0(t);i.next===null&&(i=t.alternate.memoizedState),yl(t,i.next.queue,{},Pn())}function zf(){return Zt(Ol)}function i0(){return Nt().memoizedState}function s0(){return Nt().memoizedState}function rT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=Pn();t=Js(r);var o=Ws(i,t,r);o!==null&&(An(o,i,r),fl(o,i,r)),i={cache:pf()},t.payload=i;return}i=i.return}}function oT(t,i,r){var o=Pn();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},cu(t)?r0(i,r):(r=sf(t,i,r,o),r!==null&&(An(r,t,o),o0(r,i,o)))}function a0(t,i,r){var o=Pn();yl(t,i,r,o)}function yl(t,i,r,o){var h={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(cu(t))r0(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,r);if(h.hasEagerState=!0,h.eagerState=T,Dn(T,v))return Hc(t,i,h,0),ht===null&&qc(),!1}catch{}if(r=sf(t,i,h,o),r!==null)return An(r,t,o),o0(r,i,o),!0}return!1}function Bf(t,i,r,o){if(o={lane:2,revertLane:vd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cu(t)){if(i)throw Error(a(479))}else i=sf(t,r,o,2),i!==null&&An(i,t,2)}function cu(t){var i=t.alternate;return t===Ve||i!==null&&i===Ve}function r0(t,i){to=nu=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function o0(t,i,r){if((r&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,r|=o,i.lanes=r,La(t,r)}}var _l={readContext:Zt,use:au,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};_l.useEffectEvent=St;var l0={readContext:Zt,use:au,useCallback:function(t,i){return dn().memoizedState=[t,i===void 0?null:i],t},useContext:Zt,useEffect:Gg,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,ou(4194308,4,Yg.bind(null,i,t),r)},useLayoutEffect:function(t,i){return ou(4194308,4,t,i)},useInsertionEffect:function(t,i){ou(4,2,t,i)},useMemo:function(t,i){var r=dn();i=i===void 0?null:i;var o=t();if(rr){gn(!0);try{t()}finally{gn(!1)}}return r.memoizedState=[o,i],o},useReducer:function(t,i,r){var o=dn();if(r!==void 0){var h=r(i);if(rr){gn(!0);try{r(i)}finally{gn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=oT.bind(null,Ve,t),[o.memoizedState,t]},useRef:function(t){var i=dn();return t={current:t},i.memoizedState=t},useState:function(t){t=Of(t);var i=t.queue,r=a0.bind(null,Ve,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:Pf,useDeferredValue:function(t,i){var r=dn();return Lf(r,t,i)},useTransition:function(){var t=Of(!1);return t=e0.bind(null,Ve,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var o=Ve,h=dn();if(Ge){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),ht===null)throw Error(a(349));(ze&127)!==0||Ig(o,i,r)}h.memoizedState=r;var d={value:r,getSnapshot:i};return h.queue=d,Gg(Dg.bind(null,o,d,t),[t]),o.flags|=2048,io(9,{destroy:void 0},Cg.bind(null,o,d,r,i),null),r},useId:function(){var t=dn(),i=ht.identifierPrefix;if(Ge){var r=Oi,o=Mi;r=(o&~(1<<32-yt(o)-1)).toString(32)+r,i="_"+i+"R_"+r,r=iu++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=eT++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:zf,useFormState:zg,useActionState:zg,useOptimistic:function(t){var i=dn();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=Bf.bind(null,Ve,!0,r),r.dispatch=i,[t,i]},useMemoCache:Df,useCacheRefresh:function(){return dn().memoizedState=rT.bind(null,Ve)},useEffectEvent:function(t){var i=dn(),r={impl:t};return i.memoizedState=r,function(){if((Je&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},qf={readContext:Zt,use:au,useCallback:Zg,useContext:Zt,useEffect:jf,useImperativeHandle:Xg,useInsertionEffect:$g,useLayoutEffect:Kg,useMemo:Jg,useReducer:ru,useRef:Fg,useState:function(){return ru(cs)},useDebugValue:Pf,useDeferredValue:function(t,i){var r=Nt();return Wg(r,rt.memoizedState,t,i)},useTransition:function(){var t=ru(cs)[0],i=Nt().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:Ng,useId:i0,useHostTransitionStatus:zf,useFormState:Bg,useActionState:Bg,useOptimistic:function(t,i){var r=Nt();return Og(r,rt,t,i)},useMemoCache:Df,useCacheRefresh:s0};qf.useEffectEvent=Qg;var c0={readContext:Zt,use:au,useCallback:Zg,useContext:Zt,useEffect:jf,useImperativeHandle:Xg,useInsertionEffect:$g,useLayoutEffect:Kg,useMemo:Jg,useReducer:Mf,useRef:Fg,useState:function(){return Mf(cs)},useDebugValue:Pf,useDeferredValue:function(t,i){var r=Nt();return rt===null?Lf(r,t,i):Wg(r,rt.memoizedState,t,i)},useTransition:function(){var t=Mf(cs)[0],i=Nt().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:Ng,useId:i0,useHostTransitionStatus:zf,useFormState:Hg,useActionState:Hg,useOptimistic:function(t,i){var r=Nt();return rt!==null?Og(r,rt,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Df,useCacheRefresh:s0};c0.useEffectEvent=Qg;function Hf(t,i,r,o){i=t.memoizedState,r=r(o,i),r=r==null?i:S({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ff={enqueueSetState:function(t,i,r){t=t._reactInternals;var o=Pn(),h=Js(o);h.payload=i,r!=null&&(h.callback=r),i=Ws(t,h,o),i!==null&&(An(i,t,o),fl(i,t,o))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var o=Pn(),h=Js(o);h.tag=1,h.payload=i,r!=null&&(h.callback=r),i=Ws(t,h,o),i!==null&&(An(i,t,o),fl(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=Pn(),o=Js(r);o.tag=2,i!=null&&(o.callback=i),i=Ws(t,o,r),i!==null&&(An(i,t,r),fl(i,t,r))}};function u0(t,i,r,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!sl(r,o)||!sl(h,d):!0}function h0(t,i,r,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,o),i.state!==t&&Ff.enqueueReplaceState(i,i.state,null)}function or(t,i){var r=i;if("ref"in i){r={};for(var o in i)o!=="ref"&&(r[o]=i[o])}if(t=t.defaultProps){r===i&&(r=S({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function f0(t){Bc(t)}function d0(t){console.error(t)}function m0(t){Bc(t)}function uu(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function p0(t,i,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Gf(t,i,r){return r=Js(r),r.tag=3,r.payload={element:null},r.callback=function(){uu(t,i)},r}function g0(t){return t=Js(t),t.tag=3,t}function y0(t,i,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){p0(i,r,o)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){p0(i,r,o),typeof h!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function lT(t,i,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=r.alternate,i!==null&&Yr(i,r,h,!0),r=Mn.current,r!==null){switch(r.tag){case 31:case 13:return ti===null?Tu():r.alternate===null&&wt===0&&(wt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===Zc?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([o]):i.add(o),gd(t,o,h)),!1;case 22:return r.flags|=65536,o===Zc?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([o]):r.add(o)),gd(t,o,h)),!1}throw Error(a(435,r.tag))}return gd(t,o,h),Tu(),!1}if(Ge)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==uf&&(t=Error(a(422),{cause:o}),ol(Zn(t,r)))):(o!==uf&&(i=Error(a(423),{cause:o}),ol(Zn(i,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Zn(o,r),h=Gf(t.stateNode,o,h),Ef(t,h),wt!==4&&(wt=2)),!1;var d=Error(a(520),{cause:o});if(d=Zn(d,r),xl===null?xl=[d]:xl.push(d),wt!==4&&(wt=2),i===null)return!0;o=Zn(o,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=Gf(r.stateNode,o,t),Ef(r,t),!1;case 1:if(i=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(aa===null||!aa.has(d))))return r.flags|=65536,h&=-h,r.lanes|=h,h=g0(h),y0(h,t,r,o),Ef(r,h),!1}r=r.return}while(r!==null);return!1}var Qf=Error(a(461)),jt=!1;function Jt(t,i,r,o){i.child=t===null?Eg(i,null,r,o):ar(i,t.child,r,o)}function _0(t,i,r,o,h){r=r.render;var d=i.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return tr(i),o=Rf(t,i,r,v,d,h),T=Nf(),t!==null&&!jt?(If(t,i,h),us(t,i,h)):(Ge&&T&&lf(i),i.flags|=1,Jt(t,i,o,h),i.child)}function v0(t,i,r,o,h){if(t===null){var d=r.type;return typeof d=="function"&&!af(d)&&d.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=d,b0(t,i,d,o,h)):(t=Gc(r.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!ed(t,h)){var v=d.memoizedProps;if(r=r.compare,r=r!==null?r:sl,r(v,o)&&t.ref===i.ref)return us(t,i,h)}return i.flags|=1,t=ss(d,o),t.ref=i.ref,t.return=i,i.child=t}function b0(t,i,r,o,h){if(t!==null){var d=t.memoizedProps;if(sl(d,o)&&t.ref===i.ref)if(jt=!1,i.pendingProps=o=d,ed(t,h))(t.flags&131072)!==0&&(jt=!0);else return i.lanes=t.lanes,us(t,i,h)}return $f(t,i,r,o,h)}function E0(t,i,r,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|r:r,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return T0(t,i,d,r,o)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yc(i,d!==null?d.cachePool:null),d!==null?Sg(i,d):Af(),wg(i);else return o=i.lanes=536870912,T0(t,i,d!==null?d.baseLanes|r:r,r,o)}else d!==null?(Yc(i,d.cachePool),Sg(i,d),ta(),i.memoizedState=null):(t!==null&&Yc(i,null),Af(),ta());return Jt(t,i,h,r),i.child}function vl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function T0(t,i,r,o,h){var d=yf();return d=d===null?null:{parent:Ot._currentValue,pool:d},i.memoizedState={baseLanes:r,cachePool:d},t!==null&&Yc(i,null),Af(),wg(i),t!==null&&Yr(t,i,o,!0),i.childLanes=h,null}function hu(t,i){return i=du({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function A0(t,i,r){return ar(i,t.child,null,r),t=hu(i,i.pendingProps),t.flags|=2,On(i),i.memoizedState=null,t}function cT(t,i,r){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ge){if(o.mode==="hidden")return t=hu(i,o),i.lanes=536870912,vl(null,t);if(wf(i),(t=mt)?(t=Vy(t,ei),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:$s!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},r=rg(t),r.return=i,i.child=r,Xt=i,mt=null)):t=null,t===null)throw Ys(i);return i.lanes=536870912,null}return hu(i,o)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(wf(i),h)if(i.flags&256)i.flags&=-257,i=A0(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(jt||Yr(t,i,r,!1),h=(r&t.childLanes)!==0,jt||h){if(o=ht,o!==null&&(v=Ua(o,r),v!==0&&v!==d.retryLane))throw d.retryLane=v,Za(t,v),An(o,t,v),Qf;Tu(),i=A0(t,i,r)}else t=d.treeContext,mt=ni(v.nextSibling),Xt=i,Ge=!0,Ks=null,ei=!1,t!==null&&cg(i,t),i=hu(i,o),i.flags|=4096;return i}return t=ss(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function fu(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function $f(t,i,r,o,h){return tr(i),r=Rf(t,i,r,o,void 0,h),o=Nf(),t!==null&&!jt?(If(t,i,h),us(t,i,h)):(Ge&&o&&lf(i),i.flags|=1,Jt(t,i,r,h),i.child)}function S0(t,i,r,o,h,d){return tr(i),i.updateQueue=null,r=Rg(i,o,r,h),xg(t),o=Nf(),t!==null&&!jt?(If(t,i,d),us(t,i,d)):(Ge&&o&&lf(i),i.flags|=1,Jt(t,i,r,d),i.child)}function w0(t,i,r,o,h){if(tr(i),i.stateNode===null){var d=Gr,v=r.contextType;typeof v=="object"&&v!==null&&(d=Zt(v)),d=new r(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ff,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},vf(i),v=r.contextType,d.context=typeof v=="object"&&v!==null?Zt(v):Gr,d.state=i.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Hf(i,r,v,o),d.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Ff.enqueueReplaceState(d,d.state,null),ml(i,o,d,h),dl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,C=or(r,T);d.props=C;var z=d.context,Q=r.contextType;v=Gr,typeof Q=="object"&&Q!==null&&(v=Zt(Q));var J=r.getDerivedStateFromProps;Q=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==v)&&h0(i,d,o,v),Zs=!1;var B=i.memoizedState;d.state=B,ml(i,o,d,h),dl(),z=i.memoizedState,T||B!==z||Zs?(typeof J=="function"&&(Hf(i,r,J,o),z=i.memoizedState),(C=Zs||u0(i,r,C,o,B,z,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),d.props=o,d.state=z,d.context=v,o=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,bf(t,i),v=i.memoizedProps,Q=or(r,v),d.props=Q,J=i.pendingProps,B=d.context,z=r.contextType,C=Gr,typeof z=="object"&&z!==null&&(C=Zt(z)),T=r.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==J||B!==C)&&h0(i,d,o,C),Zs=!1,B=i.memoizedState,d.state=B,ml(i,o,d,h),dl();var H=i.memoizedState;v!==J||B!==H||Zs||t!==null&&t.dependencies!==null&&$c(t.dependencies)?(typeof T=="function"&&(Hf(i,r,T,o),H=i.memoizedState),(Q=Zs||u0(i,r,Q,o,B,H,C)||t!==null&&t.dependencies!==null&&$c(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=C,o=Q):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,fu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=ar(i,t.child,null,h),i.child=ar(i,null,r,h)):Jt(t,i,r,h),i.memoizedState=d.state,t=i.child):t=us(t,i,h),t}function x0(t,i,r,o){return Wa(),i.flags|=256,Jt(t,i,r,o),i.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(t){return{baseLanes:t,cachePool:pg()}}function Xf(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=jn),t}function R0(t,i,r){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Rt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ge){if(h?ea(i):ta(),(t=mt)?(t=Vy(t,ei),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:$s!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},r=rg(t),r.return=i,i.child=r,Xt=i,mt=null)):t=null,t===null)throw Ys(i);return kd(t)?i.lanes=32:i.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(ta(),h=i.mode,T=du({mode:"hidden",children:T},h),o=Ja(o,h,r,null),T.return=i,o.return=i,T.sibling=o,i.child=T,o=i.child,o.memoizedState=Yf(r),o.childLanes=Xf(t,v,r),i.memoizedState=Kf,vl(null,o)):(ea(i),Zf(i,T))}var C=t.memoizedState;if(C!==null&&(T=C.dehydrated,T!==null)){if(d)i.flags&256?(ea(i),i.flags&=-257,i=Jf(t,i,r)):i.memoizedState!==null?(ta(),i.child=t.child,i.flags|=128,i=null):(ta(),T=o.fallback,h=i.mode,o=du({mode:"visible",children:o.children},h),T=Ja(T,h,r,null),T.flags|=2,o.return=i,T.return=i,o.sibling=T,i.child=o,ar(i,t.child,null,r),o=i.child,o.memoizedState=Yf(r),o.childLanes=Xf(t,v,r),i.memoizedState=Kf,i=vl(null,o));else if(ea(i),kd(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var z=v.dgst;v=z,o=Error(a(419)),o.stack="",o.digest=v,ol({value:o,source:null,stack:null}),i=Jf(t,i,r)}else if(jt||Yr(t,i,r,!1),v=(r&t.childLanes)!==0,jt||v){if(v=ht,v!==null&&(o=Ua(v,r),o!==0&&o!==C.retryLane))throw C.retryLane=o,Za(t,o),An(v,t,o),Qf;Dd(T)||Tu(),i=Jf(t,i,r)}else Dd(T)?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,mt=ni(T.nextSibling),Xt=i,Ge=!0,Ks=null,ei=!1,t!==null&&cg(i,t),i=Zf(i,o.children),i.flags|=4096);return i}return h?(ta(),T=o.fallback,h=i.mode,C=t.child,z=C.sibling,o=ss(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,z!==null?T=ss(z,T):(T=Ja(T,h,r,null),T.flags|=2),T.return=i,o.return=i,o.sibling=T,i.child=o,vl(null,o),o=i.child,T=t.child.memoizedState,T===null?T=Yf(r):(h=T.cachePool,h!==null?(C=Ot._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=pg(),T={baseLanes:T.baseLanes|r,cachePool:h}),o.memoizedState=T,o.childLanes=Xf(t,v,r),i.memoizedState=Kf,vl(t.child,o)):(ea(i),r=t.child,t=r.sibling,r=ss(r,{mode:"visible",children:o.children}),r.return=i,r.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=r,i.memoizedState=null,r)}function Zf(t,i){return i=du({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function du(t,i){return t=kn(22,t,null,i),t.lanes=0,t}function Jf(t,i,r){return ar(i,t.child,null,r),t=Zf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function N0(t,i,r){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),df(t.return,i,r)}function Wf(t,i,r,o,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=r,v.tailMode=h,v.treeForkCount=d)}function I0(t,i,r){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var v=Rt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,oe(Rt,v),Jt(t,i,o,r),o=Ge?rl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N0(t,r,i);else if(t.tag===19)N0(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=i.child,h=null;r!==null;)t=r.alternate,t!==null&&tu(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=i.child,i.child=null):(h=r.sibling,r.sibling=null),Wf(i,!1,h,r,d,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&tu(t)===null){i.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}Wf(i,!0,r,null,d,o);break;case"together":Wf(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function us(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),sa|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(Yr(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=ss(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=ss(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function ed(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&$c(t)))}function uT(t,i,r){switch(i.tag){case 3:pe(i,i.stateNode.containerInfo),Xs(i,Ot,t.memoizedState.cache),Wa();break;case 27:case 5:ut(i);break;case 4:pe(i,i.stateNode.containerInfo);break;case 10:Xs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,wf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(ea(i),i.flags|=128,null):(r&i.child.childLanes)!==0?R0(t,i,r):(ea(i),t=us(t,i,r),t!==null?t.sibling:null);ea(i);break;case 19:var h=(t.flags&128)!==0;if(o=(r&i.childLanes)!==0,o||(Yr(t,i,r,!1),o=(r&i.childLanes)!==0),h){if(o)return I0(t,i,r);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Rt,Rt.current),o)break;return null;case 22:return i.lanes=0,E0(t,i,r,i.pendingProps);case 24:Xs(i,Ot,t.memoizedState.cache)}return us(t,i,r)}function C0(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)jt=!0;else{if(!ed(t,r)&&(i.flags&128)===0)return jt=!1,uT(t,i,r);jt=(t.flags&131072)!==0}else jt=!1,Ge&&(i.flags&1048576)!==0&&lg(i,rl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=ir(i.elementType),i.type=t,typeof t=="function")af(t)?(o=or(t,o),i.tag=1,i=w0(null,i,t,o,r)):(i.tag=0,i=$f(null,i,t,o,r));else{if(t!=null){var h=t.$$typeof;if(h===ye){i.tag=11,i=_0(null,i,t,o,r);break e}else if(h===I){i.tag=14,i=v0(null,i,t,o,r);break e}}throw i=Re(t)||t,Error(a(306,i,""))}}return i;case 0:return $f(t,i,i.type,i.pendingProps,r);case 1:return o=i.type,h=or(o,i.pendingProps),w0(t,i,o,h,r);case 3:e:{if(pe(i,i.stateNode.containerInfo),t===null)throw Error(a(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,bf(t,i),ml(i,o,null,r);var v=i.memoizedState;if(o=v.cache,Xs(i,Ot,o),o!==d.cache&&mf(i,[Ot],r,!0),dl(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=x0(t,i,o,r);break e}else if(o!==h){h=Zn(Error(a(424)),i),ol(h),i=x0(t,i,o,r);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,mt=ni(t.firstChild),Xt=i,Ge=!0,Ks=null,ei=!0,r=Eg(i,null,o,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wa(),o===h){i=us(t,i,r);break e}Jt(t,i,o,r)}i=i.child}return i;case 26:return fu(t,i),t===null?(r=By(i.type,null,i.pendingProps,null))?i.memoizedState=r:Ge||(r=i.type,t=i.pendingProps,o=Iu(Se.current).createElement(r),o[tt]=i,o[Ke]=t,Wt(o,r,t),kt(o),i.stateNode=o):i.memoizedState=By(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ut(i),t===null&&Ge&&(o=i.stateNode=Ly(i.type,i.pendingProps,Se.current),Xt=i,ei=!0,h=mt,ca(i.type)?(Md=h,mt=ni(o.firstChild)):mt=h),Jt(t,i,i.pendingProps.children,r),fu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ge&&((h=o=mt)&&(o=zT(o,i.type,i.pendingProps,ei),o!==null?(i.stateNode=o,Xt=i,mt=ni(o.firstChild),ei=!1,h=!0):h=!1),h||Ys(i)),ut(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,Nd(h,d)?o=null:v!==null&&Nd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Rf(t,i,tT,null,null,r),Ol._currentValue=h),fu(t,i),Jt(t,i,o,r),i.child;case 6:return t===null&&Ge&&((t=r=mt)&&(r=BT(r,i.pendingProps,ei),r!==null?(i.stateNode=r,Xt=i,mt=null,t=!0):t=!1),t||Ys(i)),null;case 13:return R0(t,i,r);case 4:return pe(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=ar(i,null,o,r):Jt(t,i,o,r),i.child;case 11:return _0(t,i,i.type,i.pendingProps,r);case 7:return Jt(t,i,i.pendingProps,r),i.child;case 8:return Jt(t,i,i.pendingProps.children,r),i.child;case 12:return Jt(t,i,i.pendingProps.children,r),i.child;case 10:return o=i.pendingProps,Xs(i,i.type,o.value),Jt(t,i,o.children,r),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,tr(i),h=Zt(h),o=o(h),i.flags|=1,Jt(t,i,o,r),i.child;case 14:return v0(t,i,i.type,i.pendingProps,r);case 15:return b0(t,i,i.type,i.pendingProps,r);case 19:return I0(t,i,r);case 31:return cT(t,i,r);case 22:return E0(t,i,r,i.pendingProps);case 24:return tr(i),o=Zt(Ot),t===null?(h=yf(),h===null&&(h=ht,d=pf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=r),h=d),i.memoizedState={parent:o,cache:h},vf(i),Xs(i,Ot,h)):((t.lanes&r)!==0&&(bf(t,i),ml(i,null,null,r),dl()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Xs(i,Ot,o)):(o=d.cache,Xs(i,Ot,o),o!==h.cache&&mf(i,[Ot],r,!0))),Jt(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function hs(t){t.flags|=4}function td(t,i,r,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(iy())t.flags|=8192;else throw sr=Zc,_f}else t.flags&=-16777217}function D0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qy(i))if(iy())t.flags|=8192;else throw sr=Zc,_f}function mu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ir():536870912,t.lanes|=i,oo|=i)}function bl(t,i){if(!Ge)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function pt(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(i)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=r,i}function hT(t,i,r){var o=i.pendingProps;switch(cf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return r=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),os(Ot),Ee(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kr(i)?hs(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hf())),pt(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(hs(i),d!==null?(pt(i),D0(i,d)):(pt(i),td(i,h,null,o,r))):d?d!==t.memoizedState?(hs(i),pt(i),D0(i,d)):(pt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&hs(i),pt(i),td(i,h,t,o,r)),null;case 27:if(Bt(i),r=Se.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&hs(i);else{if(!o){if(i.stateNode===null)throw Error(a(166));return pt(i),null}t=ne.current,Kr(i)?ug(i):(t=Ly(h,o,r),i.stateNode=t,hs(i))}return pt(i),null;case 5:if(Bt(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&hs(i);else{if(!o){if(i.stateNode===null)throw Error(a(166));return pt(i),null}if(d=ne.current,Kr(i))ug(i);else{var v=Iu(Se.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}d[tt]=i,d[Ke]=o;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(Wt(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&hs(i)}}return pt(i),td(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&hs(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(a(166));if(t=Se.current,Kr(i)){if(t=i.stateNode,r=i.memoizedProps,o=null,h=Xt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[tt]=i,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Ry(t.nodeValue,r)),t||Ys(i,!0)}else t=Iu(t).createTextNode(o),t[tt]=i,i.stateNode=t}return pt(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(o=Kr(i),r!==null){if(t===null){if(!o)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[tt]=i}else Wa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),t=!1}else r=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(On(i),i):(On(i),null);if((i.flags&128)!==0)throw Error(a(558))}return pt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Kr(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[tt]=i}else Wa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),h=!1}else h=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(On(i),i):(On(i),null)}return On(i),(i.flags&128)!==0?(i.lanes=r,i):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),mu(i,i.updateQueue),pt(i),null);case 4:return Ee(),t===null&&Ad(i.stateNode.containerInfo),pt(i),null;case 10:return os(i.type),pt(i),null;case 19:if(K(Rt),o=i.memoizedState,o===null)return pt(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)bl(o,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=tu(t),d!==null){for(i.flags|=128,bl(o,!1),t=d.updateQueue,i.updateQueue=t,mu(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)ag(r,t),r=r.sibling;return oe(Rt,Rt.current&1|2),Ge&&as(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&qt()>vu&&(i.flags|=128,h=!0,bl(o,!1),i.lanes=4194304)}else{if(!h)if(t=tu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,mu(i,t),bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Ge)return pt(i),null}else 2*qt()-o.renderingStartTime>vu&&r!==536870912&&(i.flags|=128,h=!0,bl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=qt(),t.sibling=null,r=Rt.current,oe(Rt,h?r&1|2:r&1),Ge&&as(i,o.treeForkCount),t):(pt(i),null);case 22:case 23:return On(i),Sf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(r&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),r=i.updateQueue,r!==null&&mu(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==r&&(i.flags|=2048),t!==null&&K(nr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),os(Ot),pt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function fT(t,i){switch(cf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return os(Ot),Ee(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Bt(i),null;case 31:if(i.memoizedState!==null){if(On(i),i.alternate===null)throw Error(a(340));Wa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(On(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Wa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return K(Rt),null;case 4:return Ee(),null;case 10:return os(i.type),null;case 22:case 23:return On(i),Sf(),t!==null&&K(nr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return os(Ot),null;case 25:return null;default:return null}}function k0(t,i){switch(cf(i),i.tag){case 3:os(Ot),Ee();break;case 26:case 27:case 5:Bt(i);break;case 4:Ee();break;case 31:i.memoizedState!==null&&On(i);break;case 13:On(i);break;case 19:K(Rt);break;case 10:os(i.type);break;case 22:case 23:On(i),Sf(),t!==null&&K(nr);break;case 24:os(Ot)}}function El(t,i){try{var r=i.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&t)===t){o=void 0;var d=r.create,v=r.inst;o=d(),v.destroy=o}r=r.next}while(r!==h)}}catch(T){st(i,i.return,T)}}function na(t,i,r){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var C=r,z=T;try{z()}catch(Q){st(h,C,Q)}}}o=o.next}while(o!==d)}}catch(Q){st(i,i.return,Q)}}function M0(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{Ag(i,r)}catch(o){st(t,t.return,o)}}}function O0(t,i,r){r.props=or(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){st(t,i,o)}}function Tl(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(h){st(t,i,h)}}function Vi(t,i){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){st(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){st(t,i,h)}else r.current=null}function V0(t){var i=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){st(t,t.return,h)}}function nd(t,i,r){try{var o=t.stateNode;OT(o,t.type,r,i),o[Ke]=i}catch(h){st(t,t.return,h)}}function j0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ca(t.type)||t.tag===4}function id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ca(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sd(t,i,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=li));else if(o!==4&&(o===27&&ca(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(sd(t,i,r),t=t.sibling;t!==null;)sd(t,i,r),t=t.sibling}function pu(t,i,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(o!==4&&(o===27&&ca(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(pu(t,i,r),t=t.sibling;t!==null;)pu(t,i,r),t=t.sibling}function P0(t){var i=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Wt(i,o,r),i[tt]=t,i[Ke]=r}catch(d){st(t,t.return,d)}}var fs=!1,Pt=!1,ad=!1,L0=typeof WeakSet=="function"?WeakSet:Set,$t=null;function dT(t,i){if(t=t.containerInfo,xd=ju,t=Xp(t),Zh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var v=0,T=-1,C=-1,z=0,Q=0,J=t,B=null;t:for(;;){for(var H;J!==r||h!==0&&J.nodeType!==3||(T=v+h),J!==d||o!==0&&J.nodeType!==3||(C=v+o),J.nodeType===3&&(v+=J.nodeValue.length),(H=J.firstChild)!==null;)B=J,J=H;for(;;){if(J===t)break t;if(B===r&&++z===h&&(T=v),B===d&&++Q===o&&(C=v),(H=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=H}r=T===-1||C===-1?null:{start:T,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(Rd={focusedElem:t,selectionRange:r},ju=!1,$t=i;$t!==null;)if(i=$t,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,$t=t;else for(;$t!==null;){switch(i=$t,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,r=i,h=d.memoizedProps,d=d.memoizedState,o=r.stateNode;try{var de=or(r.type,h);t=o.getSnapshotBeforeUpdate(de,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(we){st(r,r.return,we)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)Cd(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,$t=t;break}$t=i.return}}function U0(t,i,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:ms(t,r),o&4&&El(5,r);break;case 1:if(ms(t,r),o&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(v){st(r,r.return,v)}else{var h=or(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){st(r,r.return,v)}}o&64&&M0(r),o&512&&Tl(r,r.return);break;case 3:if(ms(t,r),o&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Ag(t,i)}catch(v){st(r,r.return,v)}}break;case 27:i===null&&o&4&&P0(r);case 26:case 5:ms(t,r),i===null&&o&4&&V0(r),o&512&&Tl(r,r.return);break;case 12:ms(t,r);break;case 31:ms(t,r),o&4&&q0(t,r);break;case 13:ms(t,r),o&4&&H0(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=TT.bind(null,r),qT(t,r))));break;case 22:if(o=r.memoizedState!==null||fs,!o){i=i!==null&&i.memoizedState!==null||Pt,h=fs;var d=Pt;fs=o,(Pt=i)&&!d?ps(t,r,(r.subtreeFlags&8772)!==0):ms(t,r),fs=h,Pt=d}break;case 30:break;default:ms(t,r)}}function z0(t){var i=t.alternate;i!==null&&(t.alternate=null,z0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Dr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,vn=!1;function ds(t,i,r){for(r=r.child;r!==null;)B0(t,i,r),r=r.sibling}function B0(t,i,r){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(sn,r)}catch{}switch(r.tag){case 26:Pt||Vi(r,i),ds(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Pt||Vi(r,i);var o=vt,h=vn;ca(r.type)&&(vt=r.stateNode,vn=!1),ds(t,i,r),Dl(r.stateNode),vt=o,vn=h;break;case 5:Pt||Vi(r,i);case 6:if(o=vt,h=vn,vt=null,ds(t,i,r),vt=o,vn=h,vt!==null)if(vn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(r.stateNode)}catch(d){st(r,i,d)}else try{vt.removeChild(r.stateNode)}catch(d){st(r,i,d)}break;case 18:vt!==null&&(vn?(t=vt,My(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),go(t)):My(vt,r.stateNode));break;case 4:o=vt,h=vn,vt=r.stateNode.containerInfo,vn=!0,ds(t,i,r),vt=o,vn=h;break;case 0:case 11:case 14:case 15:na(2,r,i),Pt||na(4,r,i),ds(t,i,r);break;case 1:Pt||(Vi(r,i),o=r.stateNode,typeof o.componentWillUnmount=="function"&&O0(r,i,o)),ds(t,i,r);break;case 21:ds(t,i,r);break;case 22:Pt=(o=Pt)||r.memoizedState!==null,ds(t,i,r),Pt=o;break;default:ds(t,i,r)}}function q0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{go(t)}catch(r){st(i,i.return,r)}}}function H0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{go(t)}catch(r){st(i,i.return,r)}}function mT(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new L0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new L0),i;default:throw Error(a(435,t.tag))}}function gu(t,i){var r=mT(t);i.forEach(function(o){if(!r.has(o)){r.add(o);var h=AT.bind(null,t,o);o.then(h,h)}})}function bn(t,i){var r=i.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ca(T.type)){vt=T.stateNode,vn=!1;break e}break;case 5:vt=T.stateNode,vn=!1;break e;case 3:case 4:vt=T.stateNode.containerInfo,vn=!0;break e}T=T.return}if(vt===null)throw Error(a(160));B0(d,v,h),vt=null,vn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)F0(i,t),i=i.sibling}var mi=null;function F0(t,i){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(i,t),En(t),o&4&&(na(3,t,t.return),El(3,t),na(5,t,t.return));break;case 1:bn(i,t),En(t),o&512&&(Pt||r===null||Vi(r,r.return)),o&64&&fs&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=mi;if(bn(i,t),En(t),o&512&&(Pt||r===null||Vi(r,r.return)),o&4){var d=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ei]||d[tt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Wt(d,o,r),d[tt]=t,kt(d),o=d;break e;case"link":var v=Fy("link","href",h).get(o+(r.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(o),Wt(d,o,r),h.head.appendChild(d);break;case"meta":if(v=Fy("meta","content",h).get(o+(r.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(T,1);break t}}d=h.createElement(o),Wt(d,o,r),h.head.appendChild(d);break;default:throw Error(a(468,o))}d[tt]=t,kt(d),o=d}t.stateNode=o}else Gy(h,t.type,t.stateNode);else t.stateNode=Hy(h,o,t.memoizedProps);else d!==o?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,o===null?Gy(h,t.type,t.stateNode):Hy(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&nd(t,t.memoizedProps,r.memoizedProps)}break;case 27:bn(i,t),En(t),o&512&&(Pt||r===null||Vi(r,r.return)),r!==null&&o&4&&nd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(bn(i,t),En(t),o&512&&(Pt||r===null||Vi(r,r.return)),t.flags&32){h=t.stateNode;try{_n(h,"")}catch(de){st(t,t.return,de)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,nd(t,h,r!==null?r.memoizedProps:h)),o&1024&&(ad=!0);break;case 6:if(bn(i,t),En(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(de){st(t,t.return,de)}}break;case 3:if(ku=null,h=mi,mi=Cu(i.containerInfo),bn(i,t),mi=h,En(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{go(i.containerInfo)}catch(de){st(t,t.return,de)}ad&&(ad=!1,G0(t));break;case 4:o=mi,mi=Cu(t.stateNode.containerInfo),bn(i,t),En(t),mi=o;break;case 12:bn(i,t),En(t);break;case 31:bn(i,t),En(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,gu(t,o)));break;case 13:bn(i,t),En(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(_u=qt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,gu(t,o)));break;case 22:h=t.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,z=fs,Q=Pt;if(fs=z||h,Pt=Q||C,bn(i,t),Pt=Q,fs=z,En(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(r===null||C||fs||Pt||lr(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){C=r=i;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=C.stateNode;var J=C.memoizedProps.style,B=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(de){st(C,C.return,de)}}}else if(i.tag===6){if(r===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(de){st(C,C.return,de)}}}else if(i.tag===18){if(r===null){C=i;try{var H=C.stateNode;h?Oy(H,!0):Oy(C.stateNode,!1)}catch(de){st(C,C.return,de)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,gu(t,r))));break;case 19:bn(i,t),En(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,gu(t,o)));break;case 30:break;case 21:break;default:bn(i,t),En(t)}}function En(t){var i=t.flags;if(i&2){try{for(var r,o=t.return;o!==null;){if(j0(o)){r=o;break}o=o.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var h=r.stateNode,d=id(t);pu(t,d,h);break;case 5:var v=r.stateNode;r.flags&32&&(_n(v,""),r.flags&=-33);var T=id(t);pu(t,T,v);break;case 3:case 4:var C=r.stateNode.containerInfo,z=id(t);sd(t,z,C);break;default:throw Error(a(161))}}catch(Q){st(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function G0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;G0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ms(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)U0(t,i.alternate,i),i=i.sibling}function lr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:na(4,i,i.return),lr(i);break;case 1:Vi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&O0(i,i.return,r),lr(i);break;case 27:Dl(i.stateNode);case 26:case 5:Vi(i,i.return),lr(i);break;case 22:i.memoizedState===null&&lr(i);break;case 30:lr(i);break;default:lr(i)}t=t.sibling}}function ps(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:ps(h,d,r),El(4,d);break;case 1:if(ps(h,d,r),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){st(o,o.return,z)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Tg(C[h],T)}catch(z){st(o,o.return,z)}}r&&v&64&&M0(d),Tl(d,d.return);break;case 27:P0(d);case 26:case 5:ps(h,d,r),r&&o===null&&v&4&&V0(d),Tl(d,d.return);break;case 12:ps(h,d,r);break;case 31:ps(h,d,r),r&&v&4&&q0(h,d);break;case 13:ps(h,d,r),r&&v&4&&H0(h,d);break;case 22:d.memoizedState===null&&ps(h,d,r),Tl(d,d.return);break;case 30:break;default:ps(h,d,r)}i=i.sibling}}function rd(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&ll(r))}function od(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ll(t))}function pi(t,i,r,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Q0(t,i,r,o),i=i.sibling}function Q0(t,i,r,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:pi(t,i,r,o),h&2048&&El(9,i);break;case 1:pi(t,i,r,o);break;case 3:pi(t,i,r,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ll(t)));break;case 12:if(h&2048){pi(t,i,r,o),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){st(i,i.return,C)}}else pi(t,i,r,o);break;case 31:pi(t,i,r,o);break;case 13:pi(t,i,r,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?pi(t,i,r,o):Al(t,i):d._visibility&2?pi(t,i,r,o):(d._visibility|=2,so(t,i,r,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&rd(v,i);break;case 24:pi(t,i,r,o),h&2048&&od(i.alternate,i);break;default:pi(t,i,r,o)}}function so(t,i,r,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,T=r,C=o,z=v.flags;switch(v.tag){case 0:case 11:case 15:so(d,v,T,C,h),El(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?so(d,v,T,C,h):Al(d,v):(Q._visibility|=2,so(d,v,T,C,h)),h&&z&2048&&rd(v.alternate,v);break;case 24:so(d,v,T,C,h),h&&z&2048&&od(v.alternate,v);break;default:so(d,v,T,C,h)}i=i.sibling}}function Al(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,o=i,h=o.flags;switch(o.tag){case 22:Al(r,o),h&2048&&rd(o.alternate,o);break;case 24:Al(r,o),h&2048&&od(o.alternate,o);break;default:Al(r,o)}i=i.sibling}}var Sl=8192;function ao(t,i,r){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)$0(t,i,r),t=t.sibling}function $0(t,i,r){switch(t.tag){case 26:ao(t,i,r),t.flags&Sl&&t.memoizedState!==null&&e2(r,mi,t.memoizedState,t.memoizedProps);break;case 5:ao(t,i,r);break;case 3:case 4:var o=mi;mi=Cu(t.stateNode.containerInfo),ao(t,i,r),mi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Sl,Sl=16777216,ao(t,i,r),Sl=o):ao(t,i,r));break;default:ao(t,i,r)}}function K0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function wl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var o=i[r];$t=o,X0(o,t)}K0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Y0(t),t=t.sibling}function Y0(t){switch(t.tag){case 0:case 11:case 15:wl(t),t.flags&2048&&na(9,t,t.return);break;case 3:wl(t);break;case 12:wl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,yu(t)):wl(t);break;default:wl(t)}}function yu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var o=i[r];$t=o,X0(o,t)}K0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:na(8,i,i.return),yu(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,yu(i));break;default:yu(i)}t=t.sibling}}function X0(t,i){for(;$t!==null;){var r=$t;switch(r.tag){case 0:case 11:case 15:na(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ll(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,$t=o;else e:for(r=t;$t!==null;){o=$t;var h=o.sibling,d=o.return;if(z0(o),o===r){$t=null;break e}if(h!==null){h.return=d,$t=h;break e}$t=d}}}var pT={getCacheForType:function(t){var i=Zt(Ot),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return Zt(Ot).controller.signal}},gT=typeof WeakMap=="function"?WeakMap:Map,Je=0,ht=null,Le=null,ze=0,it=0,Vn=null,ia=!1,ro=!1,ld=!1,gs=0,wt=0,sa=0,cr=0,cd=0,jn=0,oo=0,xl=null,Tn=null,ud=!1,_u=0,Z0=0,vu=1/0,bu=null,aa=null,Ht=0,ra=null,lo=null,ys=0,hd=0,fd=null,J0=null,Rl=0,dd=null;function Pn(){return(Je&2)!==0&&ze!==0?ze&-ze:G.T!==null?vd():Cr()}function W0(){if(jn===0)if((ze&536870912)===0||Ge){var t=Xi;Xi<<=1,(Xi&3932160)===0&&(Xi=262144),jn=t}else jn=536870912;return t=Mn.current,t!==null&&(t.flags|=32),jn}function An(t,i,r){(t===ht&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(co(t,0),oa(t,ze,jn,!1)),Zi(t,r),((Je&2)===0||t!==ht)&&(t===ht&&((Je&2)===0&&(cr|=r),wt===4&&oa(t,ze,jn,!1)),ji(t))}function ey(t,i,r){if((Je&6)!==0)throw Error(a(327));var o=!r&&(i&127)===0&&(i&t.expiredLanes)===0||Nn(t,i),h=o?vT(t,i):pd(t,i,!0),d=o;do{if(h===0){ro&&!o&&oa(t,i,0,!1);break}else{if(r=t.current.alternate,d&&!yT(r)){h=pd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=xl;var C=T.current.memoizedState.isDehydrated;if(C&&(co(T,v).flags|=256),v=pd(T,v,!1),v!==2){if(ld&&!C){T.errorRecoveryDisabledLanes|=d,cr|=d,h=4;break e}d=Tn,Tn=h,d!==null&&(Tn===null?Tn=d:Tn.push.apply(Tn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){co(t,0),oa(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:oa(o,i,jn,!ia);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=_u+300-qt(),10<h)){if(oa(o,i,jn,!ia),Hn(o,0,!0)!==0)break e;ys=i,o.timeoutHandle=Dy(ty.bind(null,o,r,Tn,bu,ud,i,jn,cr,oo,ia,d,"Throttled",-0,0),h);break e}ty(o,r,Tn,bu,ud,i,jn,cr,oo,ia,d,null,-0,0)}}break}while(!0);ji(t)}function ty(t,i,r,o,h,d,v,T,C,z,Q,J,B,H){if(t.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},$0(i,d,J);var de=(d&62914560)===d?_u-qt():(d&4194048)===d?Z0-qt():0;if(de=t2(J,de),de!==null){ys=d,t.cancelPendingCommit=de(cy.bind(null,t,i,d,r,o,h,v,T,C,Q,J,null,B,H)),oa(t,d,v,!z);return}}cy(t,i,d,r,o,h,v,T,C)}function yT(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],d=h.getSnapshot;h=h.value;try{if(!Dn(d(),h))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oa(t,i,r,o){i&=~cd,i&=~cr,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-yt(h),v=1<<d;o[d]=-1,h&=~v}r!==0&&Ji(t,r,i)}function Eu(){return(Je&6)===0?(Nl(0),!1):!0}function md(){if(Le!==null){if(it===0)var t=Le.return;else t=Le,rs=er=null,Cf(t),Wr=null,ul=0,t=Le;for(;t!==null;)k0(t.alternate,t),t=t.return;Le=null}}function co(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,PT(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ys=0,md(),ht=t,Le=r=ss(t.current,null),ze=i,it=0,Vn=null,ia=!1,ro=Nn(t,i),ld=!1,oo=jn=cd=cr=sa=wt=0,Tn=xl=null,ud=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-yt(o),d=1<<h;i|=t[h],o&=~d}return gs=i,qc(),r}function ny(t,i){Ve=null,G.H=_l,i===Jr||i===Xc?(i=_g(),it=3):i===_f?(i=_g(),it=4):it=i===Qf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Le===null&&(wt=1,uu(t,Zn(i,t.current)))}function iy(){var t=Mn.current;return t===null?!0:(ze&4194048)===ze?ti===null:(ze&62914560)===ze||(ze&536870912)!==0?t===ti:!1}function sy(){var t=G.H;return G.H=_l,t===null?_l:t}function ay(){var t=G.A;return G.A=pT,t}function Tu(){wt=4,ia||(ze&4194048)!==ze&&Mn.current!==null||(ro=!0),(sa&134217727)===0&&(cr&134217727)===0||ht===null||oa(ht,ze,jn,!1)}function pd(t,i,r){var o=Je;Je|=2;var h=sy(),d=ay();(ht!==t||ze!==i)&&(bu=null,co(t,i)),i=!1;var v=wt;e:do try{if(it!==0&&Le!==null){var T=Le,C=Vn;switch(it){case 8:md(),v=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var z=it;if(it=0,Vn=null,uo(t,T,C,z),r&&ro){v=0;break e}break;default:z=it,it=0,Vn=null,uo(t,T,C,z)}}_T(),v=wt;break}catch(Q){ny(t,Q)}while(!0);return i&&t.shellSuspendCounter++,rs=er=null,Je=o,G.H=h,G.A=d,Le===null&&(ht=null,ze=0,qc()),v}function _T(){for(;Le!==null;)ry(Le)}function vT(t,i){var r=Je;Je|=2;var o=sy(),h=ay();ht!==t||ze!==i?(bu=null,vu=qt()+500,co(t,i)):ro=Nn(t,i);e:do try{if(it!==0&&Le!==null){i=Le;var d=Vn;t:switch(it){case 1:it=0,Vn=null,uo(t,i,d,1);break;case 2:case 9:if(gg(d)){it=0,Vn=null,oy(i);break}i=function(){it!==2&&it!==9||ht!==t||(it=7),ji(t)},d.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:gg(d)?(it=0,Vn=null,oy(i)):(it=0,Vn=null,uo(t,i,d,7));break;case 5:var v=null;switch(Le.tag){case 26:v=Le.memoizedState;case 5:case 27:var T=Le;if(v?Qy(v):T.stateNode.complete){it=0,Vn=null;var C=T.sibling;if(C!==null)Le=C;else{var z=T.return;z!==null?(Le=z,Au(z)):Le=null}break t}}it=0,Vn=null,uo(t,i,d,5);break;case 6:it=0,Vn=null,uo(t,i,d,6);break;case 8:md(),wt=6;break e;default:throw Error(a(462))}}bT();break}catch(Q){ny(t,Q)}while(!0);return rs=er=null,G.H=o,G.A=h,Je=r,Le!==null?0:(ht=null,ze=0,qc(),wt)}function bT(){for(;Le!==null&&!Os();)ry(Le)}function ry(t){var i=C0(t.alternate,t,gs);t.memoizedProps=t.pendingProps,i===null?Au(t):Le=i}function oy(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=S0(r,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=S0(r,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:Cf(i);default:k0(r,i),i=Le=ag(i,gs),i=C0(r,i,gs)}t.memoizedProps=t.pendingProps,i===null?Au(t):Le=i}function uo(t,i,r,o){rs=er=null,Cf(i),Wr=null,ul=0;var h=i.return;try{if(lT(t,h,i,r,ze)){wt=1,uu(t,Zn(r,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;wt=1,uu(t,Zn(r,t.current)),Le=null;return}i.flags&32768?(Ge||o===1?t=!0:ro||(ze&536870912)!==0?t=!1:(ia=t=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),ly(i,t)):Au(i)}function Au(t){var i=t;do{if((i.flags&32768)!==0){ly(i,ia);return}t=i.return;var r=hT(i.alternate,i,gs);if(r!==null){Le=r;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);wt===0&&(wt=5)}function ly(t,i){do{var r=fT(t.alternate,t);if(r!==null){r.flags&=32767,Le=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=r}while(t!==null);wt=6,Le=null}function cy(t,i,r,o,h,d,v,T,C){t.cancelPendingCommit=null;do Su();while(Ht!==0);if((Je&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(d=i.lanes|i.childLanes,d|=nf,zo(t,r,d,v,T,C),t===ht&&(Le=ht=null,ze=0),lo=i,ra=t,ys=r,hd=d,fd=h,J0=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ST(bi,function(){return my(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=re.p,re.p=2,v=Je,Je|=4;try{dT(t,i,r)}finally{Je=v,re.p=h,G.T=o}}Ht=1,uy(),hy(),fy()}}function uy(){if(Ht===1){Ht=0;var t=ra,i=lo,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=G.T,G.T=null;var o=re.p;re.p=2;var h=Je;Je|=4;try{F0(i,t);var d=Rd,v=Xp(t.containerInfo),T=d.focusedElem,C=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&Yp(T.ownerDocument.documentElement,T)){if(C!==null&&Zh(T)){var z=C.start,Q=C.end;if(Q===void 0&&(Q=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(Q,T.value.length);else{var J=T.ownerDocument||document,B=J&&J.defaultView||window;if(B.getSelection){var H=B.getSelection(),de=T.textContent.length,we=Math.min(C.start,de),lt=C.end===void 0?we:Math.min(C.end,de);!H.extend&&we>lt&&(v=lt,lt=we,we=v);var j=Kp(T,we),O=Kp(T,lt);if(j&&O&&(H.rangeCount!==1||H.anchorNode!==j.node||H.anchorOffset!==j.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var U=J.createRange();U.setStart(j.node,j.offset),H.removeAllRanges(),we>lt?(H.addRange(U),H.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),H.addRange(U))}}}}for(J=[],H=T;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var Y=J[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}ju=!!xd,Rd=xd=null}finally{Je=h,re.p=o,G.T=r}}t.current=i,Ht=2}}function hy(){if(Ht===2){Ht=0;var t=ra,i=lo,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=G.T,G.T=null;var o=re.p;re.p=2;var h=Je;Je|=4;try{U0(t,i.alternate,i)}finally{Je=h,re.p=o,G.T=r}}Ht=3}}function fy(){if(Ht===4||Ht===3){Ht=0,zn();var t=ra,i=lo,r=ys,o=J0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,lo=ra=null,dy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(aa=null),oi(r),i=i.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(sn,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=re.p,re.p=2,G.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];d(T.value,{componentStack:T.stack})}}finally{G.T=i,re.p=h}}(ys&3)!==0&&Su(),ji(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===dd?Rl++:(Rl=0,dd=t):Rl=0,Nl(0)}}function dy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,ll(i)))}function Su(){return uy(),hy(),fy(),my()}function my(){if(Ht!==5)return!1;var t=ra,i=hd;hd=0;var r=oi(ys),o=G.T,h=re.p;try{re.p=32>r?32:r,G.T=null,r=fd,fd=null;var d=ra,v=ys;if(Ht=0,lo=ra=null,ys=0,(Je&6)!==0)throw Error(a(331));var T=Je;if(Je|=4,Y0(d.current),Q0(d,d.current,v,r),Je=T,Nl(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(sn,d)}catch{}return!0}finally{re.p=h,G.T=o,dy(t,i)}}function py(t,i,r){i=Zn(r,i),i=Gf(t.stateNode,i,2),t=Ws(t,i,2),t!==null&&(Zi(t,2),ji(t))}function st(t,i,r){if(t.tag===3)py(t,t,r);else for(;i!==null;){if(i.tag===3){py(i,t,r);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(aa===null||!aa.has(o))){t=Zn(r,t),r=g0(2),o=Ws(i,r,2),o!==null&&(y0(r,o,i,t),Zi(o,2),ji(o));break}}i=i.return}}function gd(t,i,r){var o=t.pingCache;if(o===null){o=t.pingCache=new gT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(r)||(ld=!0,h.add(r),t=ET.bind(null,t,i,r),i.then(t,t))}function ET(t,i,r){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,ht===t&&(ze&r)===r&&(wt===4||wt===3&&(ze&62914560)===ze&&300>qt()-_u?(Je&2)===0&&co(t,0):cd|=r,oo===ze&&(oo=0)),ji(t)}function gy(t,i){i===0&&(i=Ir()),t=Za(t,i),t!==null&&(Zi(t,i),ji(t))}function TT(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),gy(t,r)}function AT(t,i){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(i),gy(t,r)}function ST(t,i){return gt(t,i)}var wu=null,ho=null,yd=!1,xu=!1,_d=!1,la=0;function ji(t){t!==ho&&t.next===null&&(ho===null?wu=ho=t:ho=ho.next=t),xu=!0,yd||(yd=!0,xT())}function Nl(t,i){if(!_d&&xu){_d=!0;do for(var r=!1,o=wu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-yt(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,by(o,d))}else d=ze,d=Hn(o,o===ht?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Nn(o,d)||(r=!0,by(o,d));o=o.next}while(r);_d=!1}}function wT(){yy()}function yy(){xu=yd=!1;var t=0;la!==0&&jT()&&(t=la);for(var i=qt(),r=null,o=wu;o!==null;){var h=o.next,d=_y(o,i);d===0?(o.next=null,r===null?wu=h:r.next=h,h===null&&(ho=r)):(r=o,(t!==0||(d&3)!==0)&&(xu=!0)),o=h}Ht!==0&&Ht!==5||Nl(t),la!==0&&(la=0)}function _y(t,i){for(var r=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-yt(d),T=1<<v,C=h[v];C===-1?((T&r)===0||(T&o)!==0)&&(h[v]=js(T,i)):C<=i&&(t.expiredLanes|=T),d&=~T}if(i=ht,r=ze,r=Hn(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===i&&(it===2||it===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Tt(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Nn(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(o!==null&&Tt(o),oi(r)){case 2:case 8:r=ja;break;case 32:r=bi;break;case 268435456:r=Pa;break;default:r=bi}return o=vy.bind(null,t),r=gt(r,o),t.callbackPriority=i,t.callbackNode=r,i}return o!==null&&o!==null&&Tt(o),t.callbackPriority=2,t.callbackNode=null,2}function vy(t,i){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Su()&&t.callbackNode!==r)return null;var o=ze;return o=Hn(t,t===ht?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(ey(t,o,i),_y(t,qt()),t.callbackNode!=null&&t.callbackNode===r?vy.bind(null,t):null)}function by(t,i){if(Su())return null;ey(t,i,!0)}function xT(){LT(function(){(Je&6)!==0?gt(Va,wT):yy()})}function vd(){if(la===0){var t=Xr;t===0&&(t=Bn,Bn<<=1,(Bn&261888)===0&&(Bn=256)),la=t}return la}function Ey(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Vr(""+t)}function Ty(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function RT(t,i,r,o,h){if(i==="submit"&&r&&r.stateNode===h){var d=Ey((h[Ke]||null).action),v=o.submitter;v&&(i=(i=v[Ke]||null)?Ey(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new Ii("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(la!==0){var C=v?Ty(h,v):new FormData(h);Uf(r,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(T.preventDefault(),C=v?Ty(h,v):new FormData(h),Uf(r,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var bd=0;bd<tf.length;bd++){var Ed=tf[bd],NT=Ed.toLowerCase(),IT=Ed[0].toUpperCase()+Ed.slice(1);di(NT,"on"+IT)}di(Wp,"onAnimationEnd"),di(eg,"onAnimationIteration"),di(tg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(GE,"onTransitionRun"),di(QE,"onTransitionStart"),di($E,"onTransitionCancel"),di(ng,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function Ay(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var T=o[v],C=T.instance,z=T.currentTarget;if(T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(Q){Bc(Q)}h.currentTarget=null,d=C}else for(v=0;v<o.length;v++){if(T=o[v],C=T.instance,z=T.currentTarget,T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(Q){Bc(Q)}h.currentTarget=null,d=C}}}}function Ue(t,i){var r=i[Gn];r===void 0&&(r=i[Gn]=new Set);var o=t+"__bubble";r.has(o)||(Sy(i,t,2,!1),r.add(o))}function Td(t,i,r){var o=0;i&&(o|=4),Sy(r,t,o,i)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function Ad(t){if(!t[Ru]){t[Ru]=!0,Bo.forEach(function(r){r!=="selectionchange"&&(CT.has(r)||Td(r,!1,t),Td(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ru]||(i[Ru]=!0,Td("selectionchange",!1,i))}}function Sy(t,i,r,o){switch(Wy(i)){case 2:var h=s2;break;case 8:h=a2;break;default:h=Ld}r=h.bind(null,i,r,t),h=void 0,!Ha||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,r,{capture:!0,passive:h}):t.addEventListener(i,r,!0):h!==void 0?t.addEventListener(i,r,{passive:h}):t.addEventListener(i,r,!1)}function Sd(t,i,r,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=Ti(T),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){o=d=v;continue e}T=T.parentNode}}o=o.return}Hs(function(){var z=d,Q=$n(r),J=[];e:{var B=ig.get(t);if(B!==void 0){var H=Ii,de=t;switch(t){case"keypress":if(Ga(r)===0)break e;case"keydown":case"keyup":H=Lc;break;case"focusin":de="focus",H=$a;break;case"focusout":de="blur",H=$a;break;case"beforeblur":case"afterblur":H=$a;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=p;break;case Wp:case eg:case tg:H=Dc;break;case ng:H=A;break;case"scroll":case"scrollend":H=Wo;break;case"wheel":H=q;break;case"copy":case"cut":case"paste":H=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=is;break;case"toggle":case"beforetoggle":H=Oe}var we=(i&4)!==0,lt=!we&&(t==="scroll"||t==="scrollend"),j=we?B!==null?B+"Capture":null:B;we=[];for(var O=z,U;O!==null;){var Y=O;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||j===null||(Y=ci(O,j),Y!=null&&we.push(Cl(O,Y,U))),lt)break;O=O.return}0<we.length&&(B=new H(B,de,null,r,Q),J.push({event:B,listeners:we}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",B&&r!==Xo&&(de=r.relatedTarget||r.fromElement)&&(Ti(de)||de[an]))break e;if((H||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,H?(de=r.relatedTarget||r.toElement,H=z,de=de?Ti(de):null,de!==null&&(lt=c(de),we=de.tag,de!==lt||we!==5&&we!==27&&we!==6)&&(de=null)):(H=null,de=z),H!==de)){if(we=el,Y="onMouseLeave",j="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(we=is,Y="onPointerLeave",j="onPointerEnter",O="pointer"),lt=H==null?B:In(H),U=de==null?B:In(de),B=new we(Y,O+"leave",H,r,Q),B.target=lt,B.relatedTarget=U,Y=null,Ti(Q)===z&&(we=new we(j,O+"enter",de,r,Q),we.target=U,we.relatedTarget=lt,Y=we),lt=Y,H&&de)t:{for(we=DT,j=H,O=de,U=0,Y=j;Y;Y=we(Y))U++;Y=0;for(var Te=O;Te;Te=we(Te))Y++;for(;0<U-Y;)j=we(j),U--;for(;0<Y-U;)O=we(O),Y--;for(;U--;){if(j===O||O!==null&&j===O.alternate){we=j;break t}j=we(j),O=we(O)}we=null}else we=null;H!==null&&wy(J,B,H,we,!1),de!==null&&lt!==null&&wy(J,lt,de,we,!0)}}e:{if(B=z?In(z):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var Ye=qp;else if(zp(B))if(Hp)Ye=qE;else{Ye=zE;var _e=UE}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Or(z.elementType)&&(Ye=qp):Ye=BE;if(Ye&&(Ye=Ye(t,z))){Bp(J,Ye,r,Q);break e}_e&&_e(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&$o(B,"number",B.value)}switch(_e=z?In(z):window,t){case"focusin":(zp(_e)||_e.contentEditable==="true")&&(qr=_e,Jh=z,al=null);break;case"focusout":al=Jh=qr=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,Zp(J,r,Q);break;case"selectionchange":if(FE)break;case"keydown":case"keyup":Zp(J,r,Q)}var je;if(Ze)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Br?Ka(t,r)&&(Be="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Be="onCompositionStart");Be&&(ki&&r.locale!=="ko"&&(Br||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Br&&(je=Jo()):(Ni=Q,Zo="value"in Ni?Ni.value:Ni.textContent,Br=!0)),_e=Nu(z,Be),0<_e.length&&(Be=new Di(Be,t,null,r,Q),J.push({event:Be,listeners:_e}),je?Be.data=je:(je=zr(r),je!==null&&(Be.data=je)))),(je=Yn?VE(t,r):jE(t,r))&&(Be=Nu(z,"onBeforeInput"),0<Be.length&&(_e=new Di("onBeforeInput","beforeinput",null,r,Q),J.push({event:_e,listeners:Be}),_e.data=je)),RT(J,t,z,r,Q)}Ay(J,i)})}function Cl(t,i,r){return{instance:t,listener:i,currentTarget:r}}function Nu(t,i){for(var r=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ci(t,r),h!=null&&o.unshift(Cl(t,h,d)),h=ci(t,i),h!=null&&o.push(Cl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function DT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wy(t,i,r,o,h){for(var d=i._reactName,v=[];r!==null&&r!==o;){var T=r,C=T.alternate,z=T.stateNode;if(T=T.tag,C!==null&&C===o)break;T!==5&&T!==26&&T!==27||z===null||(C=z,h?(z=ci(r,d),z!=null&&v.unshift(Cl(r,z,C))):h||(z=ci(r,d),z!=null&&v.push(Cl(r,z,C)))),r=r.return}v.length!==0&&t.push({event:i,listeners:v})}var kT=/\r\n?/g,MT=/\u0000|\uFFFD/g;function xy(t){return(typeof t=="string"?t:""+t).replace(kT,`
`).replace(MT,"")}function Ry(t,i){return i=xy(i),xy(t)===i}function ot(t,i,r,o,h,d){switch(r){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||_n(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&_n(t,""+o);break;case"className":Cn(t,"class",o);break;case"tabIndex":Cn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(t,r,o);break;case"style":Yo(t,o,d);break;case"data":if(i!=="object"){Cn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Vr(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(i!=="input"&&ot(t,i,"name",h.name,h,null),ot(t,i,"formEncType",h.formEncType,h,null),ot(t,i,"formMethod",h.formMethod,h,null),ot(t,i,"formTarget",h.formTarget,h,null)):(ot(t,i,"encType",h.encType,h,null),ot(t,i,"method",h.method,h,null),ot(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Vr(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=li);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Vr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),kr(t,"popover",o);break;case"xlinkActuate":Mt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Mt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Mt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Mt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Mt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Mt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":kr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Nc.get(r)||r,kr(t,r,o))}}function wd(t,i,r,o,h,d){switch(r){case"style":Yo(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof o=="string"?_n(t,o):(typeof o=="number"||typeof o=="bigint")&&_n(t,""+o);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"onClick":o!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),i=r.slice(2,h?r.length-7:void 0),d=t[Ke]||null,d=d!=null?d[r]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,o,h);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):kr(t,r,o)}}}function Wt(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var o=!1,h=!1,d;for(d in r)if(r.hasOwnProperty(d)){var v=r[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:ot(t,i,d,v,r,null)}}h&&ot(t,i,"srcSet",r.srcSet,r,null),o&&ot(t,i,"src",r.src,r,null);return;case"input":Ue("invalid",t);var T=d=v=h=null,C=null,z=null;for(o in r)if(r.hasOwnProperty(o)){var Q=r[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":C=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,i));break;default:ot(t,i,o,Q,r,null)}}wc(t,d,T,C,z,v,h,!1);return;case"select":Ue("invalid",t),o=v=d=null;for(h in r)if(r.hasOwnProperty(h)&&(T=r[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:ot(t,i,h,T,r,null)}i=d,r=v,t.multiple=!!o,i!=null?Us(t,!!o,i,!1):r!=null&&Us(t,!!o,r,!0);return;case"textarea":Ue("invalid",t),d=h=o=null;for(v in r)if(r.hasOwnProperty(v)&&(T=r[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:ot(t,i,v,T,r,null)}zs(t,o,h,d);return;case"option":for(C in r)r.hasOwnProperty(C)&&(o=r[C],o!=null)&&(C==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":ot(t,i,C,o,r,null));return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(o=0;o<Il.length;o++)Ue(Il[o],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in r)if(r.hasOwnProperty(z)&&(o=r[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:ot(t,i,z,o,r,null)}return;default:if(Or(i)){for(Q in r)r.hasOwnProperty(Q)&&(o=r[Q],o!==void 0&&wd(t,i,Q,o,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(o=r[T],o!=null&&ot(t,i,T,o,r,null))}function OT(t,i,r,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,C=null,z=null,Q=null;for(H in r){var J=r[H];if(r.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=J;default:o.hasOwnProperty(H)||ot(t,i,H,null,o,J)}}for(var B in o){var H=o[B];if(J=r[B],o.hasOwnProperty(B)&&(H!=null||J!=null))switch(B){case"type":d=H;break;case"name":h=H;break;case"checked":z=H;break;case"defaultChecked":Q=H;break;case"value":v=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,i));break;default:H!==J&&ot(t,i,B,H,o,J)}}Mr(t,v,T,C,z,Q,d,h);return;case"select":H=v=T=B=null;for(d in r)if(C=r[d],r.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":H=C;default:o.hasOwnProperty(d)||ot(t,i,d,null,o,C)}for(h in o)if(d=o[h],C=r[h],o.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==C&&ot(t,i,h,d,o,C)}i=T,r=v,o=H,B!=null?Us(t,!!r,B,!1):!!o!=!!r&&(i!=null?Us(t,!!r,i,!0):Us(t,!!r,r?[]:"",!1));return;case"textarea":H=B=null;for(T in r)if(h=r[T],r.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(t,i,T,null,o,h)}for(v in o)if(h=o[v],d=r[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":B=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==d&&ot(t,i,v,h,o,d)}xc(t,B,H);return;case"option":for(var de in r)B=r[de],r.hasOwnProperty(de)&&B!=null&&!o.hasOwnProperty(de)&&(de==="selected"?t.selected=!1:ot(t,i,de,null,o,B));for(C in o)B=o[C],H=r[C],o.hasOwnProperty(C)&&B!==H&&(B!=null||H!=null)&&(C==="selected"?t.selected=B&&typeof B!="function"&&typeof B!="symbol":ot(t,i,C,B,o,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in r)B=r[we],r.hasOwnProperty(we)&&B!=null&&!o.hasOwnProperty(we)&&ot(t,i,we,null,o,B);for(z in o)if(B=o[z],H=r[z],o.hasOwnProperty(z)&&B!==H&&(B!=null||H!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(a(137,i));break;default:ot(t,i,z,B,o,H)}return;default:if(Or(i)){for(var lt in r)B=r[lt],r.hasOwnProperty(lt)&&B!==void 0&&!o.hasOwnProperty(lt)&&wd(t,i,lt,void 0,o,B);for(Q in o)B=o[Q],H=r[Q],!o.hasOwnProperty(Q)||B===H||B===void 0&&H===void 0||wd(t,i,Q,B,o,H);return}}for(var j in r)B=r[j],r.hasOwnProperty(j)&&B!=null&&!o.hasOwnProperty(j)&&ot(t,i,j,null,o,B);for(J in o)B=o[J],H=r[J],!o.hasOwnProperty(J)||B===H||B==null&&H==null||ot(t,i,J,B,o,H)}function Ny(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var h=r[o],d=h.transferSize,v=h.initiatorType,T=h.duration;if(d&&T&&Ny(v)){for(v=0,T=h.responseEnd,o+=1;o<r.length;o++){var C=r[o],z=C.startTime;if(z>T)break;var Q=C.transferSize,J=C.initiatorType;Q&&Ny(J)&&(C=C.responseEnd,v+=Q*(C<T?1:(T-z)/(C-z)))}if(--o,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var xd=null,Rd=null;function Iu(t){return t.nodeType===9?t:t.ownerDocument}function Iy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Nd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Id=null;function jT(){var t=window.event;return t&&t.type==="popstate"?t===Id?!1:(Id=t,!0):(Id=null,!1)}var Dy=typeof setTimeout=="function"?setTimeout:void 0,PT=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,LT=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(t){return ky.resolve(null).then(t).catch(UT)}:Dy;function UT(t){setTimeout(function(){throw t})}function ca(t){return t==="head"}function My(t,i){var r=i,o=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(h),go(i);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Dl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Dl(r);for(var d=r.firstChild;d;){var v=d.nextSibling,T=d.nodeName;d[Ei]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||r.removeChild(d),d=v}}else r==="body"&&Dl(t.ownerDocument.body);r=h}while(r);go(i)}function Oy(t,i){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Cd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Cd(r),Dr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function zT(t,i,r,o){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ei])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ni(t.nextSibling),t===null)break}return null}function BT(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ni(t.nextSibling),t===null))return null;return t}function Vy(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ni(t.nextSibling),t===null))return null;return t}function Dd(t){return t.data==="$?"||t.data==="$~"}function kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function qT(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var o=function(){i(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ni(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Md=null;function jy(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return ni(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function Py(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function Ly(t,i,r){switch(i=Iu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Dl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Dr(t)}var ii=new Map,Uy=new Set;function Cu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _s=re.d;re.d={f:HT,r:FT,D:GT,C:QT,L:$T,m:KT,X:XT,S:YT,M:ZT};function HT(){var t=_s.f(),i=Eu();return t||i}function FT(t){var i=Qn(t);i!==null&&i.tag===5&&i.type==="form"?n0(i):_s.r(t)}var fo=typeof document>"u"?null:document;function zy(t,i,r){var o=fo;if(o&&typeof i=="string"&&i){var h=yn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Uy.has(h)||(Uy.add(h),t={rel:t,crossOrigin:r,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Wt(i,"link",t),kt(i),o.head.appendChild(i)))}}function GT(t){_s.D(t),zy("dns-prefetch",t,null)}function QT(t,i){_s.C(t,i),zy("preconnect",t,i)}function $T(t,i,r){_s.L(t,i,r);var o=fo;if(o&&t&&i){var h='link[rel="preload"][as="'+yn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+yn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+yn(r.imageSizes)+'"]')):h+='[href="'+yn(t)+'"]';var d=h;switch(i){case"style":d=mo(t);break;case"script":d=po(t)}ii.has(d)||(t=S({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),ii.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(kl(d))||i==="script"&&o.querySelector(Ml(d))||(i=o.createElement("link"),Wt(i,"link",t),kt(i),o.head.appendChild(i)))}}function KT(t,i){_s.m(t,i);var r=fo;if(r&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+yn(o)+'"][href="'+yn(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=po(t)}if(!ii.has(d)&&(t=S({rel:"modulepreload",href:t},i),ii.set(d,t),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ml(d)))return}o=r.createElement("link"),Wt(o,"link",t),kt(o),r.head.appendChild(o)}}}function YT(t,i,r){_s.S(t,i,r);var o=fo;if(o&&t){var h=Ai(o).hoistableStyles,d=mo(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(kl(d)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},r),(r=ii.get(d))&&Od(t,r);var C=v=o.createElement("link");kt(C),Wt(C,"link",t),C._p=new Promise(function(z,Q){C.onload=z,C.onerror=Q}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Du(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function XT(t,i){_s.X(t,i);var r=fo;if(r&&t){var o=Ai(r).hoistableScripts,h=po(t),d=o.get(h);d||(d=r.querySelector(Ml(h)),d||(t=S({src:t,async:!0},i),(i=ii.get(h))&&Vd(t,i),d=r.createElement("script"),kt(d),Wt(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function ZT(t,i){_s.M(t,i);var r=fo;if(r&&t){var o=Ai(r).hoistableScripts,h=po(t),d=o.get(h);d||(d=r.querySelector(Ml(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=ii.get(h))&&Vd(t,i),d=r.createElement("script"),kt(d),Wt(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function By(t,i,r,o){var h=(h=Se.current)?Cu(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=mo(r.href),r=Ai(h).hoistableStyles,o=r.get(i),o||(o={type:"style",instance:null,count:0,state:null},r.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=mo(r.href);var d=Ai(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(kl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),ii.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ii.set(t,r),d||JT(h,t,r,v.state))),i&&o===null)throw Error(a(528,""));return v}if(i&&o!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=po(r),r=Ai(h).hoistableScripts,o=r.get(i),o||(o={type:"script",instance:null,count:0,state:null},r.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function mo(t){return'href="'+yn(t)+'"'}function kl(t){return'link[rel="stylesheet"]['+t+"]"}function qy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function JT(t,i,r,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Wt(i,"link",r),kt(i),t.head.appendChild(i))}function po(t){return'[src="'+yn(t)+'"]'}function Ml(t){return"script[async]"+t}function Hy(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+yn(r.href)+'"]');if(o)return i.instance=o,kt(o),o;var h=S({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),kt(o),Wt(o,"style",h),Du(o,r.precedence,t),i.instance=o;case"stylesheet":h=mo(r.href);var d=t.querySelector(kl(h));if(d)return i.state.loading|=4,i.instance=d,kt(d),d;o=qy(r),(h=ii.get(h))&&Od(o,h),d=(t.ownerDocument||t).createElement("link"),kt(d);var v=d;return v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Wt(d,"link",o),i.state.loading|=4,Du(d,r.precedence,t),i.instance=d;case"script":return d=po(r.src),(h=t.querySelector(Ml(d)))?(i.instance=h,kt(h),h):(o=r,(h=ii.get(d))&&(o=S({},r),Vd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),kt(h),Wt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Du(o,r.precedence,t));return i.instance}function Du(t,i,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Od(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Vd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var ku=null;function Fy(t,i,r){if(ku===null){var o=new Map,h=ku=new Map;h.set(r,o)}else h=ku,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var d=r[h];if(!(d[Ei]||d[tt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=o.get(v);T?T.push(d):o.set(v,[d])}}return o}function Gy(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function WT(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Qy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function e2(t,i,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=mo(o.href),d=i.querySelector(kl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Mu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=d,kt(d);return}d=i.ownerDocument||i,o=qy(o),(h=ii.get(h))&&Od(o,h),d=d.createElement("link"),kt(d);var v=d;v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Wt(d,"link",o),r.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Mu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var jd=0;function t2(t,i){return t.stylesheets&&t.count===0&&Vu(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&Vu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&jd===0&&(jd=62500*VT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>jd?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ou=null;function Vu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ou=new Map,i.forEach(n2,t),Ou=null,Mu.call(t))}function n2(t,i){if(!(i.state.loading&4)){var r=Ou.get(t);if(r)var o=r.get(null);else{r=new Map,Ou.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),o=v)}o&&r.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=r.get(v)||o,d===o&&r.set(null,h),r.set(v,h),this.count++,o=Mu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Ol={$$typeof:ae,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function i2(t,i,r,o,h,d,v,T,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function $y(t,i,r,o,h,d,v,T,C,z,Q,J){return t=new i2(t,i,r,v,C,z,Q,J,T),i=1,d===!0&&(i|=24),d=kn(3,null,null,i),t.current=d,d.stateNode=t,i=pf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:r,cache:i},vf(d),t}function Ky(t){return t?(t=Gr,t):Gr}function Yy(t,i,r,o,h,d){h=Ky(h),o.context===null?o.context=h:o.pendingContext=h,o=Js(i),o.payload={element:r},d=d===void 0?null:d,d!==null&&(o.callback=d),r=Ws(t,o,i),r!==null&&(An(r,t,i),fl(r,t,i))}function Xy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function Pd(t,i){Xy(t,i),(t=t.alternate)&&Xy(t,i)}function Zy(t){if(t.tag===13||t.tag===31){var i=Za(t,67108864);i!==null&&An(i,t,67108864),Pd(t,67108864)}}function Jy(t){if(t.tag===13||t.tag===31){var i=Pn();i=Wi(i);var r=Za(t,i);r!==null&&An(r,t,i),Pd(t,i)}}var ju=!0;function s2(t,i,r,o){var h=G.T;G.T=null;var d=re.p;try{re.p=2,Ld(t,i,r,o)}finally{re.p=d,G.T=h}}function a2(t,i,r,o){var h=G.T;G.T=null;var d=re.p;try{re.p=8,Ld(t,i,r,o)}finally{re.p=d,G.T=h}}function Ld(t,i,r,o){if(ju){var h=Ud(o);if(h===null)Sd(t,i,o,Pu,r),e_(t,o);else if(o2(h,t,i,r,o))o.stopPropagation();else if(e_(t,o),i&4&&-1<r2.indexOf(t)){for(;h!==null;){var d=Qn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=qn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var C=1<<31-yt(v);T.entanglements[1]|=C,v&=~C}ji(d),(Je&6)===0&&(vu=qt()+500,Nl(0))}}break;case 31:case 13:T=Za(d,2),T!==null&&An(T,d,2),Eu(),Pd(d,2)}if(d=Ud(o),d===null&&Sd(t,i,o,Pu,r),d===h)break;h=d}h!==null&&o.stopPropagation()}else Sd(t,i,o,null,r)}}function Ud(t){return t=$n(t),zd(t)}var Pu=null;function zd(t){if(Pu=null,t=Ti(t),t!==null){var i=c(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=f(i),t!==null)return t;t=null}else if(r===31){if(t=m(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Pu=t,null}function Wy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case Va:return 2;case ja:return 8;case bi:case Uo:return 32;case Pa:return 268435456;default:return 32}default:return 32}}var Bd=!1,ua=null,ha=null,fa=null,Vl=new Map,jl=new Map,da=[],r2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e_(t,i){switch(t){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(i.pointerId)}}function Pl(t,i,r,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Qn(i),i!==null&&Zy(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function o2(t,i,r,o,h){switch(i){case"focusin":return ua=Pl(ua,t,i,r,o,h),!0;case"dragenter":return ha=Pl(ha,t,i,r,o,h),!0;case"mouseover":return fa=Pl(fa,t,i,r,o,h),!0;case"pointerover":var d=h.pointerId;return Vl.set(d,Pl(Vl.get(d)||null,t,i,r,o,h)),!0;case"gotpointercapture":return d=h.pointerId,jl.set(d,Pl(jl.get(d)||null,t,i,r,o,h)),!0}return!1}function t_(t){var i=Ti(t.target);if(i!==null){var r=c(i);if(r!==null){if(i=r.tag,i===13){if(i=f(r),i!==null){t.blockedOn=i,Ie(t.priority,function(){Jy(r)});return}}else if(i===31){if(i=m(r),i!==null){t.blockedOn=i,Ie(t.priority,function(){Jy(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=Ud(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Xo=o,r.target.dispatchEvent(o),Xo=null}else return i=Qn(r),i!==null&&Zy(i),t.blockedOn=r,!1;i.shift()}return!0}function n_(t,i,r){Lu(t)&&r.delete(i)}function l2(){Bd=!1,ua!==null&&Lu(ua)&&(ua=null),ha!==null&&Lu(ha)&&(ha=null),fa!==null&&Lu(fa)&&(fa=null),Vl.forEach(n_),jl.forEach(n_)}function Uu(t,i){t.blockedOn===i&&(t.blockedOn=null,Bd||(Bd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,l2)))}var zu=null;function i_(t){zu!==t&&(zu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zu===t&&(zu=null);for(var i=0;i<t.length;i+=3){var r=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(zd(o||r)===null)continue;break}var d=Qn(r);d!==null&&(t.splice(i,3),i-=3,Uf(d,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function go(t){function i(C){return Uu(C,t)}ua!==null&&Uu(ua,t),ha!==null&&Uu(ha,t),fa!==null&&Uu(fa,t),Vl.forEach(i),jl.forEach(i);for(var r=0;r<da.length;r++){var o=da[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<da.length&&(r=da[0],r.blockedOn===null);)t_(r),r.blockedOn===null&&da.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],d=r[o+1],v=h[Ke]||null;if(typeof d=="function")v||i_(r);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ke]||null)T=v.formAction;else if(zd(h)!==null)continue}else T=v.action;typeof T=="function"?r[o+1]=T:(r.splice(o,3),o-=3),i_(r)}}}function s_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function qd(t){this._internalRoot=t}Bu.prototype.render=qd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,o=Pn();Yy(r,o,t,i,null,null)},Bu.prototype.unmount=qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Yy(t.current,2,null,t,null,null),Eu(),i[an]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var i=Cr();t={blockedOn:null,target:t,priority:i};for(var r=0;r<da.length&&i!==0&&i<da[r].priority;r++);da.splice(r,0,t),r===0&&t_(t)}};var a_=e.version;if(a_!=="19.2.3")throw Error(a(527,a_,"19.2.3"));re.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var c2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{sn=qu.inject(c2),Dt=qu}catch{}}return Ul.createRoot=function(t,i){if(!l(t))throw Error(a(299));var r=!1,o="",h=f0,d=d0,v=m0;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=$y(t,1,!1,null,null,r,o,null,h,d,v,s_),t[an]=i.current,Ad(t),new qd(i)},Ul.hydrateRoot=function(t,i,r){if(!l(t))throw Error(a(299));var o=!1,h="",d=f0,v=d0,T=m0,C=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(C=r.formState)),i=$y(t,1,!0,i,r??null,o,h,C,d,v,T,s_),i.context=Ky(null),r=i.current,o=Pn(),o=Wi(o),h=Js(o),h.callback=null,Ws(r,h,o),r=o,i.current.lanes=r,Zi(i,r),ji(i),t[an]=i.current,Ad(t),new Bu(i)},Ul.version="19.2.3",Ul}var p_;function v2(){if(p_)return Gd.exports;p_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gd.exports=_2(),Gd.exports}var b2=v2();const E2=Wv(b2),T2=()=>{};var g_={};const t1=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},A2=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const l=s[n++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],f=s[n++],m=s[n++],g=((l&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],f=s[n++];e[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},n1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,m=f?s[l+1]:0,g=l+2<s.length,_=g?s[l+2]:0,E=c>>2,S=(c&3)<<4|m>>4;let x=(m&15)<<2|_>>6,P=_&63;g||(P=64,f||(x=64)),a.push(n[E],n[S],n[x],n[P])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(t1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):A2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],m=l<s.length?n[s.charAt(l)]:0;++l;const _=l<s.length?n[s.charAt(l)]:64;++l;const S=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||m==null||_==null||S==null)throw new S2;const x=c<<2|m>>4;if(a.push(x),_!==64){const P=m<<4&240|_>>2;if(a.push(P),S!==64){const $=_<<6&192|S;a.push($)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class S2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w2=function(s){const e=t1(s);return n1.encodeByteArray(e,!0)},rh=function(s){return w2(s).replace(/\./g,"")},i1=function(s){try{return n1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function x2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const R2=()=>x2().__FIREBASE_DEFAULTS__,N2=()=>{if(typeof process>"u"||typeof g_>"u")return;const s=g_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},I2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&i1(s[1]);return e&&JSON.parse(e)},Rh=()=>{try{return T2()||R2()||N2()||I2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},s1=s=>Rh()?.emulatorHosts?.[s],a1=s=>{const e=s1(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},r1=()=>Rh()?.config,o1=s=>Rh()?.[`_${s}`];class C2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function br(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qm(s){return(await fetch(s,{credentials:"include"})).ok}function D2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[rh(JSON.stringify(n)),rh(JSON.stringify(f)),""].join(".")}const Ql={};function k2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ql))Ql[e]?s.emulator.push(e):s.prod.push(e);return s}function M2(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let y_=!1;function Hm(s,e){if(typeof window>"u"||typeof document>"u"||!br(window.location.host)||Ql[s]===e||Ql[s]||y_)return;Ql[s]=e;function n(x){return`__firebase__banner__${x}`}const a="__firebase__banner",c=k2().prod.length>0;function f(){const x=document.getElementById(a);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,P){x.setAttribute("width","24"),x.setAttribute("id",P),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function _(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{y_=!0,f()},x}function E(x,P){x.setAttribute("id",P),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function S(){const x=M2(a),P=n("text"),$=document.getElementById(P)||document.createElement("span"),X=n("learnmore"),F=document.getElementById(X)||document.createElement("a"),te=n("preprendIcon"),ie=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ae=x.element;m(ae),E(F,X);const ye=_();g(ie,te),ae.append(ie,$,F,ye),document.body.appendChild(ae)}c?($.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function V2(){const s=Rh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function L2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U2(){const s=un();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function z2(){return!V2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B2(){try{return typeof indexedDB=="object"}catch{return!1}}function q2(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const H2="FirebaseError";class Cs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=H2,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?F2(c,a):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new Cs(l,m,a)}}function F2(s,e){return s.replace(G2,(n,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const G2=/\{\$([^}]+)}/g;function Q2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function mr(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const l of n){if(!a.includes(l))return!1;const c=s[l],f=e[l];if(__(c)&&__(f)){if(!mr(c,f))return!1}else if(c!==f)return!1}for(const l of a)if(!n.includes(l))return!1;return!0}function __(s){return s!==null&&typeof s=="object"}function uc(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function zl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,c]=a.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Bl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function $2(s,e){const n=new K2(s,e);return n.subscribe.bind(n)}class K2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let l;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Y2(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:a},l.next===void 0&&(l.next=Yd),l.error===void 0&&(l.error=Yd),l.complete===void 0&&(l.complete=Yd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y2(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Yd(){}function bt(s){return s&&s._delegate?s._delegate:s}class xa{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ur="[DEFAULT]";class X2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new C2;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J2(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&f.resolve(l)}return l}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const l of a)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Z2(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z2(s){return s===ur?void 0:s}function J2(s){return s.instantiationMode==="EAGER"}class W2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const eA={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},tA=qe.INFO,nA={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},iA=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),l=nA[e];if(l)console[l](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=tA,this._logHandler=iA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const sA=(s,e)=>e.some(n=>s instanceof n);let v_,b_;function aA(){return v_||(v_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rA(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l1=new WeakMap,fm=new WeakMap,c1=new WeakMap,Xd=new WeakMap,Gm=new WeakMap;function oA(s){const e=new Promise((n,a)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(Ta(s.result)),l()},f=()=>{a(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&l1.set(n,s)}).catch(()=>{}),Gm.set(e,s),e}function lA(s){if(fm.has(s))return;const e=new Promise((n,a)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});fm.set(s,e)}let dm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return fm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||c1.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ta(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function cA(s){dm=s(dm)}function uA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(Zd(this),e,...n);return c1.set(a,e.sort?e.sort():[e]),Ta(a)}:rA().includes(s)?function(...e){return s.apply(Zd(this),e),Ta(l1.get(this))}:function(...e){return Ta(s.apply(Zd(this),e))}}function hA(s){return typeof s=="function"?uA(s):(s instanceof IDBTransaction&&lA(s),sA(s,aA())?new Proxy(s,dm):s)}function Ta(s){if(s instanceof IDBRequest)return oA(s);if(Xd.has(s))return Xd.get(s);const e=hA(s);return e!==s&&(Xd.set(s,e),Gm.set(e,s)),e}const Zd=s=>Gm.get(s);function fA(s,e,{blocked:n,upgrade:a,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),m=Ta(f);return a&&f.addEventListener("upgradeneeded",g=>{a(Ta(f.result),g.oldVersion,g.newVersion,Ta(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const dA=["get","getKey","getAll","getAllKeys","count"],mA=["put","add","delete","clear"],Jd=new Map;function E_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,l=mA.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(l||dA.includes(n)))return;const c=async function(f,...m){const g=this.transaction(f,l?"readwrite":"readonly");let _=g.store;return a&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),l&&g.done]))[0]};return Jd.set(e,c),c}cA(s=>({...s,get:(e,n,a)=>E_(e,n)||s.get(e,n,a),has:(e,n)=>!!E_(e,n)||s.has(e,n)}));class pA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gA(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function gA(s){return s.getComponent()?.type==="VERSION"}const mm="@firebase/app",T_="0.14.6";const ws=new Fm("@firebase/app"),yA="@firebase/app-compat",_A="@firebase/analytics-compat",vA="@firebase/analytics",bA="@firebase/app-check-compat",EA="@firebase/app-check",TA="@firebase/auth",AA="@firebase/auth-compat",SA="@firebase/database",wA="@firebase/data-connect",xA="@firebase/database-compat",RA="@firebase/functions",NA="@firebase/functions-compat",IA="@firebase/installations",CA="@firebase/installations-compat",DA="@firebase/messaging",kA="@firebase/messaging-compat",MA="@firebase/performance",OA="@firebase/performance-compat",VA="@firebase/remote-config",jA="@firebase/remote-config-compat",PA="@firebase/storage",LA="@firebase/storage-compat",UA="@firebase/firestore",zA="@firebase/ai",BA="@firebase/firestore-compat",qA="firebase",HA="12.6.0";const pm="[DEFAULT]",FA={[mm]:"fire-core",[yA]:"fire-core-compat",[vA]:"fire-analytics",[_A]:"fire-analytics-compat",[EA]:"fire-app-check",[bA]:"fire-app-check-compat",[TA]:"fire-auth",[AA]:"fire-auth-compat",[SA]:"fire-rtdb",[wA]:"fire-data-connect",[xA]:"fire-rtdb-compat",[RA]:"fire-fn",[NA]:"fire-fn-compat",[IA]:"fire-iid",[CA]:"fire-iid-compat",[DA]:"fire-fcm",[kA]:"fire-fcm-compat",[MA]:"fire-perf",[OA]:"fire-perf-compat",[VA]:"fire-rc",[jA]:"fire-rc-compat",[PA]:"fire-gcs",[LA]:"fire-gcs-compat",[UA]:"fire-fst",[BA]:"fire-fst-compat",[zA]:"fire-vertex","fire-js":"fire-js",[qA]:"fire-js-all"};const oh=new Map,GA=new Map,gm=new Map;function A_(s,e){try{s.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function pr(s){const e=s.name;if(gm.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,s);for(const n of oh.values())A_(n,s);for(const n of GA.values())A_(n,s);return!0}function Nh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function wn(s){return s==null?!1:s.settings!==void 0}const QA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Aa=new cc("app","Firebase",QA);class $A{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}const Oo=HA;function u1(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:pm,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw Aa.create("bad-app-name",{appName:String(l)});if(n||(n=r1()),!n)throw Aa.create("no-options");const c=oh.get(l);if(c){if(mr(n,c.options)&&mr(a,c.config))return c;throw Aa.create("duplicate-app",{appName:l})}const f=new W2(l);for(const g of gm.values())f.addComponent(g);const m=new $A(n,a,f);return oh.set(l,m),m}function Qm(s=pm){const e=oh.get(s);if(!e&&s===pm&&r1())return u1();if(!e)throw Aa.create("no-app",{appName:s});return e}function Ui(s,e,n){let a=FA[s]??s;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(f.join(" "));return}pr(new xa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const KA="firebase-heartbeat-database",YA=1,Jl="firebase-heartbeat-store";let Wd=null;function h1(){return Wd||(Wd=fA(KA,YA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Aa.create("idb-open",{originalErrorMessage:s.message})})),Wd}async function XA(s){try{const n=(await h1()).transaction(Jl),a=await n.objectStore(Jl).get(f1(s));return await n.done,a}catch(e){if(e instanceof Cs)ws.warn(e.message);else{const n=Aa.create("idb-get",{originalErrorMessage:e?.message});ws.warn(n.message)}}}async function S_(s,e){try{const a=(await h1()).transaction(Jl,"readwrite");await a.objectStore(Jl).put(e,f1(s)),await a.done}catch(n){if(n instanceof Cs)ws.warn(n.message);else{const a=Aa.create("idb-set",{originalErrorMessage:n?.message});ws.warn(a.message)}}}function f1(s){return`${s.name}!${s.options.appId}`}const ZA=1024,JA=30;class WA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tS(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=w_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>JA){const l=nS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ws.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=w_(),{heartbeatsToSend:n,unsentEntries:a}=eS(this._heartbeatsCache.heartbeats),l=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ws.warn(e),""}}}function w_(){return new Date().toISOString().substring(0,10)}function eS(s,e=ZA){const n=[];let a=s.slice();for(const l of s){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),x_(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),x_(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class tS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B2()?q2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return S_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return S_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function x_(s){return rh(JSON.stringify({version:2,heartbeats:s})).length}function nS(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function iS(s){pr(new xa("platform-logger",e=>new pA(e),"PRIVATE")),pr(new xa("heartbeat",e=>new WA(e),"PRIVATE")),Ui(mm,T_,s),Ui(mm,T_,"esm2020"),Ui("fire-js","")}iS("");function d1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sS=d1,m1=new cc("auth","Firebase",d1());const lh=new Fm("@firebase/auth");function aS(s,...e){lh.logLevel<=qe.WARN&&lh.warn(`Auth (${Oo}): ${s}`,...e)}function Xu(s,...e){lh.logLevel<=qe.ERROR&&lh.error(`Auth (${Oo}): ${s}`,...e)}function _i(s,...e){throw $m(s,...e)}function zi(s,...e){return $m(s,...e)}function p1(s,e,n){const a={...sS(),[e]:n};return new cc("auth","Firebase",a).create(e,{appName:s.name})}function Bi(s){return p1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $m(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return m1.create(s,...e)}function xe(s,e,...n){if(!s)throw $m(e,...n)}function Ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Xu(e),new Error(e)}function xs(s,e){s||Ts(e)}function ym(){return typeof self<"u"&&self.location?.href||""}function rS(){return R_()==="http:"||R_()==="https:"}function R_(){return typeof self<"u"&&self.location?.protocol||null}function oS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rS()||P2()||"connection"in navigator)?navigator.onLine:!0}function lS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,xs(n>e,"Short delay should be less than long delay!"),this.isMobile=O2()||L2()}get(){return oS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Km(s,e){xs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class g1{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hS=new hc(3e4,6e4);function Ds(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ks(s,e,n,a,l={}){return y1(s,l,async()=>{let c={},f={};a&&(e==="GET"?f=a:c={body:JSON.stringify(a)});const m=uc({key:s.config.apiKey,...f}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:g,...c};return j2()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&br(s.emulatorConfig.host)&&(_.credentials="include"),g1.fetch()(await _1(s,s.config.apiHost,n,m),_)})}async function y1(s,e,n){s._canInitEmulator=!1;const a={...cS,...e};try{const l=new dS(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Hu(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Hu(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw Hu(s,"user-disabled",f);const E=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw p1(s,E,_);_i(s,E)}}catch(l){if(l instanceof Cs)throw l;_i(s,"network-request-failed",{message:String(l)})}}async function fc(s,e,n,a,l={}){const c=await ks(s,e,n,a,l);return"mfaPendingCredential"in c&&_i(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function _1(s,e,n,a){const l=`${e}${n}?${a}`,c=s,f=c.config.emulator?Km(s.config,l):`${s.config.apiScheme}://${l}`;return uS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function fS(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(zi(this.auth,"network-request-failed")),hS.get())})}}function Hu(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const l=zi(s,e,a);return l.customData._tokenResponse=n,l}function N_(s){return s!==void 0&&s.enterprise!==void 0}class mS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pS(s,e){return ks(s,"GET","/v2/recaptchaConfig",Ds(s,e))}async function gS(s,e){return ks(s,"POST","/v1/accounts:delete",e)}async function ch(s,e){return ks(s,"POST","/v1/accounts:lookup",e)}function $l(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yS(s,e=!1){const n=bt(s),a=await n.getIdToken(e),l=Ym(a);xe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:a,authTime:$l(em(l.auth_time)),issuedAtTime:$l(em(l.iat)),expirationTime:$l(em(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function em(s){return Number(s)*1e3}function Ym(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const l=i1(n);return l?JSON.parse(l):(Xu("Failed to decode base64 JWT payload"),null)}catch(l){return Xu("Caught error parsing JWT payload as JSON",l?.toString()),null}}function I_(s){const e=Ym(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wl(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Cs&&_S(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function _S({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class vS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ec(s){const e=s.auth,n=await s.getIdToken(),a=await Wl(s,ch(e,{idToken:n}));xe(a?.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?v1(l.providerUserInfo):[],f=ES(s.providerData,c),m=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!f?.length,_=m?g:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,E)}async function bS(s){const e=bt(s);await ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ES(s,e){return[...s.filter(a=>!e.some(l=>l.providerId===a.providerId)),...e]}function v1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function TS(s,e){const n=await y1(s,{},async()=>{const a=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await _1(s,l,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:a};return s.emulatorConfig&&br(s.emulatorConfig.host)&&(g.credentials="include"),g1.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AS(s,e){return ks(s,"POST","/v2/accounts:revokeToken",Ds(s,e))}class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=I_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:l,expiresIn:c}=await TS(e,n);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:l,expirationTime:c}=n,f=new To;return a&&(xe(typeof a=="string","internal-error",{appName:e}),f.refreshToken=a),l&&(xe(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(xe(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Ts("not implemented")}}function pa(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:n,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new vS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _m(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yS(this,e)}reload(){return bS(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await ec(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await Wl(this,gS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:S,emailVerified:x,isAnonymous:P,providerData:$,stsTokenManager:X}=n;xe(S&&X,e,"internal-error");const F=To.fromJSON(this.name,X);xe(typeof S=="string",e,"internal-error"),pa(a,e.name),pa(l,e.name),xe(typeof x=="boolean",e,"internal-error"),xe(typeof P=="boolean",e,"internal-error"),pa(c,e.name),pa(f,e.name),pa(m,e.name),pa(g,e.name),pa(_,e.name),pa(E,e.name);const te=new gi({uid:S,auth:e,email:l,emailVerified:x,displayName:a,isAnonymous:P,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:F,createdAt:_,lastLoginAt:E});return $&&Array.isArray($)&&(te.providerData=$.map(ie=>({...ie}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,n,a=!1){const l=new To;l.updateFromServerResponse(n);const c=new gi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await ec(c),c}static async _fromGetAccountInfoResponse(e,n,a){const l=n.users[0];xe(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?v1(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,m=new To;m.updateFromIdToken(a);const g=new gi({uid:l.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,_),g}}const C_=new Map;function As(s){xs(s instanceof Function,"Expected a class definition");let e=C_.get(s);return e?(xs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,C_.set(s,e),e)}class b1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b1.type="NONE";const D_=b1;function Zu(s,e,n){return`firebase:${s}:${e}:${n}`}class Ao{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=Zu(this.userKey,l.apiKey,c),this.fullPersistenceKey=Zu("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ch(this.auth,{idToken:e}).catch(()=>{});return n?gi._fromGetAccountInfoResponse(this.auth,n,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Ao(As(D_),e,a);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||As(D_);const f=Zu(a,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const E=await _._get(f);if(E){let S;if(typeof E=="string"){const x=await ch(e,{idToken:E}).catch(()=>{});if(!x)break;S=await gi._fromGetAccountInfoResponse(e,x,E)}else S=gi._fromJSON(e,E);_!==c&&(m=S),c=_;break}}catch{}const g=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ao(c,e,a):(c=g[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new Ao(c,e,a))}}function k_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x1(e))return"Blackberry";if(R1(e))return"Webos";if(T1(e))return"Safari";if((e.includes("chrome/")||A1(e))&&!e.includes("edge/"))return"Chrome";if(w1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if(a?.length===2)return a[1]}return"Other"}function E1(s=un()){return/firefox\//i.test(s)}function T1(s=un()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A1(s=un()){return/crios\//i.test(s)}function S1(s=un()){return/iemobile/i.test(s)}function w1(s=un()){return/android/i.test(s)}function x1(s=un()){return/blackberry/i.test(s)}function R1(s=un()){return/webos/i.test(s)}function Xm(s=un()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function SS(s=un()){return Xm(s)&&!!window.navigator?.standalone}function wS(){return U2()&&document.documentMode===10}function N1(s=un()){return Xm(s)||w1(s)||R1(s)||x1(s)||/windows phone/i.test(s)||S1(s)}function I1(s,e=[]){let n;switch(s){case"Browser":n=k_(un());break;case"Worker":n=`${k_(un())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oo}/${a}`}class xS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=c=>new Promise((f,m)=>{try{const g=e(c);f(g)}catch(g){m(g)}});a.onAbort=n,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function RS(s,e={}){return ks(s,"GET","/v2/passwordPolicy",Ds(s,e))}const NS=6;class IS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??NS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class CS{constructor(e,n,a,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new xS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ch(this,{idToken:e}),a=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m?.user&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ec(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Bi(this));const n=e?bt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RS(this),n=new IS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await AS(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ms(s){return bt(s)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=$2(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DS(s){Ih=s}function C1(s){return Ih.loadJS(s)}function kS(){return Ih.recaptchaEnterpriseScript}function MS(){return Ih.gapiScript}function OS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class VS{constructor(){this.enterprise=new jS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PS="recaptcha-enterprise",D1="NO_RECAPTCHA";class LS{constructor(e){this.type=PS,this.auth=Ms(e)}async verify(e="verify",n=!1){async function a(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,m)=>{pS(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new mS(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,f(_.siteKey)}}).catch(g=>{m(g)})})}function l(c,f,m){const g=window.grecaptcha;N_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{f(_)}).catch(()=>{f(D1)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VS().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{a(this.auth).then(m=>{if(!n&&N_(window.grecaptcha))l(m,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=kS();g.length!==0&&(g+=m),C1(g).then(()=>{l(m,c,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function O_(s,e,n,a=!1,l=!1){const c=new LS(s);let f;if(l)f=D1;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function uh(s,e,n,a,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await O_(s,e,n,n==="getOobCode");return a(s,c)}else return a(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await O_(s,e,n,n==="getOobCode");return a(s,f)}else return Promise.reject(c)})}function US(s,e){const n=Nh(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(mr(c,e??{}))return l;_i(l,"already-initialized")}return n.initialize({options:e})}function zS(s,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(As);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function BS(s,e,n){const a=Ms(s);xe(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const l=!1,c=k1(e),{host:f,port:m}=qS(e),g=m===null?"":`:${m}`,_={url:`${c}//${f}${g}/`},E=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){xe(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),xe(mr(_,a.config.emulator)&&mr(E,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=_,a.emulatorConfig=E,a.settings.appVerificationDisabledForTesting=!0,br(f)?(qm(`${c}//${f}${g}`),Hm("Auth",!0)):HS()}function k1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function qS(s){const e=k1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:V_(a.substr(c.length+1))}}else{const[c,f]=a.split(":");return{host:c,port:V_(f)}}}function V_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function HS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function FS(s,e){return ks(s,"POST","/v1/accounts:signUp",e)}async function GS(s,e){return fc(s,"POST","/v1/accounts:signInWithPassword",Ds(s,e))}async function QS(s,e){return ks(s,"POST","/v1/accounts:sendOobCode",Ds(s,e))}async function $S(s,e){return QS(s,e)}async function KS(s,e){return fc(s,"POST","/v1/accounts:signInWithEmailLink",Ds(s,e))}async function YS(s,e){return fc(s,"POST","/v1/accounts:signInWithEmailLink",Ds(s,e))}class tc extends Zm{constructor(e,n,a,l=null){super("password",a),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new tc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new tc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uh(e,n,"signInWithPassword",GS);case"emailLink":return KS(e,{email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uh(e,a,"signUpPassword",FS);case"emailLink":return YS(e,{idToken:n,email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function So(s,e){return fc(s,"POST","/v1/accounts:signInWithIdp",Ds(s,e))}const XS="http://localhost";class gr extends Zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_i("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l,...c}=n;if(!a||!l)return null;const f=new gr(a,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,So(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:XS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uc(n)}return e}}function ZS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JS(s){const e=zl(Bl(s)).link,n=e?zl(Bl(e)).deep_link_id:null,a=zl(Bl(s)).deep_link_id;return(a?zl(Bl(a)).link:null)||a||n||e||s}class Jm{constructor(e){const n=zl(Bl(e)),a=n.apiKey??null,l=n.oobCode??null,c=ZS(n.mode??null);xe(a&&l&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JS(e);try{return new Jm(n)}catch{return null}}}class Er{constructor(){this.providerId=Er.PROVIDER_ID}static credential(e,n){return tc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Jm.parseLink(n);return xe(a,"argument-error"),tc._fromEmailAndCode(e,a.code,a.tenantId)}}Er.PROVIDER_ID="password";Er.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Er.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class M1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dc extends M1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ga extends dc{constructor(){super("facebook.com")}static credential(e){return gr._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ga.credential(e.oauthAccessToken)}catch{return null}}}ga.FACEBOOK_SIGN_IN_METHOD="facebook.com";ga.PROVIDER_ID="facebook.com";class ya extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gr._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return ya.credential(n,a)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";class _a extends dc{constructor(){super("github.com")}static credential(e){return gr._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com";_a.PROVIDER_ID="github.com";class va extends dc{constructor(){super("twitter.com")}static credential(e,n){return gr._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return va.credential(n,a)}catch{return null}}}va.TWITTER_SIGN_IN_METHOD="twitter.com";va.PROVIDER_ID="twitter.com";async function O1(s,e){return fc(s,"POST","/v1/accounts:signUp",Ds(s,e))}class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,l=!1){const c=await gi._fromIdTokenResponse(e,a,l),f=j_(a);return new Rs({user:c,providerId:f,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const l=j_(a);return new Rs({user:e,providerId:l,_tokenResponse:a,operationType:n})}}function j_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function WS(s){if(wn(s.app))return Promise.reject(Bi(s));const e=Ms(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Rs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await O1(e,{returnSecureToken:!0}),a=await Rs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(a.user),a}class hh extends Cs{constructor(e,n,a,l){super(n.code,n.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,l){return new hh(e,n,a,l)}}function V1(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(s,c,e,a):c})}function ew(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}async function j1(s,e,n=!1){const a=await Wl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Rs._forOperation(s,"link",a)}async function tw(s,e,n){await ec(e);const a=ew(e.providerData);xe(a.has(n)===s,e.auth,"provider-already-linked")}async function nw(s,e,n=!1){const{auth:a}=s;if(wn(a.app))return Promise.reject(Bi(a));const l="reauthenticate";try{const c=await Wl(s,V1(a,l,e,s),n);xe(c.idToken,a,"internal-error");const f=Ym(c.idToken);xe(f,a,"internal-error");const{sub:m}=f;return xe(s.uid===m,a,"user-mismatch"),Rs._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&_i(a,"user-mismatch"),c}}async function P1(s,e,n=!1){if(wn(s.app))return Promise.reject(Bi(s));const a="signIn",l=await V1(s,a,e),c=await Rs._fromIdTokenResponse(s,a,l);return n||await s._updateCurrentUser(c.user),c}async function iw(s,e){return P1(Ms(s),e)}async function sw(s,e){const n=bt(s);return await tw(!1,n,e.providerId),j1(n,e)}async function L1(s){const e=Ms(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aw(s,e,n){const a=Ms(s);await uh(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$S)}async function rw(s,e,n){if(wn(s.app))return Promise.reject(Bi(s));const a=Ms(s),f=await uh(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O1).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&L1(s),g}),m=await Rs._fromIdTokenResponse(a,"signIn",f);return await a._updateCurrentUser(m.user),m}function ow(s,e,n){return wn(s.app)?Promise.reject(Bi(s)):iw(bt(s),Er.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&L1(s),a})}function lw(s,e,n,a){return bt(s).onIdTokenChanged(e,n,a)}function cw(s,e,n){return bt(s).beforeAuthStateChanged(e,n)}function uw(s,e,n,a){return bt(s).onAuthStateChanged(e,n,a)}function hw(s){return bt(s).signOut()}const fh="__sak";class U1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fw=1e3,dw=10;class z1 extends U1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),l=this.localCache[n];a!==l&&e(n,l,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(a);!n&&this.localCache[a]===f||this.notifyListeners(a,f)},c=this.storage.getItem(a);wS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,dw):l()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},fw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z1.type="LOCAL";const mw=z1;class B1 extends U1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}B1.type="SESSION";const q1=B1;function pw(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const a=new Ch(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const m=Array.from(f).map(async _=>_(n.origin,c)),g=await pw(m);n.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];function Wm(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}class gw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((m,g)=>{const _=Wm("",20);l.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},a);f={messageChannel:l,onMessage(S){const x=S;if(x.data.eventId===_)switch(x.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(x.data.response);break;default:clearTimeout(E),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function qi(){return window}function yw(s){qi().location.href=s}function H1(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function _w(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vw(){return navigator?.serviceWorker?.controller||null}function bw(){return H1()?self:null}const F1="firebaseLocalStorageDb",Ew=1,dh="firebaseLocalStorage",G1="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dh(s,e){return s.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function Tw(){const s=indexedDB.deleteDatabase(F1);return new mc(s).toPromise()}function vm(){const s=indexedDB.open(F1,Ew);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(dh,{keyPath:G1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(dh)?e(a):(a.close(),await Tw(),e(await vm()))})})}async function P_(s,e,n){const a=Dh(s,!0).put({[G1]:e,value:n});return new mc(a).toPromise()}async function Aw(s,e){const n=Dh(s,!1).get(e),a=await new mc(n).toPromise();return a===void 0?null:a.value}function L_(s,e){const n=Dh(s,!0).delete(e);return new mc(n).toPromise()}const Sw=800,ww=3;class Q1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>ww)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return H1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(bw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _w(),!this.activeServiceWorker)return;this.sender=new gw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await P_(e,fh,"1"),await L_(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>P_(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>Aw(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Dh(l,!1).getAll();return new mc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Sw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q1.type="LOCAL";const xw=Q1;new hc(3e4,6e4);function Rw(s,e){return e?As(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class ep extends Zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Nw(s){return P1(s.auth,new ep(s),s.bypassAuthState)}function Iw(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),nw(n,new ep(s),s.bypassAuthState)}async function Cw(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),j1(n,new ep(s),s.bypassAuthState)}class $1{constructor(e,n,a,l,c=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:l,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nw;case"linkViaPopup":case"linkViaRedirect":return Cw;case"reauthViaPopup":case"reauthViaRedirect":return Iw;default:_i(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dw=new hc(2e3,1e4);class Eo extends $1{constructor(e,n,a,l,c){super(e,n,l,c),this.provider=a,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Dw.get())};e()}}Eo.currentPopupAction=null;const kw="pendingRedirect",Ju=new Map;class Mw extends $1{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const a=await Ow(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ow(s,e){const n=Pw(e),a=jw(s);if(!await a._isAvailable())return!1;const l=await a._get(n)==="true";return await a._remove(n),l}function Vw(s,e){Ju.set(s._key(),e)}function jw(s){return As(s._redirectPersistence)}function Pw(s){return Zu(kw,s.config.apiKey,s.name)}async function Lw(s,e,n=!1){if(wn(s.app))return Promise.reject(Bi(s));const a=Ms(s),l=Rw(a,e),f=await new Mw(a,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await a._persistUserIfCurrent(f.user),await a._setRedirectUser(null,e)),f}const Uw=600*1e3;class zw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!K1(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(zi(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uw&&this.cachedEventUids.clear(),this.cachedEventUids.has(U_(e))}saveEventToCache(e){this.cachedEventUids.add(U_(e)),this.lastProcessedEventTime=Date.now()}}function U_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function K1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Bw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K1(s);default:return!1}}async function qw(s,e={}){return ks(s,"GET","/v1/projects",e)}const Hw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fw=/^https?/;async function Gw(s){if(s.config.emulator)return;const{authorizedDomains:e}=await qw(s);for(const n of e)try{if(Qw(n))return}catch{}_i(s,"unauthorized-domain")}function Qw(s){const e=ym(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===a}if(!Fw.test(n))return!1;if(Hw.test(s))return a===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}const $w=new hc(3e4,6e4);function z_(){const s=qi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Kw(s){return new Promise((e,n)=>{function a(){z_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z_(),n(zi(s,"network-request-failed"))},timeout:$w.get()})}if(qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qi().gapi?.load)a();else{const l=OS("iframefcb");return qi()[l]=()=>{gapi.load?a():n(zi(s,"network-request-failed"))},C1(`${MS()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function Yw(s){return Wu=Wu||Kw(s),Wu}const Xw=new hc(5e3,15e3),Zw="__/auth/iframe",Jw="emulator/auth/iframe",Ww={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ex=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tx(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Km(e,Jw):`https://${s.config.authDomain}/${Zw}`,a={apiKey:e.apiKey,appName:s.name,v:Oo},l=ex.get(s.config.apiHost);l&&(a.eid=l);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${n}?${uc(a).slice(1)}`}async function nx(s){const e=await Yw(s),n=qi().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:tx(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ww,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const f=zi(s,"network-request-failed"),m=qi().setTimeout(()=>{c(f)},Xw.get());function g(){qi().clearTimeout(m),l(a)}a.ping(g).then(g,()=>{c(f)})}))}const ix={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sx=500,ax=600,rx="_blank",ox="http://localhost";class B_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lx(s,e,n,a=sx,l=ax){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const g={...ix,width:a.toString(),height:l.toString(),top:c,left:f},_=un().toLowerCase();n&&(m=A1(_)?rx:n),E1(_)&&(e=e||ox,g.scrollbars="yes");const E=Object.entries(g).reduce((x,[P,$])=>`${x}${P}=${$},`,"");if(SS(_)&&m!=="_self")return cx(e||"",m),new B_(null);const S=window.open(e||"",m,E);xe(S,s,"popup-blocked");try{S.focus()}catch{}return new B_(S)}function cx(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const ux="__/auth/handler",hx="emulator/auth/handler",fx=encodeURIComponent("fac");async function q_(s,e,n,a,l,c){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:Oo,eventId:l};if(e instanceof M1){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",Q2(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))f[E]=S}if(e instanceof dc){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(f.scopes=E.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),_=g?`#${fx}=${encodeURIComponent(g)}`:"";return`${dx(s)}?${uc(m).slice(1)}${_}`}function dx({config:s}){return s.emulator?Km(s,hx):`https://${s.authDomain}/${ux}`}const tm="webStorageSupport";class mx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q1,this._completeRedirectFn=Lw,this._overrideRedirectResult=Vw}async _openPopup(e,n,a,l){xs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await q_(e,n,a,ym(),l);return lx(e,c,Wm())}async _openRedirect(e,n,a,l){await this._originValidation(e);const c=await q_(e,n,a,ym(),l);return yw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(xs(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await nx(e),a=new zw(e);return n.register("authEvent",l=>(xe(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},l=>{const c=l?.[0]?.[tm];c!==void 0&&n(!!c),_i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Gw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return N1()||T1()||Xm()}}const px=mx;var H_="@firebase/auth",F_="1.12.0";class gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _x(s){pr(new xa("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=a.options;xe(f&&!f.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I1(s)},_=new CS(a,l,c,g);return zS(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),pr(new xa("auth-internal",e=>{const n=Ms(e.getProvider("auth").getImmediate());return(a=>new gx(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(H_,F_,yx(s)),Ui(H_,F_,"esm2020")}const vx=300,bx=o1("authIdTokenMaxAge")||vx;let G_=null;const Ex=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>bx)return;const l=n?.token;G_!==l&&(G_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Tx(s=Qm()){const e=Nh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=US(s,{popupRedirectResolver:px,persistence:[xw,mw,q1]}),a=o1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const f=Ex(c.toString());cw(n,f,()=>f(n.currentUser)),lw(n,m=>f(m))}}const l=s1("auth");return l&&BS(n,`http://${l}`),n}function Ax(){return document.getElementsByTagName("head")?.[0]??document}DS({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=l=>{const c=zi("internal-error");c.customData=l,n(c)},a.type="text/javascript",a.charset="UTF-8",Ax().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_x("Browser");var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sa,Y1;(function(){var s;function e(I,w){function R(){}R.prototype=w.prototype,I.F=w.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(M,D,V){for(var N=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)N[Re-2]=arguments[Re];return w.prototype[D].apply(M,N)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,w,R){R||(R=0);const M=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)M[D]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(D=0;D<16;++D)M[D]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=I.g[0],R=I.g[1],D=I.g[2];let V=I.g[3],N;N=w+(V^R&(D^V))+M[0]+3614090360&4294967295,w=R+(N<<7&4294967295|N>>>25),N=V+(D^w&(R^D))+M[1]+3905402710&4294967295,V=w+(N<<12&4294967295|N>>>20),N=D+(R^V&(w^R))+M[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(w^D&(V^w))+M[3]+3250441966&4294967295,R=D+(N<<22&4294967295|N>>>10),N=w+(V^R&(D^V))+M[4]+4118548399&4294967295,w=R+(N<<7&4294967295|N>>>25),N=V+(D^w&(R^D))+M[5]+1200080426&4294967295,V=w+(N<<12&4294967295|N>>>20),N=D+(R^V&(w^R))+M[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(w^D&(V^w))+M[7]+4249261313&4294967295,R=D+(N<<22&4294967295|N>>>10),N=w+(V^R&(D^V))+M[8]+1770035416&4294967295,w=R+(N<<7&4294967295|N>>>25),N=V+(D^w&(R^D))+M[9]+2336552879&4294967295,V=w+(N<<12&4294967295|N>>>20),N=D+(R^V&(w^R))+M[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(w^D&(V^w))+M[11]+2304563134&4294967295,R=D+(N<<22&4294967295|N>>>10),N=w+(V^R&(D^V))+M[12]+1804603682&4294967295,w=R+(N<<7&4294967295|N>>>25),N=V+(D^w&(R^D))+M[13]+4254626195&4294967295,V=w+(N<<12&4294967295|N>>>20),N=D+(R^V&(w^R))+M[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(w^D&(V^w))+M[15]+1236535329&4294967295,R=D+(N<<22&4294967295|N>>>10),N=w+(D^V&(R^D))+M[1]+4129170786&4294967295,w=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(w^R))+M[6]+3225465664&4294967295,V=w+(N<<9&4294967295|N>>>23),N=D+(w^R&(V^w))+M[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^w&(D^V))+M[0]+3921069994&4294967295,R=D+(N<<20&4294967295|N>>>12),N=w+(D^V&(R^D))+M[5]+3593408605&4294967295,w=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(w^R))+M[10]+38016083&4294967295,V=w+(N<<9&4294967295|N>>>23),N=D+(w^R&(V^w))+M[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^w&(D^V))+M[4]+3889429448&4294967295,R=D+(N<<20&4294967295|N>>>12),N=w+(D^V&(R^D))+M[9]+568446438&4294967295,w=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(w^R))+M[14]+3275163606&4294967295,V=w+(N<<9&4294967295|N>>>23),N=D+(w^R&(V^w))+M[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^w&(D^V))+M[8]+1163531501&4294967295,R=D+(N<<20&4294967295|N>>>12),N=w+(D^V&(R^D))+M[13]+2850285829&4294967295,w=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(w^R))+M[2]+4243563512&4294967295,V=w+(N<<9&4294967295|N>>>23),N=D+(w^R&(V^w))+M[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^w&(D^V))+M[12]+2368359562&4294967295,R=D+(N<<20&4294967295|N>>>12),N=w+(R^D^V)+M[5]+4294588738&4294967295,w=R+(N<<4&4294967295|N>>>28),N=V+(w^R^D)+M[8]+2272392833&4294967295,V=w+(N<<11&4294967295|N>>>21),N=D+(V^w^R)+M[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^w)+M[14]+4259657740&4294967295,R=D+(N<<23&4294967295|N>>>9),N=w+(R^D^V)+M[1]+2763975236&4294967295,w=R+(N<<4&4294967295|N>>>28),N=V+(w^R^D)+M[4]+1272893353&4294967295,V=w+(N<<11&4294967295|N>>>21),N=D+(V^w^R)+M[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^w)+M[10]+3200236656&4294967295,R=D+(N<<23&4294967295|N>>>9),N=w+(R^D^V)+M[13]+681279174&4294967295,w=R+(N<<4&4294967295|N>>>28),N=V+(w^R^D)+M[0]+3936430074&4294967295,V=w+(N<<11&4294967295|N>>>21),N=D+(V^w^R)+M[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^w)+M[6]+76029189&4294967295,R=D+(N<<23&4294967295|N>>>9),N=w+(R^D^V)+M[9]+3654602809&4294967295,w=R+(N<<4&4294967295|N>>>28),N=V+(w^R^D)+M[12]+3873151461&4294967295,V=w+(N<<11&4294967295|N>>>21),N=D+(V^w^R)+M[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^w)+M[2]+3299628645&4294967295,R=D+(N<<23&4294967295|N>>>9),N=w+(D^(R|~V))+M[0]+4096336452&4294967295,w=R+(N<<6&4294967295|N>>>26),N=V+(R^(w|~D))+M[7]+1126891415&4294967295,V=w+(N<<10&4294967295|N>>>22),N=D+(w^(V|~R))+M[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~w))+M[5]+4237533241&4294967295,R=D+(N<<21&4294967295|N>>>11),N=w+(D^(R|~V))+M[12]+1700485571&4294967295,w=R+(N<<6&4294967295|N>>>26),N=V+(R^(w|~D))+M[3]+2399980690&4294967295,V=w+(N<<10&4294967295|N>>>22),N=D+(w^(V|~R))+M[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~w))+M[1]+2240044497&4294967295,R=D+(N<<21&4294967295|N>>>11),N=w+(D^(R|~V))+M[8]+1873313359&4294967295,w=R+(N<<6&4294967295|N>>>26),N=V+(R^(w|~D))+M[15]+4264355552&4294967295,V=w+(N<<10&4294967295|N>>>22),N=D+(w^(V|~R))+M[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~w))+M[13]+1309151649&4294967295,R=D+(N<<21&4294967295|N>>>11),N=w+(D^(R|~V))+M[4]+4149444226&4294967295,w=R+(N<<6&4294967295|N>>>26),N=V+(R^(w|~D))+M[11]+3174756917&4294967295,V=w+(N<<10&4294967295|N>>>22),N=D+(w^(V|~R))+M[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~w))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+V&4294967295}a.prototype.v=function(I,w){w===void 0&&(w=I.length);const R=w-this.blockSize,M=this.C;let D=this.h,V=0;for(;V<w;){if(D==0)for(;V<=R;)l(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<w;)if(M[D++]=I.charCodeAt(V++),D==this.blockSize){l(this,M),D=0;break}}else for(;V<w;)if(M[D++]=I[V++],D==this.blockSize){l(this,M),D=0;break}}this.h=D,this.o+=w},a.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)I[w++]=this.g[R]>>>M&255;return I};function c(I,w){var R=m;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=w(I)}function f(I,w){this.h=w;const R=[];let M=!0;for(let D=I.length-1;D>=0;D--){const V=I[D]|0;M&&V==w||(R[D]=V,M=!1)}this.g=R}var m={};function g(I){return-128<=I&&I<128?c(I,function(w){return new f([w|0],w<0?-1:0)}):new f([I|0],I<0?-1:0)}function _(I){if(isNaN(I)||!isFinite(I))return S;if(I<0)return F(_(-I));const w=[];let R=1;for(let M=0;I>=R;M++)w[M]=I/R|0,R*=4294967296;return new f(w,0)}function E(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return F(E(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=_(Math.pow(w,8));let M=S;for(let V=0;V<I.length;V+=8){var D=Math.min(8,I.length-V);const N=parseInt(I.substring(V,V+D),w);D<8?(D=_(Math.pow(w,D)),M=M.j(D).add(_(N))):(M=M.j(R),M=M.add(_(N)))}return M}var S=g(0),x=g(1),P=g(16777216);s=f.prototype,s.m=function(){if(X(this))return-F(this).m();let I=0,w=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);I+=(M>=0?M:4294967296+M)*w,w*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if($(this))return"0";if(X(this))return"-"+F(this).toString(I);const w=_(Math.pow(I,6));var R=this;let M="";for(;;){const D=ye(R,w).g;R=te(R,D.j(w));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=D,$(R))return V+M;for(;V.length<6;)V="0"+V;M=V+M}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function $(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function X(I){return I.h==-1}s.l=function(I){return I=te(this,I),X(I)?-1:$(I)?0:1};function F(I){const w=I.g.length,R=[];for(let M=0;M<w;M++)R[M]=~I.g[M];return new f(R,~I.h).add(x)}s.abs=function(){return X(this)?F(this):this},s.add=function(I){const w=Math.max(this.g.length,I.g.length),R=[];let M=0;for(let D=0;D<=w;D++){let V=M+(this.i(D)&65535)+(I.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);M=N>>>16,V&=65535,N&=65535,R[D]=N<<16|V}return new f(R,R[R.length-1]&-2147483648?-1:0)};function te(I,w){return I.add(F(w))}s.j=function(I){if($(this)||$(I))return S;if(X(this))return X(I)?F(this).j(F(I)):F(F(this).j(I));if(X(I))return F(this.j(F(I)));if(this.l(P)<0&&I.l(P)<0)return _(this.m()*I.m());const w=this.g.length+I.g.length,R=[];for(var M=0;M<2*w;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<I.g.length;D++){const V=this.i(M)>>>16,N=this.i(M)&65535,Re=I.i(D)>>>16,Qe=I.i(D)&65535;R[2*M+2*D]+=N*Qe,ie(R,2*M+2*D),R[2*M+2*D+1]+=V*Qe,ie(R,2*M+2*D+1),R[2*M+2*D+1]+=N*Re,ie(R,2*M+2*D+1),R[2*M+2*D+2]+=V*Re,ie(R,2*M+2*D+2)}for(I=0;I<w;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=w;I<2*w;I++)R[I]=0;return new f(R,0)};function ie(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function ae(I,w){this.g=I,this.h=w}function ye(I,w){if($(w))throw Error("division by zero");if($(I))return new ae(S,S);if(X(I))return w=ye(F(I),w),new ae(F(w.g),F(w.h));if(X(w))return w=ye(I,F(w)),new ae(F(w.g),w.h);if(I.g.length>30){if(X(I)||X(w))throw Error("slowDivide_ only works with positive integers.");for(var R=x,M=w;M.l(I)<=0;)R=ve(R),M=ve(M);var D=be(R,1),V=be(M,1);for(M=be(M,2),R=be(R,2);!$(M);){var N=V.add(M);N.l(I)<=0&&(D=D.add(R),V=N),M=be(M,1),R=be(R,1)}return w=te(I,D.j(w)),new ae(D,w)}for(D=S;I.l(w)>=0;){for(R=Math.max(1,Math.floor(I.m()/w.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),V=_(R),N=V.j(w);X(N)||N.l(I)>0;)R-=M,V=_(R),N=V.j(w);$(V)&&(V=x),D=D.add(V),I=te(I,N)}return new ae(D,I)}s.B=function(I){return ye(this,I).h},s.and=function(I){const w=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<w;M++)R[M]=this.i(M)&I.i(M);return new f(R,this.h&I.h)},s.or=function(I){const w=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<w;M++)R[M]=this.i(M)|I.i(M);return new f(R,this.h|I.h)},s.xor=function(I){const w=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<w;M++)R[M]=this.i(M)^I.i(M);return new f(R,this.h^I.h)};function ve(I){const w=I.g.length+1,R=[];for(let M=0;M<w;M++)R[M]=I.i(M)<<1|I.i(M-1)>>>31;return new f(R,I.h)}function be(I,w){const R=w>>5;w%=32;const M=I.g.length-R,D=[];for(let V=0;V<M;V++)D[V]=w>0?I.i(V+R)>>>w|I.i(V+R+1)<<32-w:I.i(V+R);return new f(D,I.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Y1=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=E,Sa=f}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var X1,ql,Z1,eh,bm,J1,W1,eb;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fu=="object"&&Fu];for(var p=0;p<u.length;++p){var b=u[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=n(this);function l(u,p){if(p)e:{var b=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in b))break e;b=b[L]}u=u[u.length-1],A=b[u],p=p(A),p!=A&&p!=null&&e(b,u,{configurable:!0,writable:!0,value:p})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(p){var b=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&b.push([A,p[A]]);return b}});var c=c||{},f=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,b){return u.call.apply(u.bind,arguments)}function _(u,p,b){return _=g,_.apply(null,arguments)}function E(u,p){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function S(u,p){function b(){}b.prototype=p.prototype,u.Z=p.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(A,L,q){for(var le=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)le[Oe-2]=arguments[Oe];return p.prototype[L].apply(A,le)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const p=u.length;if(p>0){const b=Array(p);for(let A=0;A<p;A++)b[A]=u[A];return b}return[]}function $(u,p){for(let A=1;A<arguments.length;A++){const L=arguments[A];var b=typeof L;if(b=b!="object"?b:L?Array.isArray(L)?"array":b:"null",b=="array"||b=="object"&&typeof L.length=="number"){b=u.length||0;const q=L.length||0;u.length=b+q;for(let le=0;le<q;le++)u[b+le]=L[le]}else u.push(L)}}class X{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function F(u){f.setTimeout(()=>{throw u},0)}function te(){var u=I;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ie{constructor(){this.h=this.g=null}add(p,b){const A=ae.get();A.set(p,b),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new X(()=>new ye,u=>u.reset());class ye{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,be=!1,I=new ie,w=()=>{const u=Promise.resolve(void 0);ve=()=>{u.then(R)}};function R(){for(var u;u=te();){try{u.h.call(u.g)}catch(b){F(b)}var p=ae;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}be=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,p),f.removeEventListener("test",b,p)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function Re(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}S(Re,D),Re.prototype.init=function(u,p){const b=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(b=="mouseover"?p=u.fromElement:b=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),G=0;function re(u,p,b,A,L){this.listener=u,this.proxy=null,this.src=p,this.type=b,this.capture=!!A,this.ha=L,this.key=++G,this.da=this.fa=!1}function ce(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Me(u,p,b){for(const A in u)p.call(b,u[A],A,u)}function Pe(u,p){for(const b in u)p.call(void 0,u[b],b,u)}function k(u){const p={};for(const b in u)p[b]=u[b];return p}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(u,p){let b,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(b in A)u[b]=A[b];for(let q=0;q<K.length;q++)b=K[q],Object.prototype.hasOwnProperty.call(A,b)&&(u[b]=A[b])}}function ne(u){this.src=u,this.g={},this.h=0}ne.prototype.add=function(u,p,b,A,L){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const le=Se(u,p,A,L);return le>-1?(p=u[le],b||(p.fa=!1)):(p=new re(p,this.src,q,!!A,L),p.fa=b,u.push(p)),p};function me(u,p){const b=p.type;if(b in u.g){var A=u.g[b],L=Array.prototype.indexOf.call(A,p,void 0),q;(q=L>=0)&&Array.prototype.splice.call(A,L,1),q&&(ce(p),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Se(u,p,b,A){for(let L=0;L<u.length;++L){const q=u[L];if(!q.da&&q.listener==p&&q.capture==!!b&&q.ha==A)return L}return-1}var se="closure_lm_"+(Math.random()*1e6|0),pe={};function Ee(u,p,b,A,L){if(Array.isArray(p)){for(let q=0;q<p.length;q++)Ee(u,p[q],b,A,L);return null}return b=Yi(b),u&&u[Qe]?u.J(p,b,m(A)?!!A.capture:!1,L):ut(u,p,b,!1,A,L)}function ut(u,p,b,A,L,q){if(!p)throw Error("Invalid event type");const le=m(L)?!!L.capture:!!L;let Oe=hn(u);if(Oe||(u[se]=Oe=new ne(u)),b=Oe.add(p,b,A,le,q),b.proxy)return b;if(A=Bt(),b.proxy=A,A.src=u,A.listener=b,u.addEventListener)V||(L=le),L===void 0&&(L=!1),u.addEventListener(p.toString(),A,L);else if(u.attachEvent)u.attachEvent(pn(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Bt(){function u(b){return p.call(u.src,u.listener,b)}const p=Un;return u}function mn(u,p,b,A,L){if(Array.isArray(p))for(var q=0;q<p.length;q++)mn(u,p[q],b,A,L);else A=m(A)?!!A.capture:!!A,b=Yi(b),u&&u[Qe]?(u=u.i,q=String(p).toString(),q in u.g&&(p=u.g[q],b=Se(p,b,A,L),b>-1&&(ce(p[b]),Array.prototype.splice.call(p,b,1),p.length==0&&(delete u.g[q],u.h--)))):u&&(u=hn(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Se(p,b,A,L)),(b=u>-1?p[u]:null)&&Gt(b))}function Gt(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Qe])me(p.i,u);else{var b=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(b,A,u.capture):p.detachEvent?p.detachEvent(pn(b),A):p.addListener&&p.removeListener&&p.removeListener(A),(b=hn(p))?(me(b,u),b.h==0&&(b.src=null,p[se]=null)):ce(u)}}}function pn(u){return u in pe?pe[u]:pe[u]="on"+u}function Un(u,p){if(u.da)u=!0;else{p=new Re(p,this);const b=u.listener,A=u.ha||u.src;u.fa&&Gt(u),u=b.call(A,p)}return u}function hn(u){return u=u[se],u instanceof ne?u:null}var ri="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yi(u){return typeof u=="function"?u:(u[ri]||(u[ri]=function(p){return u.handleEvent(p)}),u[ri])}function ft(){M.call(this),this.i=new ne(this),this.M=this,this.G=null}S(ft,M),ft.prototype[Qe]=!0,ft.prototype.removeEventListener=function(u,p,b,A){mn(this,u,p,b,A)};function gt(u,p){var b,A=u.G;if(A)for(b=[];A;A=A.G)b.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var L=p;p=new D(A,u),oe(p,L)}L=!0;let q,le;if(b)for(le=b.length-1;le>=0;le--)q=p.g=b[le],L=Tt(q,A,!0,p)&&L;if(q=p.g=u,L=Tt(q,A,!0,p)&&L,L=Tt(q,A,!1,p)&&L,b)for(le=0;le<b.length;le++)q=p.g=b[le],L=Tt(q,A,!1,p)&&L}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const b=u.g[p];for(let A=0;A<b.length;A++)ce(b[A]);delete u.g[p],u.h--}}this.G=null},ft.prototype.J=function(u,p,b,A){return this.i.add(String(u),p,!1,b,A)},ft.prototype.K=function(u,p,b,A){return this.i.add(String(u),p,!0,b,A)};function Tt(u,p,b,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let q=0;q<p.length;++q){const le=p[q];if(le&&!le.da&&le.capture==b){const Oe=le.listener,xt=le.ha||le.src;le.fa&&me(u.i,le),L=Oe.call(xt,A)!==!1&&L}}return L&&!A.defaultPrevented}function Os(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(u,p||0)}function zn(u){u.g=Os(()=>{u.g=null,u.i&&(u.i=!1,zn(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class qt extends M{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:zn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(u){M.call(this),this.h=u,this.g={}}S(Rn,M);var Va=[];function ja(u){Me(u.g,function(p,b){this.g.hasOwnProperty(b)&&Gt(p)},u),u.g={}}Rn.prototype.N=function(){Rn.Z.N.call(this),ja(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=f.JSON.stringify,Uo=f.JSON.parse,Pa=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function wr(){}function xr(){}var sn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){D.call(this,"d")}S(Dt,D);function gn(){D.call(this,"c")}S(gn,D);var yt={},Rr=null;function Vs(){return Rr=Rr||new ft}yt.Ia="serverreachability";function Nr(u){D.call(this,yt.Ia,u)}S(Nr,D);function Bn(u){const p=Vs();gt(p,new Nr(p))}yt.STAT_EVENT="statevent";function Xi(u,p){D.call(this,yt.STAT_EVENT,u),this.stat=p}S(Xi,D);function At(u){const p=Vs();gt(p,new Xi(p,u))}yt.Ja="timingevent";function qn(u,p){D.call(this,yt.Ja,u),this.size=p}S(qn,D);function Hn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Nn(){this.g=!0}Nn.prototype.ua=function(){this.g=!1};function js(u,p,b,A,L,q){u.info(function(){if(u.g)if(q){var le="",Oe=q.split("&");for(let Ze=0;Ze<Oe.length;Ze++){var xt=Oe[Ze].split("=");if(xt.length>1){const _t=xt[0];xt=xt[1];const Yn=_t.split("_");le=Yn.length>=2&&Yn[1]=="type"?le+(_t+"="+xt+"&"):le+(_t+"=redacted&")}}}else le=null;else le=q;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+p+`
`+b+`
`+le})}function Ir(u,p,b,A,L,q,le){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+p+`
`+b+`
`+q+" "+le})}function Fn(u,p,b,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+zo(u,b)+(A?" "+A:"")})}function Zi(u,p){u.info(function(){return"TIMEOUT: "+p})}Nn.prototype.info=function(){};function zo(u,p){if(!u.g)return p;if(!p)return null;try{const q=JSON.parse(p);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var b=q[u];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return bi(q)}catch{return p}}var Ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},La={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ua;function Wi(){}S(Wi,wr),Wi.prototype.g=function(){return new XMLHttpRequest},Ua=new Wi;function oi(u){return encodeURIComponent(String(u))}function Cr(u){var p=1;u=u.split(":");const b=[];for(;p>0&&u.length;)b.push(u.shift()),p--;return u.length&&b.push(u.join(":")),b}function Ie(u,p,b,A){this.j=u,this.i=p,this.l=b,this.S=A||1,this.V=new Rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new et}function et(){this.i=null,this.g="",this.h=!1}var tt={},Ke={};function an(u,p,b){u.M=1,u.A=za(Mt(p)),u.u=b,u.R=!0,Gn(u,null)}function Gn(u,p){u.F=Date.now(),Ei(u),u.B=Mt(u.A);var b=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Or(b.i,"t",A),u.C=0,b=u.j.L,u.h=new et,u.g=jc(u.j,b?p:null,!u.u),u.P>0&&(u.O=new qt(_(u.Y,u,u.g),u.P)),p=u.V,b=u.g,A=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Va[0]=L.toString()),L=Va);for(let q=0;q<L.length;q++){const le=Ee(b,L[q],A||p.handleEvent,!1,p.h||p);if(!le)break;p.g[le.key]=le}p=u.J?k(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Bn(),js(u.i,u.v,u.B,u.l,u.S,u.u)}Ie.prototype.ba=function(u){u=u.target;const p=this.O;p&&ui(u)==3?p.j():this.Y(u)},Ie.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=ui(this.g),xt=this.g.ya(),Ze=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Oe!=4||xt==7||(xt==8||Ze<=0?Bn(3):Bn(2)),Ti(this);var p=this.g.ca();this.X=p;var b=es(this);if(this.o=p==200,Ir(this.i,this.v,this.B,this.l,this.S,Oe,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var q=A;break t}}q=null}if(u=q)Fn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ai(this,u);else{this.o=!1,this.m=3,At(12),In(this),Qn(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<b.length;)if(_t=Ac(this,b),_t==Ke){Oe==4&&(this.m=4,At(14),u=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==tt){this.m=4,At(15),Fn(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Fn(this.i,this.l,_t,null),Ai(this,_t);if(Ps(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||b.length!=0||this.h.h||(this.m=1,At(16),u=!1),this.o=this.o&&u,!u)Fn(this.i,this.l,b,"[Invalid Chunked Response]"),In(this),Qn(this);else if(b.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),tl(le),le.P=!0,At(11))}}else Fn(this.i,this.l,b,null),Ai(this,b);Oe==4&&In(this),this.o&&!this.K&&(Oe==4?kc(this.j,this):(this.o=!1,Ei(this)))}else ns(this.g),p==400&&b.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),In(this),Qn(this)}}}catch{}};function es(u){if(!Ps(u))return u.g.la();const p=Yt(u.g);if(p==="")return"";let b="";const A=p.length,L=ui(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return In(u),Qn(u),"";u.h.i=new f.TextDecoder}for(let q=0;q<A;q++)u.h.h=!0,b+=u.h.i.decode(p[q],{stream:!(L&&q==A-1)});return p.length=0,u.h.g+=b,u.C=0,u.h.g}function Ps(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ac(u,p){var b=u.C,A=p.indexOf(`
`,b);return A==-1?Ke:(b=Number(p.substring(b,A)),isNaN(b)?tt:(A+=1,A+b>p.length?Ke:(p=p.slice(A,A+b),u.C=A+b,p)))}Ie.prototype.cancel=function(){this.K=!0,In(this)};function Ei(u){u.T=Date.now()+u.H,Dr(u,u.H)}function Dr(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Hn(_(u.aa,u),p)}function Ti(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Ie.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Zi(this.i,this.B),this.M!=2&&(Bn(),At(17)),In(this),this.m=2,Qn(this)):Dr(this,this.T-u)};function Qn(u){u.j.I==0||u.K||kc(u.j,u)}function In(u){Ti(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,ja(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Ai(u,p){try{var b=u.j;if(b.I!=0&&(b.g==u||wi(b.h,u))){if(!u.L&&wi(b.h,u)&&b.I==3){try{var A=b.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Ur(b),Gs(b);else break e;$a(b),At(18)}}else b.xa=L[1],0<b.xa-b.K&&L[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Hn(_(b.Va,b),6e3));Si(b.h)<=1&&b.ta&&(b.ta=void 0)}else Di(b,11)}else if((u.L||b.g==u)&&Ur(b),!N(p))for(L=b.Ba.g.parse(p),p=0;p<L.length;p++){let Ze=L[p];const _t=Ze[0];if(!(_t<=b.K))if(b.K=_t,Ze=Ze[1],b.I==2)if(Ze[0]=="c"){b.M=Ze[1],b.ba=Ze[2];const Yn=Ze[3];Yn!=null&&(b.ka=Yn,b.j.info("VER="+b.ka));const ki=Ze[4];ki!=null&&(b.za=ki,b.j.info("SVER="+b.za));const hi=Ze[5];hi!=null&&typeof hi=="number"&&hi>0&&(A=1.5*hi,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const fi=u.g;if(fi){const Ka=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var q=A.h;q.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ho(q,q.h),q.h=null))}if(A.G){const zr=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;zr&&(A.wa=zr,nt(A.J,A.G,zr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var le=u;if(A.na=Vc(A,A.L?A.ba:null,A.W),le.L){Fo(A.h,le);var Oe=le,xt=A.O;xt&&(Oe.H=xt),Oe.D&&(Ti(Oe),Ei(Oe)),A.g=le}else Cc(A);b.i.length>0&&Ci(b)}else Ze[0]!="stop"&&Ze[0]!="close"||Di(b,7);else b.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Di(b,7):Wo(b):Ze[0]!="noop"&&b.l&&b.l.qa(Ze),b.A=0)}}Bn(4)}catch{}}var kt=class{constructor(u,p){this.g=u,this.map=p}};function Bo(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Si(u){return u.h?1:u.g?u.g.size:0}function wi(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ho(u,p){u.g?u.g.add(p):u.h=p}function Fo(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Bo.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Go(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const b of u.g.values())p=p.concat(b.G);return p}return P(u.i)}var Sc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kr(u,p){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const A=u[b].indexOf("=");let L,q=null;A>=0?(L=u[b].substring(0,A),q=u[b].substring(A+1)):L=u[b],p(L,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Cn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Cn?(this.l=u.l,Qt(this,u.j),this.o=u.o,this.g=u.g,Ls(this,u.u),this.h=u.h,Qo(this,Nc(u.i)),this.m=u.m):u&&(p=String(u).match(Sc))?(this.l=!1,Qt(this,p[1]||"",!0),this.o=xi(p[2]||""),this.g=xi(p[3]||"",!0),Ls(this,p[4]),this.h=xi(p[5]||"",!0),Qo(this,p[6]||"",!0),this.m=xi(p[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Cn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Ba(p,Mr,!0),":");var b=this.g;return(b||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ba(p,Mr,!0),"@"),u.push(oi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Ba(b,b.charAt(0)=="/"?$o:wc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Ba(b,xc)),u.join("")},Cn.prototype.resolve=function(u){const p=Mt(this);let b=!!u.j;b?Qt(p,u.j):b=!!u.o,b?p.o=u.o:b=!!u.g,b?p.g=u.g:b=u.u!=null;var A=u.h;if(b)Ls(p,u.u);else if(b=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=p.h.lastIndexOf("/");L!=-1&&(A=p.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const q=[];for(let le=0;le<L.length;){const Oe=L[le++];Oe=="."?A&&le==L.length&&q.push(""):Oe==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),A&&le==L.length&&q.push("")):(q.push(Oe),A=!0)}A=q.join("/")}else A=L}return b?p.h=A:b=u.i.toString()!=="",b?Qo(p,Nc(u.i)):b=!!u.m,b&&(p.m=u.m),p};function Mt(u){return new Cn(u)}function Qt(u,p,b){u.j=b?xi(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ls(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Qo(u,p,b){p instanceof zs?(u.i=p,Vr(u.i,u.l)):(b||(p=Ba(p,Us)),u.i=new zs(p,u.l))}function nt(u,p,b){u.i.set(p,b)}function za(u){return nt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xi(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ba(u,p,b){return typeof u=="string"?(u=encodeURI(u).replace(p,yn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mr=/[#\/\?@]/g,wc=/[#\?:]/g,$o=/[#\?]/g,Us=/[#\?@]/g,xc=/#/g;function zs(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function _n(u){u.g||(u.g=new Map,u.h=0,u.i&&kr(u.i,function(p,b){u.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}s=zs.prototype,s.add=function(u,p){_n(this),this.i=null,u=Bs(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(p),this.h+=1,this};function Rc(u,p){_n(u),p=Bs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ko(u,p){return _n(u),p=Bs(u,p),u.g.has(p)}s.forEach=function(u,p){_n(this),this.g.forEach(function(b,A){b.forEach(function(L){u.call(p,L,A,this)},this)},this)};function Yo(u,p){_n(u);let b=[];if(typeof p=="string")Ko(u,p)&&(b=b.concat(u.g.get(Bs(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)b=b.concat(u[p]);return b}s.set=function(u,p){return _n(this),this.i=null,u=Bs(this,u),Ko(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},s.get=function(u,p){return u?(u=Yo(this,u),u.length>0?String(u[0]):p):p};function Or(u,p,b){Rc(u,p),b.length>0&&(u.i=null,u.g.set(Bs(u,p),P(b)),u.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var b=p[A];const L=oi(b);b=Yo(this,b);for(let q=0;q<b.length;q++){let le=L;b[q]!==""&&(le+="="+oi(b[q])),u.push(le)}}return this.i=u.join("&")};function Nc(u){const p=new zs;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Bs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Vr(u,p){p&&!u.j&&(_n(u),u.i=null,u.g.forEach(function(b,A){const L=A.toLowerCase();A!=L&&(Rc(this,A),Or(this,L,b))},u)),u.j=p}function li(u,p){const b=new Nn;if(f.Image){const A=new Image;A.onload=E($n,b,"TestLoadImage: loaded",!0,p,A),A.onerror=E($n,b,"TestLoadImage: error",!1,p,A),A.onabort=E($n,b,"TestLoadImage: abort",!1,p,A),A.ontimeout=E($n,b,"TestLoadImage: timeout",!1,p,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function Xo(u,p){const b=new Nn,A=new AbortController,L=setTimeout(()=>{A.abort(),$n(b,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(q=>{clearTimeout(L),q.ok?$n(b,"TestPingServer: ok",!0,p):$n(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),$n(b,"TestPingServer: error",!1,p)})}function $n(u,p,b,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(b)}catch{}}function qs(){this.g=new Pa}function Ri(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Ri,wr),Ri.prototype.g=function(){return new qa(this.i,this.h)};function qa(u,p){ft.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(qa,ft),s=qa.prototype,s.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,ci(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function jr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Hs(this):ci(this),this.readyState==3&&jr(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Hs(this))},s.Na=function(u){this.g&&(this.response=u,Hs(this))},s.ga=function(){this.g&&Hs(this)};function Hs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ci(u)}s.setRequestHeader=function(u,p){this.A.append(u,p)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=p.next();return u.join(`\r
`)};function ci(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kn(u){let p="";return Me(u,function(b,A){p+=A,p+=":",p+=b,p+=`\r
`}),p}function Ha(u,p,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Kn(b),typeof u=="string"?b!=null&&oi(b):nt(u,p,b))}function at(u){ft.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(at,ft);var Ni=/^https?$/i,Zo=["POST","PUT"];s=at.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,p,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ua.g(),this.g.onreadystatechange=x(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(q){Fa(this,q);return}if(u=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)b.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())b.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(q=>q.toLowerCase()=="content-type"),L=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Zo,p,void 0)>=0)||A||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,le]of b)this.g.setRequestHeader(q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){Fa(this,q)}};function Fa(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Jo(u),ts(u)}function Jo(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,gt(this,"complete"),gt(this,"abort"),ts(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),at.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ga(this):this.Xa())},s.Xa=function(){Ga(this)};function Ga(u){if(u.h&&typeof c<"u"){if(u.v&&ui(u)==4)setTimeout(u.Ca.bind(u),0);else if(gt(u,"readystatechange"),ui(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var A;if(A=q===0){let le=String(u.D).match(Sc)[1]||null;!le&&f.self&&f.self.location&&(le=f.self.location.protocol.slice(0,-1)),A=!Ni.test(le?le.toLowerCase():"")}b=A}if(b)gt(u,"complete"),gt(u,"success");else{u.o=6;try{var L=ui(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Jo(u)}}finally{ts(u)}}}}function ts(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,p||gt(u,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ui(u){return u.g?u.g.readyState:0}s.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Uo(p)}};function Yt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(u){const p={};u=(u.g&&ui(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(N(u[A]))continue;var b=Cr(u[A]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const q=p[L]||[];p[L]=q,q.push(b)}Pe(p,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(u,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||p}function Fs(u){this.za=0,this.i=[],this.j=new Nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,u),this.Za=Ii("retryDelaySeedMs",1e4,u),this.Ta=Ii("forwardChannelMaxRetries",2,u),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(u&&u.concurrentRequestLimit),this.Ba=new qs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Fs.prototype,s.ka=8,s.I=1,s.connect=function(u,p,b,A){At(0),this.W=u,this.H=p||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=Vc(this,null,this.W),Ci(this)};function Wo(u){if(Pr(u),u.I==3){var p=u.V++,b=Mt(u.J);if(nt(b,"SID",u.M),nt(b,"RID",p),nt(b,"TYPE","terminate"),Qa(u,b),p=new Ie(u,u.j,p),p.M=2,p.A=za(Mt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=p.A,b=!0),b||(p.g=jc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ei(p)}Oc(u)}function Gs(u){u.g&&(tl(u),u.g.cancel(),u.g=null)}function Pr(u){Gs(u),u.v&&(f.clearTimeout(u.v),u.v=null),Ur(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ci(u){if(!qo(u.h)&&!u.m){u.m=!0;var p=u.Ea;ve||w(),be||(ve(),be=!0),I.add(p,u),u.D=0}}function Lr(u,p){return Si(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Hn(_(u.Ea,u,p),Mc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Ie(this,this.j,u);let q=this.o;if(this.U&&(q?(q=k(q),oe(q,this.U)):q=this.U),this.u!==null||this.R||(L.J=q,q=null),this.S)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Ic(this,L,p),b=Mt(this.J),nt(b,"RID",u),nt(b,"CVER",22),this.G&&nt(b,"X-HTTP-Session-Id",this.G),Qa(this,b),q&&(this.R?p="headers="+oi(Kn(q))+"&"+p:this.u&&Ha(b,this.u,q)),Ho(this.h,L),this.Ra&&nt(b,"TYPE","init"),this.S?(nt(b,"$req",p),nt(b,"SID","null"),L.U=!0,an(L,b,null)):an(L,b,p),this.I=2}}else this.I==3&&(u?el(this,u):this.i.length==0||qo(this.h)||el(this))};function el(u,p){var b;p?b=p.l:b=u.V++;const A=Mt(u.J);nt(A,"SID",u.M),nt(A,"RID",b),nt(A,"AID",u.K),Qa(u,A),u.u&&u.o&&Ha(A,u.u,u.o),b=new Ie(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Ic(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ho(u.h,b),an(b,A,p)}function Qa(u,p){u.H&&Me(u.H,function(b,A){nt(p,A,b)}),u.l&&Me({},function(b,A){nt(p,A,b)})}function Ic(u,p,b){b=Math.min(u.i.length,b);const A=u.l?_(u.l.Ka,u.l,u):null;e:{var L=u.i;let Oe=-1;for(;;){const xt=["count="+b];Oe==-1?b>0?(Oe=L[0].g,xt.push("ofs="+Oe)):Oe=0:xt.push("ofs="+Oe);let Ze=!0;for(let _t=0;_t<b;_t++){var q=L[_t].g;const Yn=L[_t].map;if(q-=Oe,q<0)Oe=Math.max(0,L[_t].g-100),Ze=!1;else try{q="req"+q+"_"||"";try{var le=Yn instanceof Map?Yn:Object.entries(Yn);for(const[ki,hi]of le){let fi=hi;m(hi)&&(fi=bi(hi)),xt.push(q+ki+"="+encodeURIComponent(fi))}}catch(ki){throw xt.push(q+"type="+encodeURIComponent("_badmap")),ki}}catch{A&&A(Yn)}}if(Ze){le=xt.join("&");break e}}le=void 0}return u=u.i.splice(0,b),p.G=u,le}function Cc(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;ve||w(),be||(ve(),be=!0),I.add(p,u),u.A=0}}function $a(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Hn(_(u.Da,u),Mc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Dc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Hn(_(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Gs(this),Dc(this))};function tl(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Dc(u){u.g=new Ie(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Mt(u.na);nt(p,"RID","rpc"),nt(p,"SID",u.M),nt(p,"AID",u.K),nt(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&nt(p,"TO",u.ia),nt(p,"TYPE","xmlhttp"),Qa(u,p),u.u&&u.o&&Ha(p,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=za(Mt(p)),b.u=null,b.R=!0,Gn(b,u)}s.Va=function(){this.C!=null&&(this.C=null,Gs(this),$a(this),At(19))};function Ur(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function kc(u,p){var b=null;if(u.g==p){Ur(u),tl(u),u.g=null;var A=2}else if(wi(u.h,p))b=p.G,Fo(u.h,p),A=1;else return;if(u.I!=0){if(p.o)if(A==1){b=p.u?p.u.length:0,p=Date.now()-p.F;var L=u.D;A=Vs(),gt(A,new qn(A,b)),Ci(u)}else Cc(u);else if(L=p.m,L==3||L==0&&p.X>0||!(A==1&&Lr(u,p)||A==2&&$a(u)))switch(b&&b.length>0&&(p=u.h,p.i=p.i.concat(b)),L){case 1:Di(u,5);break;case 4:Di(u,10);break;case 3:Di(u,6);break;default:Di(u,2)}}}function Mc(u,p){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*p}function Di(u,p){if(u.j.info("Error code "+p),p==2){var b=_(u.bb,u),A=u.Ua;const L=!A;A=new Cn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Qt(A,"https"),za(A),L?li(A.toString(),b):Xo(A.toString(),b)}else At(2);u.I=0,u.l&&u.l.pa(p),Oc(u),Pr(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Oc(u){if(u.I=0,u.ja=[],u.l){const p=Go(u.h);(p.length!=0||u.i.length!=0)&&($(u.ja,p),$(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Vc(u,p,b){var A=b instanceof Cn?Mt(b):new Cn(b);if(A.g!="")p&&(A.g=p+"."+A.g),Ls(A,A.u);else{var L=f.location;A=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const q=new Cn(null);A&&Qt(q,A),p&&(q.g=p),L&&Ls(q,L),b&&(q.h=b),A=q}return b=u.G,p=u.wa,b&&p&&nt(A,b,p),nt(A,"VER",u.ka),Qa(u,A),A}function jc(u,p,b){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new at(new Ri({ab:b})):new at(u.ma),p.Fa(u.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}s=Pc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Qs(){}Qs.prototype.g=function(u,p){return new fn(u,p)};function fn(u,p){ft.call(this),this.g=new Fs(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!N(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!N(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new is(this)}S(fn,ft),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Wo(this.g)},fn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=bi(u),u=b);p.i.push(new kt(p.Ya++,u)),p.I==3&&Ci(p)},fn.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,fn.Z.N.call(this)};function Lc(u){Dt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const b in p){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}S(Lc,Dt);function Uc(){gn.call(this),this.status=1}S(Uc,gn);function is(u){this.g=u}S(is,Pc),is.prototype.ra=function(){gt(this.g,"a")},is.prototype.qa=function(u){gt(this.g,new Lc(u))},is.prototype.pa=function(u){gt(this.g,new Uc)},is.prototype.oa=function(){gt(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,eb=function(){return new Qs},W1=function(){return Vs()},J1=yt,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,eh=Ji,La.COMPLETE="complete",Z1=La,xr.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",ft.prototype.listen=ft.prototype.J,ql=xr,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,X1=at}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});const $_="@firebase/firestore",K_="4.9.3";let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");let Vo="12.7.0";const yr=new Fm("@firebase/firestore");function yo(){return yr.logLevel}function fe(s,...e){if(yr.logLevel<=qe.DEBUG){const n=e.map(tp);yr.debug(`Firestore (${Vo}): ${s}`,...n)}}function Ns(s,...e){if(yr.logLevel<=qe.ERROR){const n=e.map(tp);yr.error(`Firestore (${Vo}): ${s}`,...n)}}function No(s,...e){if(yr.logLevel<=qe.WARN){const n=e.map(tp);yr.warn(`Firestore (${Vo}): ${s}`,...n)}}function tp(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ne(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,tb(s,a,n)}function tb(s,e,n){let a=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Ns(a),new Error(a)}function We(s,e,n,a){let l="Unexpected state";typeof n=="string"?l=n:a=n,s||tb(e,l,a)}function ke(s,e){return s}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ss{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class nb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class wx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class xx{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let a=this.i;const l=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let c=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ss,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ss)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(We(typeof a.accessToken=="string",31837,{l:a}),new nb(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class Rx{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nx{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new Rx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Y_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ix{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const a=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const l=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Y_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Y_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=Cx(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<n&&(a+=e.charAt(l[c]%62))}return a}}function He(s,e){return s<e?-1:s>e?1:0}function Em(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const l=s.charAt(a),c=e.charAt(a);if(l!==c)return nm(l)===nm(c)?He(l,c):nm(l)?1:-1}return He(s.length,e.length)}const Dx=55296,kx=57343;function nm(s){const e=s.charCodeAt(0);return e>=Dx&&e<=kx}function Io(s,e,n){return s.length===e.length&&s.every(((a,l)=>n(a,e[l])))}const X_="__name__";class Li{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Ne(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let l=0;l<a;l++){const c=Li.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return He(e.length,n.length)}static compareSegments(e,n){const a=Li.isNumericId(e),l=Li.isNumericId(n);return a&&!l?-1:!a&&l?1:a&&l?Li.extractNumericId(e).compare(Li.extractNumericId(n)):Em(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sa.fromString(e.substring(4,e.length-2))}}class dt extends Li{construct(e,n,a){return new dt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new ue(Z.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((l=>l.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const Mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Li{construct(e,n,a){return new tn(e,n,a)}static isValidIdentifier(e){return Mx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X_}static keyField(){return new tn([X_])}static fromServerFormat(e){const n=[];let a="",l=0;const c=()=>{if(a.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let f=!1;for(;l<e.length;){const m=e[l];if(m==="\\"){if(l+1===e.length)throw new ue(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(a+=m,l++):(c(),l++)}if(c(),f)throw new ue(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(dt.fromString(e))}static fromName(e){return new Ae(dt.fromString(e).popFirst(5))}static empty(){return new Ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new dt(e.slice()))}}function ib(s,e,n){if(!n)throw new ue(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Ox(s,e,n,a){if(e===!0&&a===!0)throw new ue(Z.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Z_(s){if(!Ae.isDocumentKey(s))throw new ue(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function J_(s){if(Ae.isDocumentKey(s))throw new ue(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function sb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function kh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ne(12329,{type:typeof s})}function yi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ue(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kh(s);throw new ue(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function zt(s,e){const n={typeString:s};return e&&(n.value=e),n}function pc(s,e){if(!sb(s))throw new ue(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const l=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const f=s[a];if(l&&typeof f!==l){n=`JSON field '${a}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new ue(Z.INVALID_ARGUMENT,n);return!0}const W_=-62135596800,ev=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*ev);return new ct(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<W_)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ev}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pc(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-W_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:zt("string",ct._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ct(0,0))}static max(){return new Ce(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nc=-1;function Vx(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=Ce.fromTimestamp(a===1e9?new ct(n+1,0):new ct(n,a));return new Ra(l,Ae.empty(),e)}function jx(s){return new Ra(s.readTime,s.key,nc)}class Ra{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ra(Ce.min(),Ae.empty(),nc)}static max(){return new Ra(Ce.max(),Ae.empty(),nc)}}function Px(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(s.documentKey,e.documentKey),n!==0?n:He(s.largestBatchId,e.largestBatchId))}const Lx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ux{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jo(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==Lx)throw s;fe("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(a,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,a)=>{n(e)}))}static reject(e){return new W(((n,a)=>{a(e)}))}static waitFor(e){return new W(((n,a)=>{let l=0,c=0,f=!1;e.forEach((m=>{++l,m.next((()=>{++c,f&&c===l&&n()}),(g=>a(g)))})),f=!0,c===l&&n()}))}static or(e){let n=W.resolve(!1);for(const a of e)n=n.next((l=>l?W.resolve(l):a()));return n}static forEach(e,n){const a=[];return e.forEach(((l,c)=>{a.push(n.call(this,l,c))})),this.waitFor(a)}static mapArray(e,n){return new W(((a,l)=>{const c=e.length,f=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next((E=>{f[_]=E,++m,m===c&&a(f)}),(E=>l(E)))}}))}static doWhile(e,n){return new W(((a,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):a()};c()}))}}function zx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Po(s){return s.name==="IndexedDbTransactionError"}class Mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mh.ce=-1;const ip=-1;function Oh(s){return s==null}function mh(s){return s===0&&1/s==-1/0}function Bx(s){return typeof s=="number"&&Number.isInteger(s)&&!mh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const ab="";function qx(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=tv(e)),e=Hx(s.get(n),e);return tv(e)}function Hx(s,e){let n=e;const a=s.length;for(let l=0;l<a;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case ab:n+="";break;default:n+=c}}return n}function tv(s){return s+ab+""}function nv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ma(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function rb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Et{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return n+a.left.size;l<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,n,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?a(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,a,l,c){this.key=e,this.value=n,this.color=a??en.RED,this.left=l??en.EMPTY,this.right=c??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,l,c){return new en(e??this.key,n??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let l=this;const c=a(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,a),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return en.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,a,l,c){return this}insert(e,n,a){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ln{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Ft(tn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class ob extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ob("Invalid base64 string: "+c):c}})(e);return new nn(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let l=0;l<n.length;l++)a[l]=n.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const Fx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(s){if(We(!!s,39018),typeof s=="string"){let e=0;const n=Fx.exec(s);if(We(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:It(s.seconds),nanos:It(s.nanos)}}function It(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ia(s){return typeof s=="string"?nn.fromBase64String(s):nn.fromUint8Array(s)}const lb="server_timestamp",cb="__type__",ub="__previous_value__",hb="__local_write_time__";function sp(s){return(s?.mapValue?.fields||{})[cb]?.stringValue===lb}function Vh(s){const e=s.mapValue.fields[ub];return sp(e)?Vh(e):e}function ic(s){const e=Na(s.mapValue.fields[hb].timestampValue);return new ct(e.seconds,e.nanos)}class Gx{constructor(e,n,a,l,c,f,m,g,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const ph="(default)";class sc{constructor(e,n){this.projectId=e,this.database=n||ph}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database===ph}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}const fb="__type__",Qx="__max__",Qu={mapValue:{}},db="__vector__",gh="value";function Ca(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?sp(s)?4:Kx(s)?9007199254740991:$x(s)?10:11:Ne(28295,{value:s})}function $i(s,e){if(s===e)return!0;const n=Ca(s);if(n!==Ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ic(s).isEqual(ic(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Na(l.timestampValue),m=Na(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Ia(l.bytesValue).isEqual(Ia(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return It(l.geoPointValue.latitude)===It(c.geoPointValue.latitude)&&It(l.geoPointValue.longitude)===It(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return It(l.integerValue)===It(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=It(l.doubleValue),m=It(c.doubleValue);return f===m?mh(f)===mh(m):isNaN(f)&&isNaN(m)}return!1})(s,e);case 9:return Io(s.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},m=c.mapValue.fields||{};if(nv(f)!==nv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!$i(f[g],m[g])))return!1;return!0})(s,e);default:return Ne(52216,{left:s})}}function ac(s,e){return(s.values||[]).find((n=>$i(n,e)))!==void 0}function Co(s,e){if(s===e)return 0;const n=Ca(s),a=Ca(e);if(n!==a)return He(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=It(c.integerValue||c.doubleValue),g=It(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return sv(s.timestampValue,e.timestampValue);case 4:return sv(ic(s),ic(e));case 5:return Em(s.stringValue,e.stringValue);case 6:return(function(c,f){const m=Ia(c),g=Ia(f);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),g=f.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=He(m[_],g[_]);if(E!==0)return E}return He(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=He(It(c.latitude),It(f.latitude));return m!==0?m:He(It(c.longitude),It(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return av(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},g=f.fields||{},_=m[gh]?.arrayValue,E=g[gh]?.arrayValue,S=He(_?.values?.length||0,E?.values?.length||0);return S!==0?S:av(_,E)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Qu.mapValue&&f===Qu.mapValue)return 0;if(c===Qu.mapValue)return 1;if(f===Qu.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=f.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const x=Em(g[S],E[S]);if(x!==0)return x;const P=Co(m[g[S]],_[E[S]]);if(P!==0)return P}return He(g.length,E.length)})(s.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function sv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const n=Na(s),a=Na(e),l=He(n.seconds,a.seconds);return l!==0?l:He(n.nanos,a.nanos)}function av(s,e){const n=s.values||[],a=e.values||[];for(let l=0;l<n.length&&l<a.length;++l){const c=Co(n[l],a[l]);if(c)return c}return He(n.length,a.length)}function Do(s){return Tm(s)}function Tm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Na(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ia(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ae.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",l=!0;for(const c of n.values||[])l?l=!1:a+=",",a+=Tm(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of a)c?c=!1:l+=",",l+=`${f}:${Tm(n.fields[f])}`;return l+"}"})(s.mapValue):Ne(61005,{value:s})}function th(s){switch(Ca(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vh(s);return e?16+th(e):16;case 5:return 2*s.stringValue.length;case 6:return Ia(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,c)=>l+th(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let l=0;return Ma(a.fields,((c,f)=>{l+=c.length+th(f)})),l})(s.mapValue);default:throw Ne(13486,{value:s})}}function rv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Am(s){return!!s&&"integerValue"in s}function ap(s){return!!s&&"arrayValue"in s}function ov(s){return!!s&&"nullValue"in s}function lv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nh(s){return!!s&&"mapValue"in s}function $x(s){return(s?.mapValue?.fields||{})[fb]?.stringValue===db}function Kl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ma(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Kl(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(s.arrayValue.values[n]);return e}return{...s}}function Kx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Qx}class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=tn.emptyPath(),a={},l=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,a,l),a={},l=[],n=m.popLast()}f?a[m.lastSegment()]=Kl(f):l.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,a,l)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=n.mapValue.fields[e.get(a)];nh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,a){Ma(n,((l,c)=>e[l]=c));for(const l of a)delete e[l]}clone(){return new xn(Kl(this.value))}}function mb(s){const e=[];return Ma(s.fields,((n,a)=>{const l=new tn([n]);if(nh(a)){const c=mb(a.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new Ln(e)}class cn{constructor(e,n,a,l,c,f,m){this.key=e,this.documentType=n,this.version=a,this.readTime=l,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new cn(e,0,Ce.min(),Ce.min(),Ce.min(),xn.empty(),0)}static newFoundDocument(e,n,a,l){return new cn(e,1,n,Ce.min(),a,l,0)}static newNoDocument(e,n){return new cn(e,2,n,Ce.min(),Ce.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Ce.min(),Ce.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yh{constructor(e,n){this.position=e,this.inclusive=n}}function cv(s,e,n){let a=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?a=Ae.comparator(Ae.fromName(f.referenceValue),n.key):a=Co(f,n.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function uv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!$i(s.position[n],e.position[n]))return!1;return!0}class _h{constructor(e,n="asc"){this.field=e,this.dir=n}}function Yx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class pb{}class Ut extends pb{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new Zx(e,n,a):n==="array-contains"?new eR(e,a):n==="in"?new tR(e,a):n==="not-in"?new nR(e,a):n==="array-contains-any"?new iR(e,a):new Ut(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new Jx(e,a):new Wx(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Co(n,this.value)):n!==null&&Ca(this.value)===Ca(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends pb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vi(e,n)}matches(e){return gb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gb(s){return s.op==="and"}function yb(s){return Xx(s)&&gb(s)}function Xx(s){for(const e of s.filters)if(e instanceof vi)return!1;return!0}function Sm(s){if(s instanceof Ut)return s.field.canonicalString()+s.op.toString()+Do(s.value);if(yb(s))return s.filters.map((e=>Sm(e))).join(",");{const e=s.filters.map((n=>Sm(n))).join(",");return`${s.op}(${e})`}}function _b(s,e){return s instanceof Ut?(function(a,l){return l instanceof Ut&&a.op===l.op&&a.field.isEqual(l.field)&&$i(a.value,l.value)})(s,e):s instanceof vi?(function(a,l){return l instanceof vi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((c,f,m)=>c&&_b(f,l.filters[m])),!0):!1})(s,e):void Ne(19439)}function vb(s){return s instanceof Ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`})(s):s instanceof vi?(function(n){return n.op.toString()+" {"+n.getFilters().map(vb).join(" ,")+"}"})(s):"Filter"}class Zx extends Ut{constructor(e,n,a){super(e,n,a),this.key=Ae.fromName(a.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class Jx extends Ut{constructor(e,n){super(e,"in",n),this.keys=bb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Wx extends Ut{constructor(e,n){super(e,"not-in",n),this.keys=bb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bb(s,e){return(e.arrayValue?.values||[]).map((n=>Ae.fromName(n.referenceValue)))}class eR extends Ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ap(n)&&ac(n.arrayValue,this.value)}}class tR extends Ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ac(this.value.arrayValue,n)}}class nR extends Ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ac(this.value.arrayValue,n)}}class iR extends Ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>ac(this.value.arrayValue,a)))}}class sR{constructor(e,n=null,a=[],l=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function hv(s,e=null,n=[],a=[],l=null,c=null,f=null){return new sR(s,e,n,a,l,c,f)}function rp(s){const e=ke(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Sm(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Do(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Do(a))).join(",")),e.Te=n}return e.Te}function op(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Yx(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!_b(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!uv(s.startAt,e.startAt)&&uv(s.endAt,e.endAt)}function wm(s){return Ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class gc{constructor(e,n=null,a=[],l=[],c=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aR(s,e,n,a,l,c,f,m){return new gc(s,e,n,a,l,c,f,m)}function jh(s){return new gc(s)}function fv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Eb(s){return s.collectionGroup!==null}function Yl(s){const e=ke(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ft(tn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new _h(c,a))})),n.has(tn.keyField().canonicalString())||e.Ie.push(new _h(tn.keyField(),a))}return e.Ie}function Hi(s){const e=ke(s);return e.Ee||(e.Ee=rR(e,Yl(s))),e.Ee}function rR(s,e){if(s.limitType==="F")return hv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new _h(l.field,c)}));const n=s.endAt?new yh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new yh(s.startAt.position,s.startAt.inclusive):null;return hv(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function xm(s,e){const n=s.filters.concat([e]);return new gc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Rm(s,e,n){return new gc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Ph(s,e){return op(Hi(s),Hi(e))&&s.limitType===e.limitType}function Tb(s){return`${rp(Hi(s))}|lt:${s.limitType}`}function _o(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((l=>vb(l))).join(", ")}]`),Oh(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((l=>Do(l))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((l=>Do(l))).join(",")),`Target(${a})`})(Hi(s))}; limitType=${s.limitType})`}function Lh(s,e){return e.isFoundDocument()&&(function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Ae.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,l){for(const c of Yl(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(a,l){return!(a.startAt&&!(function(f,m,g){const _=cv(f,m,g);return f.inclusive?_<=0:_<0})(a.startAt,Yl(a),l)||a.endAt&&!(function(f,m,g){const _=cv(f,m,g);return f.inclusive?_>=0:_>0})(a.endAt,Yl(a),l))})(s,e)}function oR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Ab(s){return(e,n)=>{let a=!1;for(const l of Yl(s)){const c=lR(l,e,n);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function lR(s,e,n){const a=s.field.isKeyField()?Ae.comparator(e.key,n.key):(function(c,f,m){const g=f.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Co(g,_):Ne(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ne(19790,{direction:s.dir})}}class Tr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[n]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((n,a)=>{for(const[l,c]of a)e(l,c)}))}isEmpty(){return rb(this.inner)}size(){return this.innerSize}}const cR=new Et(Ae.comparator);function Is(){return cR}const Sb=new Et(Ae.comparator);function Hl(...s){let e=Sb;for(const n of s)e=e.insert(n.key,n);return e}function wb(s){let e=Sb;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function hr(){return Xl()}function xb(){return Xl()}function Xl(){return new Tr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const uR=new Et(Ae.comparator),hR=new Ft(Ae.comparator);function Fe(...s){let e=hR;for(const n of s)e=e.add(n);return e}const fR=new Ft(He);function dR(){return fR}function lp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function Rb(s){return{integerValue:""+s}}function mR(s,e){return Bx(e)?Rb(e):lp(s,e)}class Uh{constructor(){this._=void 0}}function pR(s,e,n){return s instanceof rc?(function(l,c){const f={fields:{[cb]:{stringValue:lb},[hb]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&sp(c)&&(c=Vh(c)),c&&(f.fields[ub]=c),{mapValue:f}})(n,e):s instanceof oc?Ib(s,e):s instanceof lc?Cb(s,e):(function(l,c){const f=Nb(l,c),m=dv(f)+dv(l.Ae);return Am(f)&&Am(l.Ae)?Rb(m):lp(l.serializer,m)})(s,e)}function gR(s,e,n){return s instanceof oc?Ib(s,e):s instanceof lc?Cb(s,e):n}function Nb(s,e){return s instanceof vh?(function(a){return Am(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class rc extends Uh{}class oc extends Uh{constructor(e){super(),this.elements=e}}function Ib(s,e){const n=Db(e);for(const a of s.elements)n.some((l=>$i(l,a)))||n.push(a);return{arrayValue:{values:n}}}class lc extends Uh{constructor(e){super(),this.elements=e}}function Cb(s,e){let n=Db(e);for(const a of s.elements)n=n.filter((l=>!$i(l,a)));return{arrayValue:{values:n}}}class vh extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function dv(s){return It(s.integerValue||s.doubleValue)}function Db(s){return ap(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class yR{constructor(e,n){this.field=e,this.transform=n}}function _R(s,e){return s.field.isEqual(e.field)&&(function(a,l){return a instanceof oc&&l instanceof oc||a instanceof lc&&l instanceof lc?Io(a.elements,l.elements,$i):a instanceof vh&&l instanceof vh?$i(a.Ae,l.Ae):a instanceof rc&&l instanceof rc})(s.transform,e.transform)}class vR{constructor(e,n){this.version=e,this.transformResults=n}}class ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class zh{}function kb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new cp(s.key,ai.none()):new yc(s.key,s.data,ai.none());{const n=s.data,a=xn.empty();let l=new Ft(tn.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?a.delete(c):a.set(c,f),l=l.add(c)}return new Oa(s.key,a,new Ln(l.toArray()),ai.none())}}function bR(s,e,n){s instanceof yc?(function(l,c,f){const m=l.value.clone(),g=pv(l.fieldTransforms,c,f.transformResults);m.setAll(g),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,e,n):s instanceof Oa?(function(l,c,f){if(!ih(l.precondition,c))return void c.convertToUnknownDocument(f.version);const m=pv(l.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(Mb(l)),g.setAll(m),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Zl(s,e,n,a){return s instanceof yc?(function(c,f,m,g){if(!ih(c.precondition,f))return m;const _=c.value.clone(),E=gv(c.fieldTransforms,g,f);return _.setAll(E),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(s,e,n,a):s instanceof Oa?(function(c,f,m,g){if(!ih(c.precondition,f))return m;const _=gv(c.fieldTransforms,g,f),E=f.data;return E.setAll(Mb(c)),E.setAll(_),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,a):(function(c,f,m){return ih(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(s,e,n)}function ER(s,e){let n=null;for(const a of s.fieldTransforms){const l=e.data.field(a.field),c=Nb(a.transform,l||null);c!=null&&(n===null&&(n=xn.empty()),n.set(a.field,c))}return n||null}function mv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Io(a,l,((c,f)=>_R(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class yc extends zh{constructor(e,n,a,l=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Oa extends zh{constructor(e,n,a,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Mb(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function pv(s,e,n){const a=new Map;We(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],f=c.transform,m=e.data.field(c.field);a.set(c.field,gR(f,m,n[l]))}return a}function gv(s,e,n){const a=new Map;for(const l of s){const c=l.transform,f=n.data.field(l.field);a.set(l.field,pR(c,f,e))}return a}class cp extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TR extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AR{constructor(e,n,a,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&bR(c,e,a[l])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Zl(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Zl(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=xb();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(l.key)?null:m;const g=kb(f,m);g!==null&&a.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Ce.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((n,a)=>mv(n,a)))&&Io(this.baseMutations,e.baseMutations,((n,a)=>mv(n,a)))}}class up{constructor(e,n,a,l){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=l}static from(e,n,a){We(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return uR})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,a[f].version);return new up(e,n,a,l)}}class SR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class wR{constructor(e,n){this.count=e,this.unchangedNames=n}}var Lt,$e;function xR(s){switch(s){case Z.OK:return Ne(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ne(15467,{code:s})}}function Ob(s){if(s===void 0)return Ns("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Lt.OK:return Z.OK;case Lt.CANCELLED:return Z.CANCELLED;case Lt.UNKNOWN:return Z.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return Z.INTERNAL;case Lt.UNAVAILABLE:return Z.UNAVAILABLE;case Lt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Lt.NOT_FOUND:return Z.NOT_FOUND;case Lt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Lt.ABORTED:return Z.ABORTED;case Lt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Lt.DATA_LOSS:return Z.DATA_LOSS;default:return Ne(39323,{code:s})}}($e=Lt||(Lt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function RR(){return new TextEncoder}const NR=new Sa([4294967295,4294967295],0);function yv(s){const e=RR().encode(s),n=new Y1;return n.update(e),new Uint8Array(n.digest())}function _v(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Sa([n,a],0),new Sa([l,c],0)]}class hp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Fl(`Invalid padding: ${n}`);if(a<0)throw new Fl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Sa.fromNumber(this.ge)}ye(e,n,a){let l=e.add(n.multiply(Sa.fromNumber(a)));return l.compare(NR)===1&&(l=new Sa([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=yv(e),[a,l]=_v(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(a,l,c);if(!this.we(f))return!1}return!0}static create(e,n,a){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new hp(c,l,n);return a.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=yv(e),[a,l]=_v(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(a,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bh{constructor(e,n,a,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const l=new Map;return l.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Bh(Ce.min(),l,new Et(He),Is(),Fe())}}class _c{constructor(e,n,a,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new _c(a,n,Fe(),Fe(),Fe())}}class sh{constructor(e,n,a,l){this.be=e,this.removedTargetIds=n,this.key=a,this.De=l}}class Vb{constructor(e,n){this.targetId=e,this.Ce=n}}class jb{constructor(e,n,a=nn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=l}}class vv{constructor(){this.ve=0,this.Fe=bv(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),a=Fe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:a=a.add(l);break;default:Ne(38017,{changeType:c})}})),new _c(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=bv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.Je=$u(),this.He=$u(),this.Ye=new Et(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,a=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(wm(c))if(a===0){const f=new Ae(c.path);this.et(n,f,cn.newNoDocument(f,Ce.min()))}else We(a===1,20013,{expectedCount:a});else{const f=this._t(n);if(f!==a){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=n;let f,m;try{f=Ia(a).toUint8Array()}catch(g){if(g instanceof ob)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new hp(f,l,c)}catch(g){return No(g instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let l=0;return a.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&wm(m.target)){const g=new Ae(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,cn.newNoDocument(g,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let a=Fe();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new Bh(e,n,this.Ye,this.je,a);return this.je=Is(),this.Je=$u(),this.He=$u(),this.Ye=new Et(He),l}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $u(){return new Et(Ae.comparator)}function bv(){return new Et(Ae.comparator)}const CR={asc:"ASCENDING",desc:"DESCENDING"},DR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kR={and:"AND",or:"OR"};class MR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nm(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function bh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function OR(s,e){return bh(s,e.toTimestamp())}function Fi(s){return We(!!s,49232),Ce.fromTimestamp((function(n){const a=Na(n);return new ct(a.seconds,a.nanos)})(s))}function fp(s,e){return Im(s,e).canonicalString()}function Im(s,e){const n=(function(l){return new dt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Lb(s){const e=dt.fromString(s);return We(Hb(e),10190,{key:e.toString()}),e}function Cm(s,e){return fp(s.databaseId,e.path)}function im(s,e){const n=Lb(e);if(n.get(1)!==s.databaseId.projectId)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ae(zb(n))}function Ub(s,e){return fp(s.databaseId,e)}function VR(s){const e=Lb(s);return e.length===4?dt.emptyPath():zb(e)}function Dm(s){return new dt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function zb(s){return We(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Ev(s,e,n){return{name:Cm(s,e),fields:n.value.mapValue.fields}}function jR(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ne(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(_,E){return _.useProto3Json?(We(E===void 0||typeof E=="string",58123),nn.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),nn.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(_){const E=_.code===void 0?Z.UNKNOWN:Ob(_.code);return new ue(E,_.message||"")})(f);n=new jb(a,l,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=im(s,a.document.name),c=Fi(a.document.updateTime),f=a.document.createTime?Fi(a.document.createTime):Ce.min(),m=new xn({mapValue:{fields:a.document.fields}}),g=cn.newFoundDocument(l,c,f,m),_=a.targetIds||[],E=a.removedTargetIds||[];n=new sh(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=im(s,a.document),c=a.readTime?Fi(a.readTime):Ce.min(),f=cn.newNoDocument(l,c),m=a.removedTargetIds||[];n=new sh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=im(s,a.document),c=a.removedTargetIds||[];n=new sh([],c,l,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,f=new wR(l,c),m=a.targetId;n=new Vb(m,f)}}return n}function PR(s,e){let n;if(e instanceof yc)n={update:Ev(s,e.key,e.value)};else if(e instanceof cp)n={delete:Cm(s,e.key)};else if(e instanceof Oa)n={update:Ev(s,e.key,e.data),updateMask:QR(e.fieldMask)};else{if(!(e instanceof TR))return Ne(16599,{Vt:e.type});n={verify:Cm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(c,f){const m=f.transform;if(m instanceof rc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof oc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof lc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof vh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ne(20930,{transform:f.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:OR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ne(27497)})(s,e.precondition)),n}function LR(s,e){return s&&s.length>0?(We(e!==void 0,14353),s.map((n=>(function(l,c){let f=l.updateTime?Fi(l.updateTime):Fi(c);return f.isEqual(Ce.min())&&(f=Fi(c)),new vR(f,l.transformResults||[])})(n,e)))):[]}function UR(s,e){return{documents:[Ub(s,e.path)]}}function zR(s,e){const n={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Ub(s,l);const c=(function(_){if(_.length!==0)return qb(vi.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((E=>(function(x){return{field:vo(x.field),direction:HR(x.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Nm(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:l}}function BR(s){let e=VR(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let l=null;if(a>0){We(a===1,65062);const E=n.from[0];E.allDescendants?l=E.collectionId:e=e.child(E.collectionId)}let c=[];n.where&&(c=(function(S){const x=Bb(S);return x instanceof vi&&yb(x)?x.getFilters():[x]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((x=>(function($){return new _h(bo($.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(x)))})(n.orderBy));let m=null;n.limit&&(m=(function(S){let x;return x=typeof S=="object"?S.value:S,Oh(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(S){const x=!!S.before,P=S.values||[];return new yh(P,x)})(n.startAt));let _=null;return n.endAt&&(_=(function(S){const x=!S.before,P=S.values||[];return new yh(P,x)})(n.endAt)),aR(e,l,f,c,m,"F",g,_)}function qR(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bb(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=bo(n.unaryFilter.field);return Ut.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=bo(n.unaryFilter.field);return Ut.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=bo(n.unaryFilter.field);return Ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=bo(n.unaryFilter.field);return Ut.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Ut.create(bo(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return vi.create(n.compositeFilter.filters.map((a=>Bb(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(s):Ne(30097,{filter:s})}function HR(s){return CR[s]}function FR(s){return DR[s]}function GR(s){return kR[s]}function vo(s){return{fieldPath:s.canonicalString()}}function bo(s){return tn.fromServerFormat(s.fieldPath)}function qb(s){return s instanceof Ut?(function(n){if(n.op==="=="){if(lv(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(ov(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lv(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(ov(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:FR(n.op),value:n.value}}})(s):s instanceof vi?(function(n){const a=n.getFilters().map((l=>qb(l)));return a.length===1?a[0]:{compositeFilter:{op:GR(n.op),filters:a}}})(s):Ne(54877,{filter:s})}function QR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Hb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class ba{constructor(e,n,a,l,c=Ce.min(),f=Ce.min(),m=nn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $R{constructor(e){this.yt=e}}function KR(s){const e=BR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Rm(e,e.limit,"L"):e}class YR{constructor(){this.Cn=new XR}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Ra.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Ra.min())}updateCollectionGroup(e,n,a){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class XR{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),l=this.index[n]||new Ft(dt.comparator),c=!l.has(a);return this.index[n]=l.add(a),c}has(e){const n=e.lastSegment(),a=e.popLast(),l=this.index[n];return l&&l.has(a)}getEntries(e){return(this.index[e]||new Ft(dt.comparator)).toArray()}}const Tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fb=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(Fb,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ko(0)}static cr(){return new ko(-1)}}const Av="LruGarbageCollector",ZR=1048576;function Sv([s,e],[n,a]){const l=He(s,n);return l===0?He(e,a):l}class JR{constructor(e){this.Ir=e,this.buffer=new Ft(Sv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Sv(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WR{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(Av,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?fe(Av,"Ignoring IndexedDB error during garbage collection: ",n):await jo(n)}await this.Vr(3e5)}))}}class eN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Mh.ce);const a=new JR(n);return this.mr.forEachTarget(e,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Tv)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,l,c,f,m,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,f=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(a=S,m=Date.now(),this.removeTargets(e,a,n)))).next((S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((S=>(_=Date.now(),yo()<=qe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function tN(s,e){return new eN(s,e)}class nN{constructor(){this.changes=new Tr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?W.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class sN{constructor(e,n,a,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(a!==null&&Zl(a.mutation,l,Ln.empty(),ct.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Fe()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Fe()){const l=hr();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,a).next((c=>{let f=Hl();return c.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const a=hr();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Fe())))}populateOverlays(e,n,a){const l=[];return a.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,a,l){let c=Is();const f=Xl(),m=(function(){return Xl()})();return n.forEach(((g,_)=>{const E=a.get(_.key);l.has(_.key)&&(E===void 0||E.mutation instanceof Oa)?c=c.insert(_.key,_):E!==void 0?(f.set(_.key,E.mutation.getFieldMask()),Zl(E.mutation,_,E.mutation.getFieldMask(),ct.now())):f.set(_.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,E)=>f.set(_,E))),n.forEach(((_,E)=>m.set(_,new iN(E,f.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const a=Xl();let l=new Et(((f,m)=>f-m)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let E=a.get(g)||Ln.empty();E=m.applyToLocalView(_,E),a.set(g,E);const S=(l.get(m.batchId)||Fe()).add(g);l=l.insert(m.batchId,S)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,S=xb();E.forEach((x=>{if(!c.has(x)){const P=kb(n.get(x),a.get(x));P!==null&&S.set(x,P),c=c.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,S))}return W.waitFor(f)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,l){return(function(f){return Ae.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Eb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,l):this.getDocumentsMatchingCollectionQuery(e,n,a,l)}getNextDocuments(e,n,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,l-c.size):W.resolve(hr());let m=nc,g=c;return f.next((_=>W.forEach(_,((E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),c.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next((x=>{g=g.insert(E,x)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,Fe()))).next((E=>({batchId:m,changes:wb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((a=>{let l=Hl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,l){const c=n.collectionGroup;let f=Hl();return this.indexManager.getCollectionParents(e,c).next((m=>W.forEach(m,(g=>{const _=(function(S,x){return new gc(x,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,a,l).next((E=>{E.forEach(((S,x)=>{f=f.insert(S,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,c,l)))).next((f=>{c.forEach(((g,_)=>{const E=_.getKey();f.get(E)===null&&(f=f.insert(E,cn.newInvalidDocument(E)))}));let m=Hl();return f.forEach(((g,_)=>{const E=c.get(g);E!==void 0&&Zl(E.mutation,_,Ln.empty(),ct.now()),Lh(n,_)&&(m=m.insert(g,_))})),m}))}}class aN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Fi(l.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:KR(l.bundledQuery),readTime:Fi(l.readTime)}})(n)),W.resolve()}}class rN{constructor(){this.overlays=new Et(Ae.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const a=hr();return W.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&a.set(l,c)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((l,c)=>{this.St(e,n,c)})),W.resolve()}removeOverlaysForBatchId(e,n,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),W.resolve()}getOverlaysForCollection(e,n,a){const l=hr(),c=n.length+1,f=new Ae(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>a&&l.set(g.getKey(),g)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,a,l){let c=new Et(((_,E)=>_-E));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>a){let E=c.get(_.largestBatchId);E===null&&(E=hr(),c=c.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=hr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,E)=>m.set(_,E))),!(m.size()>=l)););return W.resolve(m)}St(e,n,a){const l=this.overlays.get(a.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new SR(n,a));let c=this.qr.get(n);c===void 0&&(c=Fe(),this.qr.set(n,c)),this.qr.set(n,c.add(a.key))}}class oN{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class dp{constructor(){this.Qr=new Ft(Kt.$r),this.Ur=new Ft(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new Kt(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new Kt(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Ae(new dt([])),a=new Kt(n,e),l=new Kt(n,e+1),c=[];return this.Ur.forEachInRange([a,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ae(new dt([])),a=new Kt(n,e),l=new Kt(n,e+1);let c=Fe();return this.Ur.forEachInRange([a,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Kt(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ae.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||Ae.comparator(e.key,n.key)}}class lN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Kt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new AR(c,n,a,l);this.mutationQueue.push(f);for(const m of l)this.Zr=this.Zr.add(new Kt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,l=this.ei(a),c=l<0?0:l;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ip:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Kt(n,0),l=new Kt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,l],(f=>{const m=this.Xr(f.Yr);c.push(m)})),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Ft(He);return n.forEach((l=>{const c=new Kt(l,0),f=new Kt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{a=a.add(m.Yr)}))})),W.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,l=a.length+1;let c=a;Ae.isDocumentKey(c)||(c=c.child(""));const f=new Kt(new Ae(c),0);let m=new Ft(He);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!a.isPrefixOf(_)&&(_.length===l&&(m=m.add(g.Yr)),!0)}),f),W.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((a=>{const l=this.Xr(a);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return W.forEach(n.mutations,(l=>{const c=new Kt(l.key,n.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new Kt(n,0),l=this.Zr.firstAfterOrEqual(a);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class cN{constructor(e){this.ri=e,this.docs=(function(){return new Et(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,l=this.docs.get(a),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return W.resolve(a?a.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let a=Is();return n.forEach((l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():cn.newInvalidDocument(l))})),W.resolve(a)}getDocumentsMatchingQuery(e,n,a,l){let c=Is();const f=n.path,m=new Ae(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||Px(jx(E),a)<=0||(l.has(E.key)||Lh(n,E))&&(c=c.insert(E.key,E.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,a,l){Ne(9500)}ii(e,n){return W.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new uN(this)}getSize(e){return W.resolve(this.size)}}class uN extends nN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class hN{constructor(e){this.persistence=e,this.si=new Tr((n=>rp(n)),op),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new dp,this.targetCount=0,this.ai=ko.ur()}forEachTarget(e,n){return this.si.forEach(((a,l)=>n(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,a){let l=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&a.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),l++)})),W.waitFor(c).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return W.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),W.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return W.resolve(a)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}class Gb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mh(0),this.li=!1,this.li=!0,this.hi=new oN,this.referenceDelegate=e(this),this.Pi=new hN(this),this.indexManager=new YR,this.remoteDocumentCache=(function(l){return new cN(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new $R(n),this.Ii=new aN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new lN(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){fe("MemoryPersistence","Starting transaction:",e);const l=new fN(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return W.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class fN extends Ux{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new dp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),W.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(a=>{const l=Ae.fromPath(a);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Eh{constructor(e,n){this.persistence=e,this.pi=new Tr((a=>qx(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=tN(this,n)}static mi(e,n){return new Eh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((l=>a+l))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((a,l)=>this.br(e,a,l).next((c=>c?W.resolve():n(l)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((m=>{m||(a++,c.removeEntry(f,Ce.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),W.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}br(e,n,a){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return W.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class pp{constructor(e,n,a,l){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=l}static As(e,n){let a=Fe(),l=Fe();for(const c of n.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new pp(e,n.fromCache,a,l)}}class dN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z2()?8:zx(un())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,a).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new dN;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,a,l){return a.documentReadCount<this.fs?(yo()<=qe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(yo()<=qe.DEBUG&&fe("QueryEngine","Query:",_o(n),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(yo()<=qe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(n))):W.resolve())}ys(e,n){if(fv(n))return W.resolve(null);let a=Hi(n);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Rm(n,null,"F"),a=Hi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const f=Fe(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,a).next((g=>{const _=this.Ds(n,m);return this.Cs(n,_,f,g.readTime)?this.ys(e,Rm(n,null,"F")):this.vs(e,_,n,g)}))))})))))}ws(e,n,a,l){return fv(n)||l.isEqual(Ce.min())?W.resolve(null):this.ps.getDocuments(e,a).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,a,l)?W.resolve(null):(yo()<=qe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),_o(n)),this.vs(e,f,n,Vx(l,nc)).next((m=>m)))}))}Ds(e,n){let a=new Ft(Ab(e));return n.forEach(((l,c)=>{Lh(e,c)&&(a=a.add(c))})),a}Cs(e,n,a,l){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,a){return yo()<=qe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",_o(n)),this.ps.getDocumentsMatchingQuery(e,n,Ra.min(),a)}vs(e,n,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const gp="LocalStore",pN=3e8;class gN{constructor(e,n,a,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Et(He),this.xs=new Tr((c=>rp(c)),op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function yN(s,e,n,a){return new gN(s,e,n,a)}async function Qb(s,e){const n=ke(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return n.mutationQueue.getAllMutationBatches(a).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((c=>{const f=[],m=[];let g=Fe();for(const _ of l){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of c){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(a,g).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function _N(s,e){const n=ke(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,E){const S=_.batch,x=S.keys();let P=W.resolve();return x.forEach(($=>{P=P.next((()=>E.getEntry(g,$))).next((X=>{const F=_.docVersions.get($);We(F!==null,48541),X.version.compareTo(F)<0&&(S.applyToRemoteDocument(X,_),X.isValidDocument()&&(X.setReadTime(_.commitVersion),E.addEntry(X)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(g,S)))})(n,a,e,c).next((()=>c.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let g=Fe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(a,l)))}))}function $b(s){const e=ke(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function vN(s,e){const n=ke(s),a=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const m=[];e.targetChanges.forEach(((E,S)=>{const x=l.get(S);if(!x)return;m.push(n.Pi.removeMatchingKeys(c,E.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,E.addedDocuments,S))));let P=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(nn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,a)),l=l.insert(S,P),(function(X,F,te){return X.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=pN?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(x,P,E)&&m.push(n.Pi.updateTargetData(c,P))}));let g=Is(),_=Fe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,E))})),m.push(bN(c,f,e.documentUpdates).next((E=>{g=E.ks,_=E.qs}))),!a.isEqual(Ce.min())){const E=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));m.push(E)}return W.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function bN(s,e,n){let a=Fe(),l=Fe();return n.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let f=Is();return n.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(m)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):fe(gp,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function EN(s,e){const n=ke(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=ip),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function TN(s,e){const n=ke(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return n.Pi.getTargetData(a,e).next((c=>c?(l=c,W.resolve(l)):n.Pi.allocateTargetId(a).next((f=>(l=new ba(e,f,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=n.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function km(s,e,n){const a=ke(s),l=a.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",c,(f=>a.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Po(f))throw f;fe(gp,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function wv(s,e,n){const a=ke(s);let l=Ce.min(),c=Fe();return a.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,_,E){const S=ke(g),x=S.xs.get(E);return x!==void 0?W.resolve(S.Ms.get(x)):S.Pi.getTargetData(_,E)})(a,f,Hi(e)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,m.targetId).next((g=>{c=g}))})).next((()=>a.Fs.getDocumentsMatchingQuery(f,e,n?l:Ce.min(),n?c:Fe()))).next((m=>(AN(a,oR(e),m),{documents:m,Qs:c})))))}function AN(s,e,n){let a=s.Os.get(e)||Ce.min();n.forEach(((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Os.set(e,a)}class xv{constructor(){this.activeTargetIds=dR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SN{constructor(){this.Mo=new xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xv,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wN{Oo(e){}shutdown(){}}const Rv="ConnectivityMonitor";class Nv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(Rv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(Rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ku=null;function Mm(){return Ku===null?Ku=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ku++,"0x"+Ku.toString(16)}const sm="RestConnection",xN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===ph?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,n,a,l,c){const f=Mm(),m=this.zo(e,n.toUriEncodedString());fe(sm,`Sending RPC '${e}' ${f}:`,m,a);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:_}=new URL(m),E=br(_);return this.Jo(e,m,g,a,E).then((S=>(fe(sm,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw No(sm,`RPC '${e}' ${f} failed with error: `,S,"url: ",m,"request:",a),S}))}Ho(e,n,a,l,c,f){return this.Go(e,n,a,l,c)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),a&&a.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const a=xN[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}class NN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const on="WebChannelConnection";class IN extends RN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,l,c){const f=Mm();return new Promise(((m,g)=>{const _=new X1;_.setWithCredentials(!0),_.listenOnce(Z1.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case eh.NO_ERROR:const S=_.getResponseJson();fe(on,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),m(S);break;case eh.TIMEOUT:fe(on,`RPC '${e}' ${f} timed out`),g(new ue(Z.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const x=_.getStatus();if(fe(on,`RPC '${e}' ${f} failed with status:`,x,"response text:",_.getResponseText()),x>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const $=P?.error;if($&&$.status&&$.message){const X=(function(te){const ie=te.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ie)>=0?ie:Z.UNKNOWN})($.status);g(new ue(X,$.message))}else g(new ue(Z.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ue(Z.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{fe(on,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(l);fe(on,`RPC '${e}' ${f} sending request:`,l),_.send(n,"POST",E,a,15)}))}T_(e,n,a){const l=Mm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=eb(),m=W1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,a),g.encodeInitMessageHeaders=!0;const E=c.join("");fe(on,`Creating RPC '${e}' stream ${l}: ${E}`,g);const S=f.createWebChannel(E,g);this.I_(S);let x=!1,P=!1;const $=new NN({Yo:F=>{P?fe(on,`Not sending because RPC '${e}' stream ${l} is closed:`,F):(x||(fe(on,`Opening RPC '${e}' stream ${l} transport.`),S.open(),x=!0),fe(on,`RPC '${e}' stream ${l} sending:`,F),S.send(F))},Zo:()=>S.close()}),X=(F,te,ie)=>{F.listen(te,(ae=>{try{ie(ae)}catch(ye){setTimeout((()=>{throw ye}),0)}}))};return X(S,ql.EventType.OPEN,(()=>{P||(fe(on,`RPC '${e}' stream ${l} transport opened.`),$.o_())})),X(S,ql.EventType.CLOSE,(()=>{P||(P=!0,fe(on,`RPC '${e}' stream ${l} transport closed`),$.a_(),this.E_(S))})),X(S,ql.EventType.ERROR,(F=>{P||(P=!0,No(on,`RPC '${e}' stream ${l} transport errored. Name:`,F.name,"Message:",F.message),$.a_(new ue(Z.UNAVAILABLE,"The operation could not be completed")))})),X(S,ql.EventType.MESSAGE,(F=>{if(!P){const te=F.data[0];We(!!te,16349);const ie=te,ae=ie?.error||ie[0]?.error;if(ae){fe(on,`RPC '${e}' stream ${l} received error:`,ae);const ye=ae.status;let ve=(function(w){const R=Lt[w];if(R!==void 0)return Ob(R)})(ye),be=ae.message;ve===void 0&&(ve=Z.INTERNAL,be="Unknown error status: "+ye+" with message "+ae.message),P=!0,$.a_(new ue(ve,be)),S.close()}else fe(on,`RPC '${e}' stream ${l} received:`,te),$.u_(te)}})),X(m,J1.STAT_EVENT,(F=>{F.stat===bm.PROXY?fe(on,`RPC '${e}' stream ${l} detected buffering proxy`):F.stat===bm.NOPROXY&&fe(on,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function am(){return typeof document<"u"?document:null}function qh(s){return new MR(s,!0)}class Kb{constructor(e,n,a=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-a);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Iv="PersistentStream";class Yb{constructor(e,n,a,l,c,f,m,g){this.Mi=e,this.S_=a,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Ns(n.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===n&&this.G_(a,l)}),(a=>{e((()=>{const l=new ue(Z.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(Iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(Iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CN extends Yb{constructor(e,n,a,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jR(this.serializer,e),a=(function(c){if(!("targetChange"in c))return Ce.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ce.min():f.readTime?Fi(f.readTime):Ce.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=Dm(this.serializer),n.addTarget=(function(c,f){let m;const g=f.target;if(m=wm(g)?{documents:UR(c,g)}:{query:zR(c,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Pb(c,f.resumeToken);const _=Nm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(Ce.min())>0){m.readTime=bh(c,f.snapshotVersion.toTimestamp());const _=Nm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const a=qR(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=Dm(this.serializer),n.removeTarget=e,this.q_(n)}}class DN extends Yb{constructor(e,n,a,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=LR(e.writeResults,e.commitTime),a=Fi(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Dm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>PR(this.serializer,a)))};this.q_(n)}}class kN{}class MN extends kN{constructor(e,n,a,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Im(n,a),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(Z.UNKNOWN,c.toString())}))}Ho(e,n,a,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Im(n,a),l,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ue(Z.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ON{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ns(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _r="RemoteStore";class VN{constructor(e,n,a,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{a.enqueueAndForget((async()=>{Ar(this)&&(fe(_r,"Restarting streams for network reachability change."),await(async function(g){const _=ke(g);_.Ea.add(4),await vc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Hh(_)})(this))}))})),this.Ra=new ON(a,l)}}async function Hh(s){if(Ar(s))for(const e of s.da)await e(!0)}async function vc(s){for(const e of s.da)await e(!1)}function Xb(s,e){const n=ke(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bp(n)?vp(n):Lo(n).O_()&&_p(n,e))}function yp(s,e){const n=ke(s),a=Lo(n);n.Ia.delete(e),a.O_()&&Zb(n,e),n.Ia.size===0&&(a.O_()?a.L_():Ar(n)&&n.Ra.set("Unknown"))}function _p(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(s).Y_(e)}function Zb(s,e){s.Va.Ue(e),Lo(s).Z_(e)}function vp(s){s.Va=new IR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Lo(s).start(),s.Ra.ua()}function bp(s){return Ar(s)&&!Lo(s).x_()&&s.Ia.size>0}function Ar(s){return ke(s).Ea.size===0}function Jb(s){s.Va=void 0}async function jN(s){s.Ra.set("Online")}async function PN(s){s.Ia.forEach(((e,n)=>{_p(s,e)}))}async function LN(s,e){Jb(s),bp(s)?(s.Ra.ha(e),vp(s)):s.Ra.set("Unknown")}async function UN(s,e,n){if(s.Ra.set("Online"),e instanceof jb&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const m of c.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.Ia.delete(m),l.Va.removeTarget(m))})(s,e)}catch(a){fe(_r,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Th(s,a)}else if(e instanceof sh?s.Va.Ze(e):e instanceof Vb?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ce.min()))try{const a=await $b(s.localStore);n.compareTo(a)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=c.Ia.get(_);E&&c.Ia.set(_,E.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,_)=>{const E=c.Ia.get(g);if(!E)return;c.Ia.set(g,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),Zb(c,g);const S=new ba(E.target,g,_,E.sequenceNumber);_p(c,S)})),c.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(a){fe(_r,"Failed to raise snapshot:",a),await Th(s,a)}}async function Th(s,e,n){if(!Po(e))throw e;s.Ea.add(1),await vc(s),s.Ra.set("Offline"),n||(n=()=>$b(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{fe(_r,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Hh(s)}))}function Wb(s,e){return e().catch((n=>Th(s,n,e)))}async function Fh(s){const e=ke(s),n=Da(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ip;for(;zN(e);)try{const l=await EN(e.localStore,a);if(l===null){e.Ta.length===0&&n.L_();break}a=l.batchId,BN(e,l)}catch(l){await Th(e,l)}eE(e)&&tE(e)}function zN(s){return Ar(s)&&s.Ta.length<10}function BN(s,e){s.Ta.push(e);const n=Da(s);n.O_()&&n.X_&&n.ea(e.mutations)}function eE(s){return Ar(s)&&!Da(s).x_()&&s.Ta.length>0}function tE(s){Da(s).start()}async function qN(s){Da(s).ra()}async function HN(s){const e=Da(s);for(const n of s.Ta)e.ea(n.mutations)}async function FN(s,e,n){const a=s.Ta.shift(),l=up.from(a,e,n);await Wb(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Fh(s)}async function GN(s,e){e&&Da(s).X_&&await(async function(a,l){if((function(f){return xR(f)&&f!==Z.ABORTED})(l.code)){const c=a.Ta.shift();Da(a).B_(),await Wb(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Fh(a)}})(s,e),eE(s)&&tE(s)}async function Cv(s,e){const n=ke(s);n.asyncQueue.verifyOperationInProgress(),fe(_r,"RemoteStore received new credentials");const a=Ar(n);n.Ea.add(3),await vc(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hh(n)}async function QN(s,e){const n=ke(s);e?(n.Ea.delete(2),await Hh(n)):e||(n.Ea.add(2),await vc(n),n.Ra.set("Unknown"))}function Lo(s){return s.ma||(s.ma=(function(n,a,l){const c=ke(n);return c.sa(),new CN(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:jN.bind(null,s),t_:PN.bind(null,s),r_:LN.bind(null,s),H_:UN.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),bp(s)?vp(s):s.Ra.set("Unknown")):(await s.ma.stop(),Jb(s))}))),s.ma}function Da(s){return s.fa||(s.fa=(function(n,a,l){const c=ke(n);return c.sa(),new DN(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:qN.bind(null,s),r_:GN.bind(null,s),ta:HN.bind(null,s),na:FN.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Fh(s)):(await s.fa.stop(),s.Ta.length>0&&(fe(_r,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Ep{constructor(e,n,a,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,l,c){const f=Date.now()+a,m=new Ep(e,n,f,l,c);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(s,e){if(Ns("AsyncQueue",`${e}: ${s}`),Po(s))return new ue(Z.UNAVAILABLE,`${e}: ${s}`);throw s}class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Ae.comparator(n.key,a.key):(n,a)=>Ae.comparator(n.key,a.key),this.keyedMap=Hl(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new wo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class Dv{constructor(){this.ga=new Et(Ae.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Mo{constructor(e,n,a,l,c,f,m,g,_){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,a,l,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Mo(e,n,wo.emptySet(n),f,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==a[l].type||!n[l].doc.isEqual(a[l].doc))return!1;return!0}}class $N{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class KN{constructor(){this.queries=kv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const l=ke(n),c=l.queries;l.queries=kv(),c.forEach(((f,m)=>{for(const g of m.Sa)g.onError(a)}))})(this,new ue(Z.ABORTED,"Firestore shutting down"))}}function kv(){return new Tr((s=>Tb(s)),Ph)}async function Ap(s,e){const n=ke(s);let a=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(a=2):(c=new $N,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const m=Tp(f,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(m)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&wp(n)}async function Sp(s,e){const n=ke(s),a=e.query;let l=3;const c=n.queries.get(a);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function YN(s,e){const n=ke(s);let a=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(l)&&(a=!0);f.wa=l}}a&&wp(n)}function XN(s,e,n){const a=ke(s),l=a.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);a.queries.delete(e)}function wp(s){s.Ca.forEach((e=>{e.next()}))}var Om,Mv;(Mv=Om||(Om={})).Ma="default",Mv.Cache="cache";class xp{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new Mo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Om.Cache}}class nE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class ZN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=Ab(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new Dv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,m=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((E,S)=>{const x=l.get(E),P=Lh(this.query,S)?S:null,$=!!x&&this.mutatedKeys.has(x.key),X=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let F=!1;x&&P?x.data.isEqual(P.data)?$!==X&&(a.track({type:3,doc:P}),F=!0):this.su(x,P)||(a.track({type:2,doc:P}),F=!0,(g&&this.eu(P,g)>0||_&&this.eu(P,_)<0)&&(m=!0)):!x&&P?(a.track({type:0,doc:P}),F=!0):x&&!P&&(a.track({type:1,doc:x}),F=!0,(g||_)&&(m=!0)),F&&(P?(f=f.add(P),c=X?c.add(E):c.delete(E)):(f=f.delete(E),c=c.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),c=c.delete(E.key),a.track({type:1,doc:E})}return{tu:f,iu:a,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,S)=>(function(P,$){const X=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:F})}};return X(P)-X($)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(a),l=l??!1;const m=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,_=g!==this.Za;return this.Za=g,f.length!==0||_?{snapshot:new Mo(this.query,e.tu,c,f,e.mutatedKeys,g===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new iE(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new nE(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Rp="SyncEngine";class JN{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class WN{constructor(e){this.key=e,this.hu=!1}}class eI{constructor(e,n,a,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Tr((m=>Tb(m)),Ph),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Ae.comparator),this.Au=new Map,this.Ru=new dp,this.Vu={},this.mu=new Map,this.fu=ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tI(s,e,n=!0){const a=cE(s);let l;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await sE(a,e,n,!0),l}async function nI(s,e){const n=cE(s);await sE(n,e,!0,!1)}async function sE(s,e,n,a){const l=await TN(s.localStore,Hi(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let m;return a&&(m=await iI(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&n&&Xb(s.remoteStore,l),m}async function iI(s,e,n,a,l){s.pu=(S,x,P)=>(async function(X,F,te,ie){let ae=F.view.ru(te);ae.Cs&&(ae=await wv(X.localStore,F.query,!1).then((({documents:I})=>F.view.ru(I,ae))));const ye=ie&&ie.targetChanges.get(F.targetId),ve=ie&&ie.targetMismatches.get(F.targetId)!=null,be=F.view.applyChanges(ae,X.isPrimaryClient,ye,ve);return Vv(X,F.targetId,be.au),be.snapshot})(s,S,x,P);const c=await wv(s.localStore,e,!0),f=new ZN(e,c.Qs),m=f.ru(c.documents),g=_c.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",l),_=f.applyChanges(m,s.isPrimaryClient,g);Vv(s,n,_.au);const E=new JN(e,n,f);return s.Tu.set(e,E),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function sI(s,e,n){const a=ke(s),l=a.Tu.get(e),c=a.Iu.get(l.targetId);if(c.length>1)return a.Iu.set(l.targetId,c.filter((f=>!Ph(f,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await km(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),n&&yp(a.remoteStore,l.targetId),Vm(a,l.targetId)})).catch(jo)):(Vm(a,l.targetId),await km(a.localStore,l.targetId,!0))}async function aI(s,e){const n=ke(s),a=n.Tu.get(e),l=n.Iu.get(a.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),yp(n.remoteStore,a.targetId))}async function rI(s,e,n){const a=dI(s);try{const l=await(function(f,m){const g=ke(f),_=ct.now(),E=m.reduce(((P,$)=>P.add($.key)),Fe());let S,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let $=Is(),X=Fe();return g.Ns.getEntries(P,E).next((F=>{$=F,$.forEach(((te,ie)=>{ie.isValidDocument()||(X=X.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,$))).next((F=>{S=F;const te=[];for(const ie of m){const ae=ER(ie,S.get(ie.key).overlayedDocument);ae!=null&&te.push(new Oa(ie.key,ae,mb(ae.value.mapValue),ai.exists(!0)))}return g.mutationQueue.addMutationBatch(P,_,te,m)})).next((F=>{x=F;const te=F.applyToLocalDocumentSet(S,X);return g.documentOverlayCache.saveOverlays(P,F.batchId,te)}))})).then((()=>({batchId:x.batchId,changes:wb(S)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(f,m,g){let _=f.Vu[f.currentUser.toKey()];_||(_=new Et(He)),_=_.insert(m,g),f.Vu[f.currentUser.toKey()]=_})(a,l.batchId,n),await bc(a,l.changes),await Fh(a.remoteStore)}catch(l){const c=Tp(l,"Failed to persist write");n.reject(c)}}async function aE(s,e){const n=ke(s);try{const a=await vN(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(We(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?We(f.hu,14607):l.removedDocuments.size>0&&(We(f.hu,42227),f.hu=!1))})),await bc(n,a,e)}catch(a){await jo(a)}}function Ov(s,e,n){const a=ke(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const l=[];a.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const g=ke(f);g.onlineState=m;let _=!1;g.queries.forEach(((E,S)=>{for(const x of S.Sa)x.va(m)&&(_=!0)})),_&&wp(g)})(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function oI(s,e,n){const a=ke(s);a.sharedClientState.updateQueryState(e,"rejected",n);const l=a.Au.get(e),c=l&&l.key;if(c){let f=new Et(Ae.comparator);f=f.insert(c,cn.newNoDocument(c,Ce.min()));const m=Fe().add(c),g=new Bh(Ce.min(),new Map,new Et(He),f,m);await aE(a,g),a.du=a.du.remove(c),a.Au.delete(e),Np(a)}else await km(a.localStore,e,!1).then((()=>Vm(a,e,n))).catch(jo)}async function lI(s,e){const n=ke(s),a=e.batch.batchId;try{const l=await _N(n.localStore,e);oE(n,a,null),rE(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await bc(n,l)}catch(l){await jo(l)}}async function cI(s,e,n){const a=ke(s);try{const l=await(function(f,m){const g=ke(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next((S=>(We(S!==null,37113),E=S.keys(),g.mutationQueue.removeMutationBatch(_,S)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>g.localDocuments.getDocuments(_,E)))}))})(a.localStore,e);oE(a,e,n),rE(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await bc(a,l)}catch(l){await jo(l)}}function rE(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function oE(s,e,n){const a=ke(s);let l=a.Vu[a.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function Vm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||lE(s,a)}))}function lE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(yp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Np(s))}function Vv(s,e,n){for(const a of n)a instanceof nE?(s.Ru.addReference(a.key,e),uI(s,a)):a instanceof iE?(fe(Rp,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||lE(s,a.key)):Ne(19791,{wu:a})}function uI(s,e){const n=e.key,a=n.path.canonicalString();s.du.get(n)||s.Eu.has(a)||(fe(Rp,"New document in limbo: "+n),s.Eu.add(a),Np(s))}function Np(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ae(dt.fromString(e)),a=s.fu.next();s.Au.set(a,new WN(n)),s.du=s.du.insert(n,a),Xb(s.remoteStore,new ba(Hi(jh(n.path)),a,"TargetPurposeLimboResolution",Mh.ce))}}async function bc(s,e,n){const a=ke(s),l=[],c=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,g)=>{f.push(a.pu(g,e,n).then((_=>{if((_||n)&&a.isPrimaryClient){const E=_?!_.fromCache:n?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(_){l.push(_);const E=pp.As(g.targetId,_);c.push(E)}})))})),await Promise.all(f),a.Pu.H_(l),await(async function(g,_){const E=ke(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>W.forEach(_,(x=>W.forEach(x.Es,(P=>E.persistence.referenceDelegate.addReference(S,x.targetId,P))).next((()=>W.forEach(x.ds,(P=>E.persistence.referenceDelegate.removeReference(S,x.targetId,P)))))))))}catch(S){if(!Po(S))throw S;fe(gp,"Failed to update sequence numbers: "+S)}for(const S of _){const x=S.targetId;if(!S.fromCache){const P=E.Ms.get(x),$=P.snapshotVersion,X=P.withLastLimboFreeSnapshotVersion($);E.Ms=E.Ms.insert(x,X)}}})(a.localStore,c))}async function hI(s,e){const n=ke(s);if(!n.currentUser.isEqual(e)){fe(Rp,"User change. New user:",e.toKey());const a=await Qb(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new ue(Z.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await bc(n,a.Ls)}}function fI(s,e){const n=ke(s),a=n.Au.get(e);if(a&&a.hu)return Fe().add(a.key);{let l=Fe();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const m=n.Tu.get(f);l=l.unionWith(m.view.nu)}return l}}function cE(s){const e=ke(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=aE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oI.bind(null,e),e.Pu.H_=YN.bind(null,e.eventManager),e.Pu.yu=XN.bind(null,e.eventManager),e}function dI(s){const e=ke(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cI.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return yN(this.persistence,new mN,e.initialUser,this.serializer)}Cu(e){return new Gb(mp.mi,this.serializer)}Du(e){return new SN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class mI extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Eh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new WR(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new Gb((a=>Eh.mi(a,n)),this.serializer)}}class jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Ov(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=hI.bind(null,this.syncEngine),await QN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KN})()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),a=(function(c){return new IN(c)})(e.databaseInfo);return(function(c,f,m,g){return new MN(c,f,m,g)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,l,c,f,m){return new VN(a,l,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ov(this.syncEngine,n,0)),(function(){return Nv.v()?new Nv:new wN})())}createSyncEngine(e,n){return(function(l,c,f,m,g,_,E){const S=new eI(l,c,f,m,g,_);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=ke(n);fe(_r,"RemoteStore shutting down."),a.Ea.add(5),await vc(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jm.provider={build:()=>new jm};class Ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ka="FirestoreClient";class pI{constructor(e,n,a,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=l,this.user=ln.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async f=>{fe(ka,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(a,(f=>(fe(ka,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Tp(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function rm(s,e){s.asyncQueue.verifyOperationInProgress(),fe(ka,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async l=>{a.isEqual(l)||(await Qb(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function jv(s,e){s.asyncQueue.verifyOperationInProgress();const n=await gI(s);fe(ka,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>Cv(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,l)=>Cv(e.remoteStore,l))),s._onlineComponents=e}async function gI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){fe(ka,"Using user provided OfflineComponentProvider");try{await rm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await rm(s,new Ah)}}else fe(ka,"Using default OfflineComponentProvider"),await rm(s,new mI(void 0));return s._offlineComponents}async function uE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(fe(ka,"Using user provided OnlineComponentProvider"),await jv(s,s._uninitializedComponentsProvider._online)):(fe(ka,"Using default OnlineComponentProvider"),await jv(s,new jm))),s._onlineComponents}function yI(s){return uE(s).then((e=>e.syncEngine))}async function Sh(s){const e=await uE(s),n=e.eventManager;return n.onListen=tI.bind(null,e.syncEngine),n.onUnlisten=sI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),n}function _I(s,e,n={}){const a=new Ss;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,g,_){const E=new Ip({next:x=>{E.Nu(),f.enqueueAndForget((()=>Sp(c,S)));const P=x.docs.has(m);!P&&x.fromCache?_.reject(new ue(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&g&&g.source==="server"?_.reject(new ue(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),S=new xp(jh(m.path),E,{includeMetadataChanges:!0,qa:!0});return Ap(c,S)})(await Sh(s),s.asyncQueue,e,n,a))),a.promise}function vI(s,e,n={}){const a=new Ss;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,g,_){const E=new Ip({next:x=>{E.Nu(),f.enqueueAndForget((()=>Sp(c,S))),x.fromCache&&g.source==="server"?_.reject(new ue(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),S=new xp(m,E,{includeMetadataChanges:!0,qa:!0});return Ap(c,S)})(await Sh(s),s.asyncQueue,e,n,a))),a.promise}function hE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Pv=new Map;const fE="firestore.googleapis.com",Lv=!0;class Uv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fE,this.ssl=Lv}else this.host=e.host,this.ssl=e.ssl??Lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZR)throw new ue(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ox("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hE(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,a,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Sx;switch(a.type){case"firstParty":return new Nx(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ue(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=Pv.get(n);a&&(fe("ComponentProvider","Removing Datastore"),Pv.delete(n),a.terminate())})(this),Promise.resolve()}}function bI(s,e,n,a={}){s=yi(s,Gh);const l=br(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;l&&(qm(`https://${m}`),Hm("Firestore",!0)),c.host!==fE&&c.host!==m&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:l,emulatorOptions:a};if(!mr(g,f)&&(s._setSettings(g),a.mockUserToken)){let _,E;if(typeof a.mockUserToken=="string")_=a.mockUserToken,E=ln.MOCK_USER;else{_=D2(a.mockUserToken,s._app?.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new ue(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(S)}s._authCredentials=new wx(new nb(_,E))}}class Sr{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Sr(this.firestore,e,this._query)}}class Ct{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(pc(n,Ct._jsonSchema))return new Ct(e,a||null,new Ae(dt.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:zt("string",Ct._jsonSchemaVersion),referencePath:zt("string")};class wa extends Sr{constructor(e,n,a){super(e,n,jh(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Ae(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function EI(s,e,...n){if(s=bt(s),ib("collection","path",e),s instanceof Gh){const a=dt.fromString(e,...n);return J_(a),new wa(s,null,a)}{if(!(s instanceof Ct||s instanceof wa))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(dt.fromString(e,...n));return J_(a),new wa(s.firestore,null,a)}}function xo(s,e,...n){if(s=bt(s),arguments.length===1&&(e=np.newId()),ib("doc","path",e),s instanceof Gh){const a=dt.fromString(e,...n);return Z_(a),new Ct(s,null,new Ae(a))}{if(!(s instanceof Ct||s instanceof wa))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(dt.fromString(e,...n));return Z_(a),new Ct(s.firestore,s instanceof wa?s.converter:null,new Ae(a))}}const zv="AsyncQueue";class Bv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kb(this,"async_queue_retry"),this._c=()=>{const a=am();a&&fe(zv,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;fe(zv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Ns("INTERNAL UNHANDLED ERROR: ",qv(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Ep.createAndSchedule(this,e,n,a,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ne(47125,{Pc:qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function Hv(s){return(function(n,a){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of a)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class vr extends Gh{constructor(e,n,a,l){super(e,n,a,l),this.type="firestore",this._queue=new Bv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bv(e),this._firestoreClient=void 0,await e}}}function TI(s,e){const n=typeof s=="object"?s:Qm(),a=typeof s=="string"?s:ph,l=Nh(n,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=a1("firestore");c&&bI(l,...c)}return l}function Ec(s){if(s._terminated)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||AI(s),s._firestoreClient}function AI(s){const e=s._freezeSettings(),n=(function(l,c,f,m){return new Gx(l,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,hE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new pI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(nn.fromBase64String(e))}catch(n){throw new ue(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new si(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pc(e,si._jsonSchema))return si.fromBase64String(e.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:zt("string",si._jsonSchemaVersion),bytes:zt("string")};class Qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $h{constructor(e){this._methodName=e}}class Gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(pc(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:zt("string",Gi._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};class Qi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pc(e,Qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Qi(e.vectorValues);throw new ue(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:zt("string",Qi._jsonSchemaVersion),vectorValues:zt("object")};const SI=/^__.*__$/;class wI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}class dE{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Oa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:s})}}class Cp{constructor(e,n,a,l,c,f){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mE(this.Ac)&&SI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||qh(e)}Cc(e,n,a,l=!1){return new Cp({Ac:e,methodName:n,Dc:a,path:tn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dp(s){const e=s._freezeSettings(),n=qh(s._databaseId);return new xI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function pE(s,e,n,a,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);Mp("Data must be an object, but it was:",f,a);const m=gE(a,f);let g,_;if(c.merge)g=new Ln(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const E=[];for(const S of c.mergeFields){const x=Pm(e,S,n);if(!f.contains(x))throw new ue(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_E(E,x)||E.push(x)}g=new Ln(E),_=f.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,_=f.fieldTransforms;return new wI(new xn(m),g,_)}class Kh extends $h{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}class kp extends $h{_toFieldTransform(e){return new yR(e.path,new rc)}isEqual(e){return e instanceof kp}}function RI(s,e,n,a){const l=s.Cc(1,e,n);Mp("Data must be an object, but it was:",l,a);const c=[],f=xn.empty();Ma(a,((g,_)=>{const E=Op(e,g,n);_=bt(_);const S=l.yc(E);if(_ instanceof Kh)c.push(E);else{const x=Tc(_,S);x!=null&&(c.push(E),f.set(E,x))}}));const m=new Ln(c);return new dE(f,m,l.fieldTransforms)}function NI(s,e,n,a,l,c){const f=s.Cc(1,e,n),m=[Pm(e,a,n)],g=[l];if(c.length%2!=0)throw new ue(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)m.push(Pm(e,c[x])),g.push(c[x+1]);const _=[],E=xn.empty();for(let x=m.length-1;x>=0;--x)if(!_E(_,m[x])){const P=m[x];let $=g[x];$=bt($);const X=f.yc(P);if($ instanceof Kh)_.push(P);else{const F=Tc($,X);F!=null&&(_.push(P),E.set(P,F))}}const S=new Ln(_);return new dE(E,S,f.fieldTransforms)}function II(s,e,n,a=!1){return Tc(n,s.Cc(a?4:3,e))}function Tc(s,e){if(yE(s=bt(s)))return Mp("Unsupported field value:",e,s),gE(s,e);if(s instanceof $h)return(function(a,l){if(!mE(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,l){const c=[];let f=0;for(const m of a){let g=Tc(m,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(s,e)}return(function(a,l){if((a=bt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return mR(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=ct.fromDate(a);return{timestampValue:bh(l.serializer,c)}}if(a instanceof ct){const c=new ct(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:bh(l.serializer,c)}}if(a instanceof Gi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof si)return{bytesValue:Pb(l.serializer,a._byteString)};if(a instanceof Ct){const c=l.databaseId,f=a.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:fp(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Qi)return(function(f,m){return{mapValue:{fields:{[fb]:{stringValue:db},[gh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return lp(m.serializer,_)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${kh(a)}`)})(s,e)}function gE(s,e){const n={};return rb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(s,((a,l)=>{const c=Tc(l,e.mc(a));c!=null&&(n[a]=c)})),{mapValue:{fields:n}}}function yE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ct||s instanceof Gi||s instanceof si||s instanceof Ct||s instanceof $h||s instanceof Qi)}function Mp(s,e,n){if(!yE(n)||!sb(n)){const a=kh(n);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function Pm(s,e,n){if((e=bt(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return Op(s,e);throw wh("Field path arguments must be of type string or ",s,!1,void 0,n)}const CI=new RegExp("[~\\*/\\[\\]]");function Op(s,e,n){if(e.search(CI)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Qh(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function wh(s,e,n,a,l){const c=a&&!a.isEmpty(),f=l!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${a}`),f&&(g+=` in document ${l}`),g+=")"),new ue(Z.INVALID_ARGUMENT,m+s+g)}function _E(s,e){return s.some((n=>n.isEqual(e)))}class vE{constructor(e,n,a,l,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DI extends vE{data(){return super.data()}}function bE(s,e){return typeof e=="string"?Op(s,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}function EE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ue(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vp{}class kI extends Vp{}function om(s,e,...n){let a=[];e instanceof Vp&&a.push(e),a=a.concat(n),(function(c){const f=c.filter((g=>g instanceof Pp)).length,m=c.filter((g=>g instanceof jp)).length;if(f>1||f>0&&m>0)throw new ue(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)s=l._apply(s);return s}class jp extends kI{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new jp(e,n,a)}_apply(e){const n=this._parse(e);return TE(e._query,n),new Sr(e.firestore,e.converter,xm(e._query,n))}_parse(e){const n=Dp(e.firestore);return(function(c,f,m,g,_,E,S){let x;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ue(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Gv(S,E);const $=[];for(const X of S)$.push(Fv(g,c,X));x={arrayValue:{values:$}}}else x=Fv(g,c,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Gv(S,E),x=II(m,f,S,E==="in"||E==="not-in");return Ut.create(_,E,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Pp extends Vp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pp(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const m=c.getFlattenedFilters();for(const g of m)TE(f,g),f=xm(f,g)})(e._query,n),new Sr(e.firestore,e.converter,xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Fv(s,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new ue(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eb(e)&&n.indexOf("/")!==-1)throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(dt.fromString(n));if(!Ae.isDocumentKey(a))throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return rv(s,new Ae(a))}if(n instanceof Ct)return rv(s,n._key);throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(n)}.`)}function Gv(s,e){if(!Array.isArray(s)||s.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TE(s,e){const n=(function(l,c){for(const f of l)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MI{convertValue(e,n="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Ma(e,((l,c)=>{a[l]=this.convertValue(c,n)})),a}convertVectorValue(e){const n=e.fields?.[gh].arrayValue?.values?.map((a=>It(a.doubleValue)));return new Qi(n)}convertGeoPoint(e){return new Gi(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Vh(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const n=Na(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=dt.fromString(e);We(Hb(a),9688,{name:e});const l=new sc(a.get(1),a.get(3)),c=new Ae(a.popFirst(5));return l.isEqual(n)||Ns(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function AE(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class Gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fr extends vE{constructor(e,n,a,l,c,f){super(e,n,a,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(bE("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fr._jsonSchemaVersion="firestore/documentSnapshot/1.0",fr._jsonSchema={type:zt("string",fr._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class ah extends fr{data(e={}){return super.data(e)}}class dr{constructor(e,n,a,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Gl(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new ah(this._firestore,this._userDataWriter,a.key,a,new Gl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const g=new ah(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Gl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new ah(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Gl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,E=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:OI(m.type),doc:g,oldIndex:_,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:s})}}function VI(s){s=yi(s,Ct);const e=yi(s.firestore,vr);return _I(Ec(e),s._key).then((n=>wE(e,s,n)))}dr._jsonSchemaVersion="firestore/querySnapshot/1.0",dr._jsonSchema={type:zt("string",dr._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class Lp extends MI{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Qv(s){s=yi(s,Sr);const e=yi(s.firestore,vr),n=Ec(e),a=new Lp(e);return EE(s._query),vI(n,s._query).then((l=>new dr(e,a,s,l)))}function Ro(s,e,n){s=yi(s,Ct);const a=yi(s.firestore,vr),l=AE(s.converter,e,n);return SE(a,[pE(Dp(a),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,ai.none())])}function jI(s,...e){s=bt(s);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Hv(e[a])||(n=e[a++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Hv(e[a])){const g=e[a];e[a]=g.next?.bind(g),e[a+1]=g.error?.bind(g),e[a+2]=g.complete?.bind(g)}let c,f,m;if(s instanceof Ct)f=yi(s.firestore,vr),m=jh(s._key.path),c={next:g=>{e[a]&&e[a](wE(f,s,g))},error:e[a+1],complete:e[a+2]};else{const g=yi(s,Sr);f=yi(g.firestore,vr),m=g._query;const _=new Lp(f);c={next:E=>{e[a]&&e[a](new dr(f,_,g,E))},error:e[a+1],complete:e[a+2]},EE(s._query)}return(function(_,E,S,x){const P=new Ip(x),$=new xp(E,P,S);return _.asyncQueue.enqueueAndForget((async()=>Ap(await Sh(_),$))),()=>{P.Nu(),_.asyncQueue.enqueueAndForget((async()=>Sp(await Sh(_),$)))}})(Ec(f),m,l,c)}function SE(s,e){return(function(a,l){const c=new Ss;return a.asyncQueue.enqueueAndForget((async()=>rI(await yI(a),l,c))),c.promise})(Ec(s),e)}function wE(s,e,n){const a=n.docs.get(e._key),l=new Lp(s);return new fr(s,l,e._key,a,new Gl(n.hasPendingWrites,n.fromCache),e.converter)}class PI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dp(e)}set(e,n,a){this._verifyNotCommitted();const l=lm(e,this._firestore),c=AE(l.converter,n,a),f=pE(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,a);return this._mutations.push(f.toMutation(l._key,ai.none())),this}update(e,n,a,...l){this._verifyNotCommitted();const c=lm(e,this._firestore);let f;return f=typeof(n=bt(n))=="string"||n instanceof Qh?NI(this._dataReader,"WriteBatch.update",c._key,n,a,l):RI(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,ai.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=lm(e,this._firestore);return this._mutations=this._mutations.concat(new cp(n._key,ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lm(s,e){if((s=bt(s)).firestore!==e)throw new ue(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Lm(){return new kp("serverTimestamp")}function Um(s){return Ec(s=yi(s,vr)),new PI(s,(e=>SE(s,e)))}(function(e,n=!0){(function(l){Vo=l})(Oo),pr(new xa("firestore",((a,{instanceIdentifier:l,options:c})=>{const f=a.getProvider("app").getImmediate(),m=new vr(new xx(a.getProvider("auth-internal")),new Ix(f,a.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ue(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(_.options.projectId,E)})(f,l),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Ui($_,K_,e),Ui($_,K_,"esm2020")})();var LI="firebase",UI="12.7.0";Ui(LI,UI,"app");const xE="functions";class zI{constructor(e,n,a,l){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||a.get().then(c=>this.messaging=c,()=>{}),this.appCheck||l?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),a=await this.getMessagingToken(),l=await this.getAppCheckToken(e);return{authToken:n,messagingToken:a,appCheckToken:l}}}const zm="us-central1";class BI{constructor(e,n,a,l,c=zm,f=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=f,this.emulatorOrigin=null,this.contextProvider=new zI(e,n,a,l),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(c);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=zm}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function qI(s,e,n){const a=br(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${n}`,a&&(qm(s.emulatorOrigin+"/backends"),Hm("Functions",!0))}const $v="@firebase/functions",Kv="0.13.1";const HI="auth-internal",FI="app-check-internal",GI="messaging-internal";function QI(s){const e=(n,{instanceIdentifier:a})=>{const l=n.getProvider("app").getImmediate(),c=n.getProvider(HI),f=n.getProvider(GI),m=n.getProvider(FI);return new BI(l,c,f,m,a)};pr(new xa(xE,e,"PUBLIC").setMultipleInstances(!0)),Ui($v,Kv,s),Ui($v,Kv,"esm2020")}function $I(s=Qm(),e=zm){const a=Nh(bt(s),xE).getImmediate({identifier:e}),l=a1("functions");return l&&KI(a,...l),a}function KI(s,e,n){qI(bt(s),e,n)}QI();let YI=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyDTcSIPkEt2dtyAmlcC1xFVuZ68e8y1SKM",authDomain:"momentum-fitness-ai.firebaseapp.com",projectId:"momentum-fitness-ai",storageBucket:"momentum-fitness-ai.firebasestorage.app",messagingSenderId:"335276198384",appId:"1:335276198384:web:ac58a4771d605892203535",measurementId:"G-9DJX8R1NX8"},Yu,bs,Ea,XI;try{Yu=u1(YI),bs=Tx(Yu),Ea=TI(Yu),XI=$I(Yu,"us-central1")}catch(s){console.error("Critical Error initializing Firebase:",s)}const xh={es:{lang:"es",online:"Online",guest:"Invitado",appTitle:"Momentum AI",routineInProgress:"Rutina en Curso",errorAuth:"Error de autenticacin",errorSave:"Error al guardar",errorHistorySave:"Error al guardar el historial. La sesin no se ha registrado.",errorInvalidCreds:"Credenciales invlidas.",errorEmailInUse:"El email ya est en uso.",tabTraining:"Entrenamiento",tabHistory:"Historial",tabProfile:"Perfil",signIn:"Iniciar Sesin",signUp:"Registrarse",signOut:"Cerrar Sesin",signInGuest:"Entrar como Invitado",emailPlaceholder:"correo@ejemplo.com",passwordPlaceholder:"Contrasea",passRequirementLength:"Mnimo 6 caracteres",passRequirementUpper:"Contiene una mayscula",passRequirementNumber:"Contiene un nmero",forgotPassword:"Olvidaste tu contrasea?",resetPassword:"Restablecer Contrasea",resetPasswordPrompt:"Introduce tu email para recibir un enlace de recuperacin.",resetEmailSentTitle:"Correo Enviado",resetEmailSentMessage:"Revisa tu bandeja de entrada para restablecer tu contrasea.",backToLogin:"Volver a Iniciar Sesin",saveAccountPrompt:"Guarda tu Progreso",saveAccountMessage:"Crea una cuenta para guardar tus datos y acceder desde cualquier dispositivo.",saveAccountButton:"Guardar Cuenta",signOutGuestTitle:"Atencin!",signOutGuestMessage:"Ests usando una cuenta de invitado. Si cierras sesin, perders todo tu progreso. Deseas guardar tu cuenta antes de salir?",signOutAndLoseData:"Salir y Perder Datos",accountLinkedTitle:"Cuenta Guardada!",accountLinkedMessage:"Tu progreso ha sido vinculado a tu correo. Ahora tu cuenta es permanente.",bioageTitle:"Perfil Avanzado (Bioage)",bioageSubtitle:"Biometra Clnica & Estructural",bioageDesc:"Datos opcionales para aumentar precisin de generacin de rutina.",structuralIntegrity:"Integridad Estructural",metabolicHealth:"Salud Metablica",clinicalAnalysis:"Anlisis Bioage",detectedRisks:"Reglas de Ajuste Activadas",healthyStatus:"Perfil equilibrado. Sin contraindicaciones estructurales detectadas.",calcBioAge:"Calcular Edad Biolgica",bioAgeResult:"Edad Biolgica Estimada",realAge:"Cronolgica",bioAgeAnalysis:"Anlisis de Longevidad",cycleTitle:"Salud Femenina (CycleSync)",cycleSubtitle:"Adaptacin al Ciclo Menstrual",lastPeriod:"Fecha ltima Menstruacin",cycleLength:"Duracin Ciclo (das)",phase:"Fase Actual",menstrual:"Menstrual",follicular:"Folicular",ovulation:"Ovulacin",luteal:"Ltea",phaseDesc:"Impacto en el Entrenamiento",tt_sq1rm:"Mximo peso para 1 repeticin en Sentadilla.",tt_bp1rm:"Mximo peso para 1 repeticin en Banca.",tt_pullups:"Mximas repeticiones estrictas.",tt_pushups:"Mximas flexiones estrictas.",tt_plank:"Tiempo mximo manteniendo postura perfecta.",tt_waist:"Circunferencia a nivel del ombligo.",tt_vo2:"Volumen mximo de oxgeno.",tt_rhr:"Pulsaciones nada ms despertar.",tt_hrr:"Pulsaciones que bajan 1 min despus de esfuerzo mximo.",generating:"Generando...",analyzing:"Analizando Biometra...",designing:"Diseando Terapia...",optimizing:"Optimizando Cargas...",finalizing:"Finalizando Plan...",processing:"Procesando...",weeklyProgress:"Progreso Semanal",generalView:"Vista General",weeklyPlan:"Plan Semanal",startRoutine:"COMENZAR",goalMet:"Objetivo Cumplido",progressReg:"Progreso registrado.",activeRecovery:"Recuperacin Activa",restVital:"El descanso es vital.",regenerateCycle:"Regenerar Ciclo",noPlan:"Sin plan semanal",adjustSession:"Ajuste de Sesin",modify:"Modificar:",focusZone:"Zona de Enfoque",timeAvailable:"Tiempo Disponible (min)",modality:"Modalidad",noEquipment:"Entrenamiento sin equipo",recalcParams:"Recalcular Parmetros",activeSession:"Sesin Activa",recovery:"Recuperacin",notes:"Notas",finishSession:"Finalizar Sesin",easy:"Fcil",good:"Adecuado",hard:"Difcil",hide:"OCULTAR",viewTech:"Ver Tcnica",series:"Serie",reps:"Reps",load:"Carga",superset:"Superserie",completed:"Completado",noRecords:"No hay registros previos.",biometrics:"Datos Bsicos",gender:"Gnero",age:"Edad",height:"Altura (cm)",weight:"Peso (kg)",bodyFat:"% Grasa (Opcional)",muscleMass:"% Msculo (Opcional)",customFocus:"Enfoque personalizado",mainGoal:"Objetivo Principal",expLevel:"Nivel Experiencia",daysWeek:"Das/Semana",injuries:"Lesiones / Limitaciones",saveFile:"Guardar Expediente",dataManagement:"Gestin de Datos",export:"Exportar",pasteJson:"Pegar JSON",uploadFile:"Cargar Archivo",phNotes:"Reporte de dolor, sensaciones o ajustes necesarios...",phInjuries:"Ej. Menisco rodilla derecha...",male:"Hombre",female:"Mujer",goalFat:"Perder Grasa / Metabolismo",goalMuscle:"Hipertrofia / Fuerza",goalStrength:"Fuerza Mxima",goalCardio:"Resistencia Cardio",expBeginner:"Principiante (0-6 meses)",expInter:"Intermedio (6m - 2y)",expAdvanced:"Avanzado (+2y)",msgPlanGen:"Nuevo plan teraputico generado!",msgSessionUpd:"Sesin clnica actualizada.",msgSessionReg:"Sesin completada y registrada.",msgBonusReg:"Entreno Bonus registrado!",msgProfileSaved:"Expediente guardado correctamente.",msgImported:"Datos importados.",importData:"Importar Datos",exportData:"Exportar Datos",copyBackup:"Copia de Seguridad",copied:"Copiado",copyToClip:"Copiar al Portapapeles",importBtn:"Importar",cancel:"Cancelar",smashSet:"TERMINAR SERIE",nextEx:"SIGUIENTE",prevEx:"ANTERIOR",finishWorkout:"TERMINAR",letsGo:"A DARLE!",restTimer:"DESCANSO",rateEffort:"Cmo sentiste el esfuerzo?",rateA1:"Esfuerzo Ejercicio 1",rateA2:"Esfuerzo Ejercicio 2",warmupTitle:"Calentamiento",warmupDesc:"Prepara tu cuerpo",startMain:"EMPEZAR RUTINA",cooldownTitle:"Enfriamiento",cooldownDesc:"Vuelta a la calma",finishComplete:"FINALIZAR SESIN",paused:"PAUSA"},en:{lang:"en",online:"Online",guest:"Guest",appTitle:"Momentum AI",routineInProgress:"Routine in Progress",errorAuth:"Authentication error",errorSave:"Error saving data",errorHistorySave:"Error saving history. The session was not recorded.",errorInvalidCreds:"Invalid credentials.",errorEmailInUse:"Email is already in use.",tabTraining:"Training",tabHistory:"History",tabProfile:"Profile",signIn:"Sign In",signUp:"Sign Up",signOut:"Sign Out",signInGuest:"Sign In as Guest",emailPlaceholder:"email@example.com",passwordPlaceholder:"Password",passRequirementLength:"At least 6 characters",passRequirementUpper:"Contains an uppercase letter",passRequirementNumber:"Contains a number",forgotPassword:"Forgot your password?",resetPassword:"Reset Password",resetPasswordPrompt:"Enter your email to receive a recovery link.",resetEmailSentTitle:"Email Sent",resetEmailSentMessage:"Check your inbox to reset your password.",backToLogin:"Back to Sign In",saveAccountPrompt:"Save Your Progress",saveAccountMessage:"Create an account to save your data and access it from any device.",saveAccountButton:"Save Account",signOutGuestTitle:"Warning!",signOutGuestMessage:"You are using a guest account. If you sign out, you will lose all your progress. Would you like to save your account before exiting?",signOutAndLoseData:"Sign Out & Lose Data",accountLinkedTitle:"Account Saved!",accountLinkedMessage:"Your progress has been linked to your email. Your account is now permanent.",bioageTitle:"Advanced Profile (Bioage)",bioageSubtitle:"Clinical & Structural Biometrics",bioageDesc:"Optional data to increase routine generation accuracy.",structuralIntegrity:"Structural Integrity",metabolicHealth:"Metabolic Health",clinicalAnalysis:"Bioage Analysis",detectedRisks:"Adjustment Rules Activated",healthyStatus:"Balanced profile. No structural contraindications detected.",calcBioAge:"Calculate Biological Age",bioAgeResult:"Estimated Biological Age",realAge:"Chronological",bioAgeAnalysis:"Longevity Analysis",cycleTitle:"Female Health (CycleSync)",cycleSubtitle:"Adaptation to Menstrual Cycle",lastPeriod:"Last Period Date",cycleLength:"Cycle Length (days)",phase:"Current Phase",menstrual:"Menstrual",follicular:"Follicular",ovulation:"Ovulation",luteal:"Luteal",phaseDesc:"Impact on Training",tt_sq1rm:"Maximum weight for 1 repetition in Squat.",tt_bp1rm:"Maximum weight for 1 repetition in Bench Press.",tt_pullups:"Maximum strict pull-ups.",tt_pushups:"Maximum strict push-ups.",tt_plank:"Maximum time holding a perfect plank.",tt_waist:"Circumference at navel level.",tt_vo2:"Maximum volume of oxygen.",tt_rhr:"Heart rate upon waking.",tt_hrr:"Heart rate drop 1 min after maximum effort.",generating:"Generating...",analyzing:"Analyzing Biometrics...",designing:"Designing Therapy...",optimizing:"Optimizing Loads...",finalizing:"Finalizing Plan...",processing:"Processing...",weeklyProgress:"Weekly Progress",generalView:"General View",weeklyPlan:"Weekly Plan",startRoutine:"START",goalMet:"Goal Achieved",progressReg:"Progress registered.",activeRecovery:"Active Recovery",restVital:"Rest is vital.",regenerateCycle:"Regenerate Cycle",noPlan:"No weekly plan",adjustSession:"Session Adjustment",modify:"Modify:",focusZone:"Focus Zone",timeAvailable:"Time Available (min)",modality:"Modality",noEquipment:"No-equipment training",recalcParams:"Recalculate Parameters",activeSession:"Active Session",recovery:"Recovery",notes:"Notes",finishSession:"Finish Session",easy:"Easy",good:"Good",hard:"Hard",hide:"HIDE",viewTech:"View Technique",series:"Set",reps:"Reps",load:"Load",superset:"Superset",completed:"Completed",noRecords:"No previous records.",biometrics:"Basic Data",gender:"Gender",age:"Age",height:"Height (cm)",weight:"Weight (kg)",bodyFat:"% Fat (Optional)",muscleMass:"% Muscle (Optional)",customFocus:"Custom Focus",mainGoal:"Main Goal",expLevel:"Experience Level",daysWeek:"Days/Week",injuries:"Injuries / Limitations",saveFile:"Save File",dataManagement:"Data Management",export:"Export",pasteJson:"Paste JSON",uploadFile:"Upload File",phNotes:"Report pain, sensations, or necessary adjustments...",phInjuries:"e.g., Right knee meniscus...",male:"Male",female:"Female",goalFat:"Fat Loss / Metabolism",goalMuscle:"Hypertrophy / Strength",goalStrength:"Max Strength",goalCardio:"Cardio Endurance",expBeginner:"Beginner (0-6 months)",expInter:"Intermediate (6m - 2y)",expAdvanced:"Advanced (+2y)",msgPlanGen:"New therapeutic plan generated!",msgSessionUpd:"Clinical session updated.",msgSessionReg:"Session completed and registered.",msgBonusReg:"Bonus workout registered!",msgProfileSaved:"File saved successfully.",msgImported:"Data imported.",importData:"Import Data",exportData:"Export Data",copyBackup:"Backup Copy",copied:"Copied",copyToClip:"Copy to Clipboard",importBtn:"Import",cancel:"Cancelar",smashSet:"FINISH SET",nextEx:"NEXT",prevEx:"PREVIOUS",finishWorkout:"FINISH",letsGo:"LET'S GO!",restTimer:"REST",rateEffort:"How did you feel the effort?",rateA1:"Effort Exercise 1",rateA2:"Effort Exercise 2",warmupTitle:"Warm-up",warmupDesc:"Prepare your body",startMain:"START ROUTINE",cooldownTitle:"Cool-down",cooldownDesc:"Return to calm",finishComplete:"FINISH SESSION",paused:"PAUSED"}},ZI=(s,e)=>{let n=60;const a=s?.mainGoal||"";if(a.includes("Fuerza")||a.includes("Strength")?n=180:a.includes("Hipertrofia")||a.includes("Hypertrophy")?n=90:(a.includes("Grasa")||a.includes("Cardio")||a.includes("Fat"))&&(n=45),e?.tipo_bloque==="superserie"&&(a.includes("Fuerza")||a.includes("Strength")?n=180:n=60),e?.tipo_bloque!=="superserie"){const l=parseFloat(s?.bioage?.hrr)||0,c=parseFloat(s?.bioage?.vo2max)||0;l>30&&c>45&&(n-=15)}return Math.max(30,n)},JI=(s,e=28)=>{if(!s)return null;const n=new Date(s);if(isNaN(n.getTime()))return null;const l=Math.abs(new Date-n),f=Math.ceil(l/(1e3*60*60*24))%e||e;return f>=1&&f<=5?{phase:"menstrual",day:f,label:"Menstrual",desc:"Energa baja. Recuperacin."}:f>=6&&f<=13?{phase:"follicular",day:f,label:"Folicular",desc:"Energa alta. Fuerza."}:f>=14&&f<=16?{phase:"ovulation",day:f,label:"Ovulacin",desc:"Pico de Fuerza."}:{phase:"luteal",day:f,label:"Ltea",desc:"Energa moderada."}},WI=s=>{const e=Math.floor(s/60),n=s%60;return`${e}:${n.toString().padStart(2,"0")}`},Es=s=>{if(!s)return"";let e=s,n;const a=/^(?:Superserie:?|Serie\s?\w+|[A-Z]\d+[:.)-]?|[A-Z][:.)-]|\d+[:.)-])\s*/i;do n=e,e=e.replace(a,"").replace(/^[A-Z]\d+\s+/,"").trim();while(e!==n&&e.length>0);return e},RE=s=>{if(!s)return"Entrenamiento";let e=s.replace(/^(?:Lunes|Martes|Mircoles|Miercoles|Jueves|Viernes|Sbado|Sabado|Domingo)(?:\s*[:,-])?\s*/i,"");return e=e.replace(/^(?:Da|Dia)\s*\d+\s*[:,-]?\s*/i,""),e.trim()||"Entrenamiento"},cm=s=>{if(!s)return"--";let e=s.replace(/segundos?|segun\w*/gi,"seg").replace(/minutos?|mins?/gi,"min");if(/min|seg|sec|m\b|s\b/i.test(e))return e.substring(0,8);const n=e.match(/\d+/);return n?n[0]:"--"},um=s=>{if(!s||/PC|Bodyweight/i.test(s))return"BW";if(s.includes("%")||/Nvl/i.test(s))return s.substring(0,6);const e=s.match(/[\d.]+/);return e?`${e[0]} kg`:"BW"},NE={type:"OBJECT",properties:{tipo_bloque:{type:"STRING",enum:["normal","superserie"]},ejercicio:{type:"STRING"},tecnica_general:{type:"STRING"},componentes:{type:"ARRAY",items:{type:"OBJECT",properties:{numero_serie:{type:"INTEGER"},repeticiones_ejercicio:{type:"STRING"},carga_sugerida:{type:"STRING"},repeticiones_ejercicioA:{type:"STRING"},carga_sugeridaA:{type:"STRING"},repeticiones_ejercicioB:{type:"STRING"},carga_sugeridaB:{type:"STRING"},completado:{type:"BOOLEAN",default:!1}},required:["numero_serie"]}}},required:["tipo_bloque","ejercicio","componentes","tecnica_general"]},eC="AIzaSyC168hQr_3MAlid9sSwOFAKxim0kCg4F5w";async function Up(s){const{userQuery:e,contextType:n,profile:a,historyContext:l,language:c,extraConstraints:f,schema:m,responseKey:g}=s,_=c==="en"?"RESPOND IN ENGLISH.":"RESPONDE EN ESPAOL.",E=a.bioage||{},S=parseFloat(a.weight)||70,x=parseFloat(E.sq1rm)||0,P=x>0?x:Math.round(S*(a.gender==="Hombre"?1.2:.8));let $="";if(n==="BIOAGE_ANALYSIS")$=`Eres Especialista Clnico. ${_}. Calcula edad biolgica basada en ${a.age} aos, VO2Max ${E.vo2max}, Fuerza ${E.sq1rm}. Si faltan datos, estima con lo disponible.`;else{const te=[];x>1.5*S&&E.plank>0&&E.plank<45&&te.push("RIESGO LUMBAR (Fuerza > Estabilidad): Sustituir Sentadilla pesada por variantes unilaterales.");const ie=a.gender==="Hombre"?15:10;E.pushups>0&&E.pushups<ie&&te.push("DFICIT RESISTENCIA EMPUJE: Priorizar volumen en empuje.");const ae=te.length>0?`
[CLINICAL]:
${te.map(ve=>`- ${ve}`).join(`
`)}`:`
[Clinical]: Healthy.`,ye=Array.isArray(l)?l.join(`
`):l||"No history.";$=`Eres "FitCoach AI". ${_}
        Atleta: ${a.gender}, ${a.age} aos, ${S}kg.
        Lesiones: ${a.injuries||"Ninguna"}.
        Fuerza Base (Est): Squat ${P} kg.
        Meta: ${a.mainGoal}.
        Tiempo Disponible: ${a.timeAvailable} min.
        ${ae}
        Historial: ${ye}
        ${f||""}
        INSTRUCCIN: La duracin total debe ser cercana a ${a.timeAvailable} minutos.
        REGLAS: 
        1. Nombres descriptivos y completos (ej: "Sentadilla (Goblet)" en vez de "Sentadilla").
        2. SUPERSERIES: Campo "ejercicio" DEBE usar formato "A1: [Nombre] + A2: [Nombre]".
        3. Carga en kg, Reps numricas. JSON Estricto.`}const X=[{version:"v1beta",model:"gemini-2.5-flash-preview-09-2025"},{version:"v1beta",model:"gemini-1.5-flash"},{version:"v1beta",model:"gemini-1.5-flash-latest"},{version:"v1beta",model:"gemini-1.5-pro"},{version:"v1",model:"gemini-pro"}];let F=null;for(const te of X){const{version:ie,model:ae}=te,ye=`https://generativelanguage.googleapis.com/${ie}/models/${ae}:generateContent?key=${eC}`;let ve={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.7}};ie==="v1beta"?(ve.systemInstruction={parts:[{text:$}]},ve.generationConfig.responseMimeType="application/json",m&&(ve.generationConfig.responseSchema=m)):ve.contents[0].parts[0].text=`${$}

User Request: ${e}

RESPOND STRICTLY IN JSON.`;try{console.log(`Attempting Client-Side AI call: ${ie}/${ae}`);const be=await fetch(ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(!be.ok){const D=await be.text(),V=`Gemini API Error ${be.status} for ${ie}/${ae}: ${D}`;console.warn(V),F=new Error(V);continue}const w=(await be.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!w)throw new Error("AI returned empty response.");let R=w;R.includes("```json")?R=R.split("```json")[1].split("```")[0]:R.includes("```")&&(R=R.split("```")[1].split("```")[0]);const M=JSON.parse(R);return g?M[g]:M}catch(be){console.error(`Error with ${ie}/${ae}:`,be),F=be}}throw F||new Error("All AI models failed. Please check API Key permissions.")}async function tC(s,e,n){const a=`Genera un nuevo plan semanal de ${s.daysPerWeek} das.`;return await Up({userQuery:a,contextType:"WEEKLY_PLAN",profile:s,historyContext:e,language:n,schema:{type:"OBJECT",properties:{planSemanal:{type:"ARRAY",items:{type:"OBJECT",properties:{diaEnfoque:{type:"STRING"},descripcionBreve:{type:"STRING"},duracionEstimada:{type:"STRING"},calentamiento:{type:"STRING"},rutinaPrincipal:{type:"ARRAY",items:NE},enfriamiento:{type:"STRING"},consejoPro:{type:"STRING"}},required:["diaEnfoque","descripcionBreve","rutinaPrincipal","enfriamiento","consejoPro","duracionEstimada"]}}}},responseKey:"planSemanal"})}async function nC(s,e,n,a){const{newFocus:l,newTime:c,noEquipment:f}=n,m=`Nuevo Enfoque: ${l}. TIEMPO: ${c} min. ${f?"Sin Equipo":"Con Equipo"}.`,g={...s,timeAvailable:c},_=`Ajusta esta rutina: ${JSON.stringify(e)}.`;return await Up({userQuery:_,contextType:"SESSION_ADJUSTMENT",profile:g,historyContext:[],language:a,extraConstraints:m,schema:{type:"OBJECT",properties:{diaEnfoque:{type:"STRING"},descripcionBreve:{type:"STRING"},duracionEstimada:{type:"STRING"},calentamiento:{type:"STRING"},rutinaPrincipal:{type:"ARRAY",items:NE},enfriamiento:{type:"STRING"},consejoPro:{type:"STRING"}},required:["diaEnfoque","rutinaPrincipal"]}})}async function iC(s,e){return await Up({userQuery:"Analiza mi edad biolgica",contextType:"BIOAGE_ANALYSIS",profile:s,language:e,schema:{type:"OBJECT",properties:{edadBiologica:{type:"INTEGER"},diferencia:{type:"INTEGER"},evaluacion:{type:"STRING"}},required:["edadBiologica","evaluacion"]}})}const IE=(typeof __app_id<"u"?__app_id:"momentum-fitness-ai").replace(/[\/.]/g,"_"),sC=s=>{const[e,n]=ee.useState(null),[a,l]=ee.useState(!1),[c,f]=ee.useState(!1),[m,g]=ee.useState(null);ee.useEffect(()=>{const X=uw(bs,F=>{n(F?F.uid:null),l(F?F.isAnonymous:!1),f(!0)});return()=>X()},[]);const _=ee.useCallback(async(X,F)=>{g(null);try{await ow(bs,X,F)}catch(te){console.error("Sign-in error:",te.code),["auth/user-not-found","auth/wrong-password","auth/invalid-credential"].includes(te.code)?g(s.errorInvalidCreds):g(s.errorAuth)}},[s]),E=ee.useCallback(async(X,F)=>{g(null);try{await rw(bs,X,F)}catch(te){console.error("Sign-up error:",te.code),g(te.code==="auth/email-already-in-use"?s.errorEmailInUse:s.errorAuth)}},[s]),S=ee.useCallback(async()=>{g(null);try{await WS(bs)}catch(X){console.error("Anonymous sign-in error:",X),g(s.errorAuth)}},[s]),x=ee.useCallback(async()=>{g(null);try{await hw(bs)}catch(X){console.error("Sign-out error:",X),g(s.errorAuth)}},[s]),P=ee.useCallback(async(X,F)=>{if(!bs.currentUser)throw new Error("No user is currently signed in.");const te=Er.credential(X,F);await sw(bs.currentUser,te)},[]),$=ee.useCallback(async X=>{await aw(bs,X)},[]);return{userId:e,isAnonymous:a,isAuthReady:c,authError:m,setAuthError:g,handleSignIn:_,handleSignUp:E,handleAnonymousSignIn:S,handleSignOut:x,handleLinkAccount:P,handlePasswordReset:$}},aC=(s,e,n)=>{const a={gender:"Hombre",age:30,height:175,weight:75,bodyFat:15,muscleMass:40,daysPerWeek:3,mainGoal:"Perder grasa corporal",experienceLevel:"Intermedio",injuries:"",muscleFocus:"recomendado",timeAvailable:45,currentPlanId:null,bioage:{},bioageEstimation:null,menstrualCycle:{lastPeriod:"",cycleLength:28}},[l,c]=ee.useState(a),[f,m]=ee.useState(null),[g,_]=ee.useState(null),[E,S]=ee.useState(!1),x=ee.useMemo(()=>s&&Ea?xo(Ea,"artifacts",IE,"users",s,"profile","userProfile"):null,[s]);ee.useEffect(()=>{if(!e||!s||!x){c(a);return}let F=!0;return(async()=>{try{const ie=await VI(x);if(F)if(ie.exists()){const ae=ie.data();c(ye=>({...a,...ae,bioage:ae.bioage||{},bioageEstimation:ae.bioageEstimation||null,menstrualCycle:ae.menstrualCycle||{lastPeriod:"",cycleLength:28}}))}else await Ro(x,a),c(a)}catch(ie){console.error("Error fetching profile:",ie)}})(),()=>{F=!1}},[e,s,x]);const P=F=>{const{name:te,value:ie,type:ae}=F.target;c(ye=>{let ve=ie;return te==="bioage"||te==="menstrualCycle"?{...ye,[te]:ie}:(te==="daysPerWeek"&&ie!==""?ve=Math.max(1,Math.min(7,parseInt(ie,10)||1)):ae==="number"&&(ve=ie===""?"":parseFloat(ie)),{...ye,[te]:ve})})},$=ee.useCallback(async F=>{if(x){_(null),m(null);try{await Ro(x,F,{merge:!0}),m(n.msgProfileSaved)}catch{_(n.errorSave)}setTimeout(()=>{m(null),_(null)},3e3)}},[x,n]),X=ee.useCallback(async(F,te)=>{S(!0),_(null);try{const ie=await iC(F,te),ae={...F,bioageEstimation:ie};c(ae),x&&await Ro(x,{bioageEstimation:ie},{merge:!0})}catch(ie){console.error(ie),_("Error al calcular BioAge.")}finally{S(!1)}},[x]);return{profile:l,setProfile:c,handleProfileChange:P,handleProfileSave:$,handleAnalyzeBioage:X,bioageLoading:E,profileSuccess:f,profileError:g,profileDocRef:x}},rC=(s,e,n,a,l,c,f,m,g,_,E,S)=>{const[x,P]=ee.useState([]),$=ee.useMemo(()=>s&&Ea?EI(Ea,"artifacts",IE,"users",s,"routines"):null,[s]);return ee.useEffect(()=>{if(!e||!s||!$){P([]);return}let te=!0;const ie=jI(om($),ae=>{if(te){const ye=ae.docs.map(ve=>({id:ve.id,...ve.data()}));P(ye)}},ae=>{console.error(ae)});return()=>{te=!1,ie()}},[e,s,$]),{history:x,setHistory:P,handleGenerateWeeklyPlan:async te=>{if(!$||!_)return;c(!0),m(null),S(0);const ie=[a.analyzing,a.designing,a.optimizing,a.finalizing];let ae=0;l(ie[ae]);const ye=setInterval(()=>{ae=(ae+1)%ie.length,l(ie[ae]),S(ve=>Math.min(ve+10,90))},2500);try{const ve=x.filter(N=>N.status==="completed").slice(0,5),be=await tC(n,ve,te);if(clearInterval(ye),S(100),!be||!Array.isArray(be)||be.length===0)throw new Error("La IA no gener un plan vlido. Por favor, intntalo de nuevo.");l(a.processing);const I=Um(Ea);(await Qv(om($))).docs.forEach(N=>{N.data().status!=="completed"&&I.delete(N.ref)}),await I.commit();const R=`plan_${Date.now()}`,M=Um(Ea);be.forEach((N,Re)=>{const Qe=xo($);M.set(Qe,{...N,planId:R,weekDay:Re,status:"pending",createdAt:Lm()})}),await Ro(_,{currentPlanId:R},{merge:!0}),M.commit(),E(N=>({...N,currentPlanId:R}));const V=(await Qv(om($))).docs.map(N=>({id:N.id,...N.data()}));P(V),f(a.msgPlanGen)}catch(ve){console.error("Error generating weekly plan:",ve);const be=ve.message.includes("La IA no gener")?ve.message:a.errorSave;m(be),clearInterval(ye),S(0)}finally{c(!1),l(""),setTimeout(()=>f(null),3500)}},handleAdjustNextSession:async(te,ie,ae)=>{if(!(!$||!ie)){c(!0),m(null),l(a.recalcParams);try{const ye=await nC(n,ie,ae,te);if(!ye||typeof ye!="object"||!ye.rutinaPrincipal)throw new Error("La IA no gener un ajuste vlido. Por favor, intntalo de nuevo.");const ve=xo($,ie.id);await Ro(ve,{...ye,status:"pending",modifiedAt:Lm()},{merge:!0}),g(!1),f(a.msgSessionUpd)}catch(ye){console.error("Error adjusting session:",ye);const ve=ye.message.includes("La IA no gener")?ye.message:a.errorSave;m(ve)}finally{c(!1),l(""),setTimeout(()=>f(null),3e3)}}},routinesColRef:$}},oC=()=>{const[s,e]=ee.useState("es"),n=ee.useMemo(()=>xh[s]||xh.es,[s]),[a,l]=ee.useState("training"),[c,f]=ee.useState("main"),[m,g]=ee.useState(null),[_,E]=ee.useState(!0),[S,x]=ee.useState(""),[P,$]=ee.useState(!1),[X,F]=ee.useState(null),[te,ie]=ee.useState(!1),[ae,ye]=ee.useState(!1),[ve,be]=ee.useState(0),{userId:I,isAnonymous:w,isAuthReady:R,authError:M,setAuthError:D,handleSignIn:V,handleSignUp:N,handleAnonymousSignIn:Re,handleSignOut:Qe,handleLinkAccount:G,handlePasswordReset:re}=sC(n),{profile:ce,setProfile:Me,handleProfileChange:Pe,handleProfileSave:k,handleAnalyzeBioage:K,bioageLoading:oe,profileSuccess:ne,profileError:me,profileDocRef:Se}=aC(I,R,n),[se,pe]=ee.useState(null),{history:Ee,setHistory:ut,handleGenerateWeeklyPlan:Bt,handleAdjustNextSession:mn,routinesColRef:Gt}=rC(I,R,ce,n,x,$,F,pe,ie,Se,Me,be),[pn,Un]=ee.useState(null),[hn,ri]=ee.useState(!1),[Yi,ft]=ee.useState(0),[gt,Tt]=ee.useState(0),[Os,zn]=ee.useState(!1),qt=ee.useRef(null),Rn=ee.useRef(null),[Va,ja]=ee.useState(!1),bi=ee.useRef(null),[Uo,Pa]=ee.useState(!1),[wr,xr]=ee.useState(""),[sn,Dt]=ee.useState(null),[gn,yt]=ee.useState(!1),Rr=ee.useMemo(()=>Ee.find(Ie=>Ie.id===m),[Ee,m]),Vs=ee.useMemo(()=>se||me,[se,me]);ee.useEffect(()=>{if(R){const Ie=setTimeout(()=>E(!1),1200);return()=>clearTimeout(Ie)}},[R]),ee.useEffect(()=>{!I&&R&&(l("training"),f("main"),g(null))},[I,R]);const Nr=Ie=>ja(Ie.target.scrollTop>20),Bn=()=>e(Ie=>Ie==="es"?"en":"es"),Xi=ee.useCallback(async(Ie,et)=>{Un(null);try{return await G(Ie,et),!0}catch(tt){return console.error("Link account error:",tt.code),tt.code==="auth/email-already-in-use"?Un(n.errorEmailInUse):["auth/invalid-credential","auth/wrong-password"].includes(tt.code)?Un(n.errorInvalidCreds):Un(n.errorAuth),!1}},[n,G]),At=ee.useCallback(async Ie=>{D(null);try{return await re(Ie),!0}catch(et){return console.error("Password reset error:",et.code),et.code==="auth/user-not-found"?D(n.errorInvalidCreds):D(n.errorAuth),!1}},[n,re,D]),qn=ee.useCallback(()=>{w?ye(!0):Qe()},[w,Qe]),Hn=ee.useCallback(()=>{ye(!1),Qe()},[Qe]),Nn=ee.useCallback(Ie=>{Ie&&Ie.id&&(g(Ie.id),f("routine"),ri(!0))},[]),js=ee.useCallback(()=>{f("main"),g(null),ri(!1),zn(!1),Tt(0),ft(0)},[]),Ir=ee.useCallback(async(Ie,et,tt,Ke)=>{if(!Gt||!Ie){js();return}const an={status:"completed",completedAt:new Date,feedback:et,notes:tt,mode:Ke,completedOnDay:(new Date().getDay()+6)%7};ut(Gn=>Gn.map(es=>es.id===Ie?{...es,...an,completedAt:ct.fromDate(an.completedAt)}:es)),js(),F(n.msgSessionReg),setTimeout(()=>F(null),3e3);try{const Gn=xo(Gt,Ie);await Ro(Gn,{...an,completedAt:Lm()},{merge:!0})}catch(Gn){console.error("Error saving feedback to Firebase:",Gn),pe(n.errorHistorySave),ut(es=>es.map(Ps=>Ps.id===Ie?{...Ps,status:"pending",completedAt:null,feedback:null,notes:null,mode:null}:Ps)),setTimeout(()=>pe(null),4e3)}},[Gt,js,ut,n,pe,F]),Fn=ee.useCallback(Ie=>{if(clearInterval(Rn.current),Ie){const et=ZI(ce,Ie);Tt(et),zn(!0)}else zn(!1),Tt(0)},[ce]);ee.useEffect(()=>(hn?qt.current=setInterval(()=>{ft(Ie=>Ie+1)},1e3):clearInterval(qt.current),()=>clearInterval(qt.current)),[hn]),ee.useEffect(()=>(Os&&hn?Rn.current=setInterval(()=>{Tt(Ie=>Ie<=1?(clearInterval(Rn.current),zn(!1),0):Ie-1)},1e3):(clearInterval(Rn.current),gt>0&&(Tt(0),zn(!1))),()=>clearInterval(Rn.current)),[Os,hn]);const Zi=ee.useCallback(()=>k(ce),[k,ce]),zo=ee.useCallback(()=>Bt(s),[Bt,s]),Ji=ee.useCallback(()=>K(ce,s),[K,ce,s]),La=ee.useCallback((Ie,et)=>mn(s,Ie,et),[mn,s]),Ua=ee.useCallback(()=>{Dt(JSON.stringify({profile:ce,history:Ee},null,2))},[ce,Ee]),Wi=()=>Dt(null),oi=ee.useCallback(()=>{sn&&navigator.clipboard.writeText(sn).then(()=>{yt(!0),setTimeout(()=>yt(!1),2e3)})},[sn]),Cr=ee.useCallback(async Ie=>{try{const et=JSON.parse(Ie);if(!et.profile||!et.history)throw new Error("Invalid backup format.");if(await k(et.profile),Gt){const tt=Um(Ea);et.history.forEach(Ke=>{const an=Ke.id?xo(Gt,Ke.id):xo(Gt);Ke.createdAt&&!Ke.createdAt.seconds&&(Ke.createdAt=ct.fromDate(new Date(Ke.createdAt))),Ke.completedAt&&!Ke.completedAt.seconds&&(Ke.completedAt=ct.fromDate(new Date(Ke.completedAt))),tt.set(an,Ke,{merge:!0})}),await tt.commit()}Pa(!1)}catch(et){xr(`Error: ${et.message}`)}},[Gt,k]);return{t:n,activeTab:a,view:c,currentRoutine:Rr,showSplash:_,scrolled:Va,headerRef:bi,isImportModalOpen:Uo,importTextError:wr,backupJson:sn,copySuccess:gn,isSessionActive:hn,sessionSeconds:Yi,restSeconds:gt,progressText:S,loading:P,successMessage:X,showAdjustment:te,userId:I,isAuthReady:R,authError:M,isAnonymous:w,linkAccountError:pn,isSignOutWarningVisible:ae,profile:ce,bioageLoading:oe,profileSuccess:ne,profileError:me,history:Ee,generationProgress:ve,error:Vs,toggleLanguage:Bn,setActiveTab:l,handleScroll:Nr,setProgressText:x,setShowAdjustment:ie,setAuthError:D,setIsSignOutWarningVisible:ye,onSignIn:V,onSignUp:N,onAnonymousSignIn:Re,onSignOutRequest:qn,onForceSignOut:Hn,onLinkAccount:Xi,onPasswordReset:At,handleViewRoutine:Nn,handleBackToMain:js,handleRoutineFeedback:Ir,handleExerciseComplete:Fn,setRestSeconds:Tt,setIsSessionActive:ri,onProfileChange:Pe,onProfileSave:Zi,onAnalyzeBioage:Ji,onGeneratePlan:zo,onAdjustNextSession:La,onGenerateBackup:Ua,onCloseBackupModal:Wi,onCopyToClipboard:oi,setIsImportModalOpen:Pa,onImportFromText:Cr}};const lC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cC=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),Yv=s=>{const e=cC(s);return e.charAt(0).toUpperCase()+e.slice(1)},CE=(...s)=>s.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),uC=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var hC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fC=ee.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:f,...m},g)=>ee.createElement("svg",{ref:g,...hC,width:e,height:e,stroke:s,strokeWidth:a?Number(n)*24/Number(e):n,className:CE("lucide",l),...!c&&!uC(m)&&{"aria-hidden":"true"},...m},[...f.map(([_,E])=>ee.createElement(_,E)),...Array.isArray(c)?c:[c]]));const ge=(s,e)=>{const n=ee.forwardRef(({className:a,...l},c)=>ee.createElement(fC,{ref:c,iconNode:e,className:CE(`lucide-${lC(Yv(s))}`,`lucide-${s}`,a),...l}));return n.displayName=Yv(s),n};const dC=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],mC=ge("activity",dC);const pC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gC=ge("arrow-left",pC);const yC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_C=ge("arrow-right",yC);const vC=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],bC=ge("brain-circuit",vC);const EC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Xv=ge("calendar-days",EC);const TC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],AC=ge("check",TC);const SC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wC=ge("chevron-down",SC);const xC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],RC=ge("chevron-right",xC);const NC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],IC=ge("chevron-up",NC);const CC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DC=ge("circle-check-big",CC);const kC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],MC=ge("clipboard-list",kC);const OC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],VC=ge("clipboard",OC);const jC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zv=ge("clock",jC);const PC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],LC=ge("copy",PC);const UC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],zC=ge("database",UC);const BC=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],qC=ge("dna",BC);const HC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],FC=ge("download",HC);const GC=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Jv=ge("dumbbell",GC);const QC=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],$C=ge("fast-forward",QC);const KC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],YC=ge("file-braces",KC);const XC=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],ZC=ge("flame",XC);const JC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],WC=ge("heart-pulse",JC);const e4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],t4=ge("heart",e4);const n4=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],i4=ge("hourglass",n4);const s4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],a4=ge("info",s4);const r4=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],o4=ge("languages",r4);const l4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],c4=ge("layers",l4);const u4=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],h4=ge("link-2",u4);const f4=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],d4=ge("link",f4);const m4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],p4=ge("loader-circle",m4);const g4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],y4=ge("log-out",g4);const _4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],v4=ge("maximize-2",_4);const b4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],E4=ge("message-square-text",b4);const T4=[["path",{d:"M5 12h14",key:"1ays0h"}]],A4=ge("minus",T4);const S4=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],w4=ge("moon",S4);const x4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],R4=ge("pause",x4);const N4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],I4=ge("play",N4);const C4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],D4=ge("plus",C4);const k4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],M4=ge("refresh-cw",k4);const O4=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],V4=ge("ruler",O4);const j4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],P4=ge("save",j4);const L4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],U4=ge("scan-eye",L4);const z4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],B4=ge("settings",z4);const q4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],H4=ge("shield-alert",q4);const F4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],DE=ge("sparkles",F4);const G4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Q4=ge("star",G4);const $4=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],K4=ge("stethoscope",$4);const Y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],X4=ge("target",Y4);const Z4=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],J4=ge("thumbs-down",Z4);const W4=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],e5=ge("thumbs-up",W4);const t5=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],n5=ge("timer",t5);const i5=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],s5=ge("toggle-left",i5);const a5=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],r5=ge("toggle-right",a5);const o5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],l5=ge("triangle-alert",o5);const c5=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],u5=ge("trophy",c5);const h5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],f5=ge("upload",h5);const d5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],m5=ge("user",d5);const p5=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],g5=ge("weight",p5);const y5=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],_5=ge("wind",y5);const v5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],b5=ge("x",v5);const E5=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],T5=ge("youtube",E5);const A5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],S5=ge("zap",A5),he=({name:s,className:e=""})=>{if(s==="youtube")return y.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"}),y.jsx("path",{d:"m10 15 5-3-5-3z"})]});const a={dumbbell:Jv,list:MC,user:m5,loader:p4,sparkles:DE,arrowLeft:gC,database:zC,feedback:E4,check:DC,checkSimple:AC,target:X4,upload:f5,download:FC,close:b5,copy:LC,clipboard:VC,moon:w4,calendar:Xv,clock:Zv,refresh:M4,alert:l5,star:Q4,biceps:Jv,ruler:V4,weight:g5,activity:mC,flame:ZC,play:I4,save:P4,settings:B4,logout:y4,chevronRight:RC,info:a4,layers:c4,link:d4,plus:D4,timer:n5,toggleOn:r5,toggleOff:s5,lang:o4,chevronDown:wC,chevronUp:IC,heartPulse:WC,shieldAlert:H4,brain:bC,stethoscope:K4,scanEye:U4,fileJson:YC,link2:h4,dna:qC,flower:t4,calendarHeart:Xv,hourglass:i4,coffee:Zv,arrowRight:_C,zap:S5,trophy:u5,max:v4,youtube:T5,fastForward:$C,thumbsUp:e5,thumbsDown:J4,minus:A4,pause:R4,wind:_5}[s];return a?y.jsx(a,{className:`${e}`,strokeWidth:2}):null},w5=({routine:s,onBack:e,routineId:n,onRoutineFeedback:a,lang:l,onExerciseComplete:c,restSeconds:f,setRestSeconds:m,setIsSessionActive:g,isSessionActive:_,sessionSeconds:E})=>{const x=xh?.[l||"es"]||xh?.es||{},[P,$]=ee.useState("warmup"),[X,F]=ee.useState(0),[te,ie]=ee.useState(""),[ae,ye]=ee.useState({}),[ve,be]=ee.useState([]),[I,w]=ee.useState({}),[R,M]=ee.useState(!1),D=f>0;if(!s)return null;const V=s.rutinaPrincipal||[],N=V.length,Re=P==="workout"?V[X]:null,Qe=Re?.tipo_bloque==="superserie",G=P==="warmup"?0:P==="cooldown"?100:(X+1)/N*100,re=se=>{if(!se)return;const pe=se.replace(/^(?:A[1-2]:?|B[1-2]:?|Superserie:?|Serie\s?\w+)\s*/i,"").replace(/\(.*\)/,"").trim(),Ee=encodeURIComponent(`${pe} tecnica ejercicio`);window.open(`https://www.youtube.com/results?search_query=${Ee}`,"_blank","noopener,noreferrer")},ce=se=>{const pe=se.target.getBoundingClientRect(),Ee=Array.from({length:12}).map((ut,Bt)=>({id:Date.now()+Bt,x:pe.left+pe.width/2,y:pe.top+pe.height/2,tx:(Math.random()-.5)*200,ty:(Math.random()-.5)*200}));be(ut=>[...ut,...Ee]),setTimeout(()=>be([]),1e3)},Me=(se,pe,Ee,ut)=>{const Bt=`${se}-${pe}`,mn=!ae[Bt];ye(Gt=>({...Gt,[Bt]:mn})),mn&&(ce(ut),c&&c(Ee),m(60))},Pe=()=>{if(P==="warmup"){$("workout");return}if(P==="cooldown"){a?a(n,{sets:ae,difficulty:I},te,"hybrid_mode"):(console.warn("onRoutineFeedback no est definido"),e&&e());return}X<N-1?(F(se=>se+1),M(!1)):$("cooldown")},k=()=>{P==="cooldown"?$("workout"):P==="workout"&&(X>0?F(se=>se-1):$("warmup"))},K=(se,pe)=>{const Ee=`${X}_${se}`;w(ut=>({...ut,[Ee]:pe}))},ne=(()=>{if(P!=="workout"||!Re)return null;const se=Re.componentes||[];for(let pe=0;pe<se.length;pe++)if(!ae[`${X}-${pe}`])return{type:"set",label:`Serie ${pe+1}`,detail:"Mismo ejercicio",isNextEx:!1};if(X<N-1){const pe=V[X+1];if(pe.tipo_bloque==="superserie"){const Ee=pe.ejercicio.split("+"),ut=Es(Ee[0]||"Ejercicio 1"),Bt=Es(Ee[1]||"Ejercicio 2");return{type:"superset",label:`${ut} + ${Bt}`,names:[ut,Bt],detail:"Superserie: Prepara equipos",isNextEx:!0}}else{const Ee=Es(pe.ejercicio);return{type:"exercise",label:Ee,names:[Ee],detail:"Prepara el equipo",isNextEx:!0}}}return{type:"finish",label:x.cooldownTitle||"Enfriamiento",detail:"Ya casi acabas",isNextEx:!0}})();let me=null,Se=null;if(Re)if(Qe){const se=["+","/",`
`," y "];let pe=null;for(const Ee of se)if(Re.ejercicio.includes(Ee)){pe=Re.ejercicio.split(Ee);break}me=Es(pe?pe[0]:Re.ejercicio),Se=Es(pe?pe[1]:"Parte 2")}else me=Es(Re.ejercicio);return y.jsxs("div",{className:"relative animate-fadeIn min-h-[calc(100vh-140px)] flex flex-col",children:[ve.map(se=>y.jsx("div",{className:"particle bg-teal-400",style:{left:se.x,top:se.y,"--tx":`${se.tx}px`,"--ty":`${se.ty}px`}},se.id)),y.jsxs("div",{className:"mb-4 pt-2",children:[y.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1 px-1",children:[y.jsx("span",{children:P==="warmup"?x.warmupTitle:P==="cooldown"?x.cooldownTitle:`Ejercicio ${X+1} de ${N}`}),y.jsx("span",{children:P==="warmup"?"0%":P==="cooldown"?"100%":`${Math.round(G)}%`})]}),y.jsx("div",{className:"h-1.5 w-full bg-slate-800 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-teal-500 transition-all duration-500 ease-out",style:{width:`${G}%`}})})]}),y.jsx("div",{className:"flex-1 flex flex-col relative pb-32",children:y.jsxs("div",{className:"animate-slideInRight flex-1",children:[P==="warmup"&&y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-10",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-orange-500/10 flex items-center justify-center mb-6 animate-pulse",children:y.jsx(he,{name:"flame",className:"w-12 h-12 text-orange-500"})}),y.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:x.warmupTitle}),y.jsx("p",{className:"text-slate-400 text-sm max-w-xs mx-auto mb-8 leading-relaxed",children:s.calentamiento||x.warmupDesc}),y.jsx("button",{onClick:Pe,className:"px-8 py-4 bg-orange-500 hover:bg-orange-400 text-white font-bold rounded-xl shadow-lg shadow-orange-900/30 transition-all",children:x.startMain})]}),P==="cooldown"&&y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-10",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-500/10 flex items-center justify-center mb-6 animate-pulse",children:y.jsx(he,{name:"wind",className:"w-12 h-12 text-blue-400"})}),y.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:x.cooldownTitle}),y.jsx("p",{className:"text-slate-400 text-sm max-w-xs mx-auto mb-8 leading-relaxed",children:s.enfriamiento||x.cooldownDesc}),y.jsx("button",{onClick:Pe,className:"px-8 py-4 bg-teal-500 hover:bg-teal-400 text-white font-bold rounded-xl shadow-lg shadow-teal-900/30 transition-all",children:x.finishComplete})]}),P==="workout"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"mb-6",children:Qe?y.jsxs("div",{className:"bg-slate-800/40 rounded-2xl border border-slate-700/50 overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-slate-800 to-slate-900 border-b border-slate-700",children:[y.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:"Superserie"}),y.jsxs("button",{onClick:()=>M(!R),className:"flex items-center gap-2 text-teal-400 hover:text-white text-xs font-bold transition-colors",children:[y.jsx(he,{name:"info",className:"w-4 h-4"})," ",y.jsx("span",{children:"TCNICA"})]})]}),y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-start gap-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("span",{className:"text-[10px] font-black text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded border border-cyan-500/20 mb-1 inline-block",children:"A1"}),y.jsx("h3",{className:"text-lg font-black text-white leading-tight",children:me})]}),y.jsx("button",{onClick:se=>{se.stopPropagation(),re(me)},className:"p-2 rounded-lg bg-slate-700 text-red-500 hover:bg-red-600 hover:text-white transition-colors",children:y.jsx(he,{name:"youtube",className:"w-5 h-5"})})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"h-px flex-1 bg-slate-700"}),y.jsx("div",{className:"p-1.5 rounded-full bg-slate-700 border border-slate-600",children:y.jsx(he,{name:"link2",className:"w-4 h-4 text-slate-400"})}),y.jsx("div",{className:"h-px flex-1 bg-slate-700"})]}),y.jsxs("div",{className:"flex justify-between items-start gap-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("span",{className:"text-[10px] font-black text-blue-400 bg-blue-900/20 px-2 py-0.5 rounded border border-blue-500/20 mb-1 inline-block",children:"A2"}),y.jsx("h3",{className:"text-lg font-black text-white leading-tight",children:Se})]}),y.jsx("button",{onClick:se=>{se.stopPropagation(),re(Se)},className:"p-2 rounded-lg bg-slate-700 text-red-500 hover:bg-red-600 hover:text-white transition-colors",children:y.jsx(he,{name:"youtube",className:"w-5 h-5"})})]})]})]}):y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("div",{className:"flex-1 pr-2",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white leading-tight",children:me}),y.jsx("button",{onClick:()=>M(!R),className:"text-slate-400 hover:text-white transition-colors mt-1",children:y.jsx(he,{name:"info",className:"w-6 h-6"})})]})}),y.jsx("button",{onClick:se=>{se.stopPropagation(),re(me)},className:"shrink-0 p-3 rounded-xl bg-slate-800 text-red-500 hover:bg-red-600 hover:text-white border border-slate-700 shadow-lg transition-all z-10",children:y.jsx(he,{name:"youtube",className:"w-6 h-6"})})]})}),R&&y.jsxs("div",{className:"mb-6 p-4 bg-slate-800/80 backdrop-blur-md rounded-xl border border-slate-600 text-xs text-slate-200 leading-relaxed animate-fadeIn shadow-xl",children:[y.jsx("h4",{className:"font-bold text-teal-400 mb-1 uppercase tracking-wider",children:"Tcnica & Tips"}),Re.tecnica_general]}),y.jsx("div",{className:"bg-slate-900/50 border border-slate-700/50 rounded-2xl overflow-hidden shadow-xl",children:Qe?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-[25px_2fr_2fr_45px] gap-1 bg-slate-800 border-b border-slate-700",children:[y.jsx("div",{className:"bg-slate-900"}),y.jsx("div",{className:"bg-cyan-900/20 text-cyan-400 text-[9px] font-black uppercase tracking-wider py-1 text-center border-r border-slate-700/50 truncate px-1",children:me}),y.jsx("div",{className:"bg-blue-900/20 text-blue-400 text-[9px] font-black uppercase tracking-wider py-1 text-center truncate px-1",children:Se}),y.jsx("div",{className:"bg-slate-900"})]}),y.jsxs("div",{className:"grid grid-cols-[25px_1fr_1fr_1fr_1fr_45px] gap-1 bg-slate-800/80 p-2 text-[8px] font-bold uppercase tracking-wider text-center border-b border-slate-700 text-slate-500",children:[y.jsx("div",{children:"#"}),y.jsx("div",{children:"Reps"}),y.jsx("div",{children:"Kg"}),y.jsx("div",{children:"Reps"}),y.jsx("div",{children:"Kg"}),y.jsx("div",{children:y.jsx(he,{name:"check",className:"w-3 h-3 mx-auto"})})]}),y.jsx("div",{className:"divide-y divide-slate-800/50",children:Re.componentes.map((se,pe)=>{const Ee=ae[`${X}-${pe}`];return y.jsxs("div",{className:`grid grid-cols-[25px_1fr_1fr_1fr_1fr_45px] gap-1 items-center p-2 transition-colors ${Ee?"bg-emerald-900/10":""}`,children:[y.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-700 flex items-center justify-center text-[10px] font-bold text-slate-500 bg-slate-900",children:se.numero_serie}),y.jsx("div",{className:"flex flex-col items-center justify-center h-12 bg-cyan-900/10 rounded border border-cyan-900/20",children:y.jsx("span",{className:"text-base font-black text-cyan-100 tracking-tight",children:cm(se.repeticiones_ejercicioA)})}),y.jsx("div",{className:"flex flex-col items-center justify-center h-12 bg-cyan-900/10 rounded border border-cyan-900/20",children:y.jsx("span",{className:"text-base font-black text-cyan-100 tracking-tight",children:um(se.carga_sugeridaA)})}),y.jsx("div",{className:"flex flex-col items-center justify-center h-12 bg-blue-900/10 rounded border border-blue-900/20",children:y.jsx("span",{className:"text-base font-black text-blue-100 tracking-tight",children:cm(se.repeticiones_ejercicioB)})}),y.jsx("div",{className:"flex flex-col items-center justify-center h-12 bg-blue-900/10 rounded border border-blue-900/20",children:y.jsx("span",{className:"text-base font-black text-blue-100 tracking-tight",children:um(se.carga_sugeridaB)})}),y.jsx("button",{onClick:ut=>Me(X,pe,Re,ut),className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-200 border mx-auto ${Ee?"bg-emerald-500 border-emerald-500 text-white shadow-[0_0_10px_rgba(16,185,129,0.4)] scale-90":"bg-slate-800 border-slate-600 text-slate-600 hover:border-slate-500 hover:text-slate-400"}`,children:y.jsx(he,{name:"check",className:"w-5 h-5"})})]},pe)})})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr_50px] gap-3 bg-slate-800/80 p-3 text-[9px] font-bold text-slate-500 uppercase tracking-wider text-center border-b border-slate-700",children:[y.jsx("div",{children:"#"}),y.jsx("div",{children:"Repeticiones"}),y.jsx("div",{children:"Carga"}),y.jsx("div",{children:y.jsx(he,{name:"check",className:"w-4 h-4 mx-auto"})})]}),y.jsx("div",{className:"divide-y divide-slate-800/50",children:Re.componentes.map((se,pe)=>{const Ee=ae[`${X}-${pe}`];return y.jsxs("div",{className:`grid grid-cols-[30px_1fr_1fr_50px] gap-3 items-center p-3 transition-colors ${Ee?"bg-emerald-900/10":""}`,children:[y.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-700 flex items-center justify-center text-[10px] font-bold text-slate-500 bg-slate-900",children:se.numero_serie}),y.jsx("div",{className:"flex flex-col items-center justify-center h-16 bg-slate-800/50 rounded-xl border border-slate-700/50",children:y.jsx("span",{className:"text-3xl font-black text-white tracking-tighter",children:cm(se.repeticiones_ejercicio)})}),y.jsx("div",{className:"flex flex-col items-center justify-center h-16 bg-slate-800/50 rounded-xl border border-slate-700/50",children:y.jsx("span",{className:"text-3xl font-black text-teal-400 tracking-tighter",children:um(se.carga_sugerida)})}),y.jsx("button",{onClick:ut=>Me(X,pe,Re,ut),className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200 border mx-auto ${Ee?"bg-emerald-500 border-emerald-500 text-white shadow-[0_0_10px_rgba(16,185,129,0.4)] scale-90":"bg-slate-800 border-slate-600 text-slate-600 hover:border-slate-500 hover:text-slate-400"}`,children:y.jsx(he,{name:"check",className:"w-6 h-6"})})]},pe)})})]})})]})]})}),!D&&y.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-50 pointer-events-none px-4",children:y.jsxs("div",{className:"pointer-events-auto flex items-center bg-slate-900/90 backdrop-blur-xl rounded-full border border-slate-700 shadow-2xl shadow-black/50 p-2 gap-4",children:[y.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[y.jsx("button",{onClick:k,className:"p-3 text-slate-400 hover:text-white transition-colors active:scale-95 rounded-full hover:bg-slate-800/50",children:y.jsx(he,{name:"arrowLeft",className:"w-5 h-5"})}),y.jsx("button",{onClick:()=>g(!_),className:`p-4 rounded-full shadow-lg transition-all active:scale-95 flex items-center justify-center ${_?"bg-slate-700 text-slate-300":"bg-amber-500 text-white shadow-amber-500/30"}`,children:y.jsx(he,{name:_?"pause":"play",className:"w-6 h-6 fill-current"})}),y.jsx("button",{onClick:Pe,className:`group relative p-3 rounded-full transition-all active:scale-95 ${P==="cooldown"?"text-teal-400 hover:text-teal-300":"text-slate-400 hover:text-white"} hover:bg-slate-800/50`,children:y.jsx(he,{name:P==="cooldown"?"check":"arrowRight",className:"w-5 h-5"})})]}),y.jsx("div",{className:"w-px h-8 bg-slate-700/50"}),y.jsxs("div",{className:"flex items-center gap-2 pr-4 pl-1 font-mono font-bold text-lg text-teal-400",children:[y.jsx(he,{name:"timer",className:"w-4 h-4 opacity-70"}),y.jsx("span",{className:"tabular-nums tracking-tight",children:WI(E)})]})]})}),D&&y.jsx("div",{className:"fixed inset-0 z-[60] bg-slate-950/95 flex flex-col animate-fadeIn backdrop-blur-xl overflow-y-auto",children:y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 min-h-0",children:[y.jsxs("div",{className:"mb-8 relative shrink-0",children:[y.jsx("div",{className:"absolute inset-0 bg-teal-500 blur-3xl opacity-20 animate-pulse rounded-full"}),y.jsx("div",{className:"text-[120px] font-black text-white tabular-nums leading-none tracking-tighter relative z-10 text-stroke",children:f})]}),y.jsx("h3",{className:"text-xl font-bold text-teal-400 mb-8 uppercase tracking-[0.3em] animate-pulse shrink-0",children:x.restTimer||"DESCANSO"}),y.jsxs("div",{className:"w-full max-w-sm space-y-4 mb-8",children:[y.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider text-center mb-2",children:x.rateEffort||"Esfuerzo percibido?"}),y.jsx("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-slate-700/50 backdrop-blur-sm",children:y.jsx("div",{className:"flex gap-3 w-full",children:[{val:"easy",icon:"zap",color:"text-emerald-400",border:"border-emerald-500/30",bg:"bg-emerald-500/10"},{val:"good",icon:"check",color:"text-blue-400",border:"border-blue-500/30",bg:"bg-blue-500/10"},{val:"hard",icon:"flame",color:"text-red-400",border:"border-red-500/30",bg:"bg-red-500/10"}].map(se=>{const pe=I[`${X}_0`]===se.val;return y.jsx("button",{onClick:()=>K(0,se.val),className:`flex-1 py-4 rounded-xl border flex items-center justify-center transition-all duration-300 ${pe?`${se.bg} ${se.border} ${se.color} ring-1 ring-inset ring-white/20 shadow-lg`:"border-slate-700 bg-slate-800/30 text-slate-500 hover:bg-slate-700 hover:text-slate-300"}`,children:y.jsx(he,{name:se.icon,className:"w-6 h-6"})},se.val)})})})]}),ne&&ne.isNextEx&&y.jsxs("div",{className:"w-full max-w-sm bg-slate-800/60 border border-slate-700 rounded-2xl p-5 mb-8 shrink-0 backdrop-blur-sm shadow-xl animate-fadeIn",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20 text-indigo-400 border border-indigo-500/30",children:y.jsx(he,{name:"fastForward",className:"w-5 h-5"})}),y.jsx("div",{children:y.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:ne.detail})})]}),y.jsx("div",{className:"flex justify-between items-center bg-slate-900/50 p-3 rounded-xl border border-slate-700/50",children:y.jsx("div",{className:"text-base font-bold text-white leading-tight line-clamp-1 px-2",children:ne.label})})]}),y.jsxs("div",{className:"flex gap-4 w-full max-w-sm shrink-0 mt-auto pb-8",children:[y.jsx("button",{onClick:()=>m(se=>se+30),className:"flex-1 py-4 rounded-xl bg-slate-800 border border-slate-700 text-slate-300 font-bold hover:bg-slate-700 hover:text-white active:scale-95 transition-all",children:"+30s"}),y.jsxs("button",{onClick:()=>m(0),className:"flex-[2] py-4 rounded-xl bg-teal-600 text-white font-bold hover:bg-teal-500 shadow-lg shadow-teal-900/50 active:scale-95 transition-all flex items-center justify-center gap-2",children:[y.jsx(he,{name:"play",className:"w-5 h-5 fill-current"}),x.letsGo||"A DARLE"]})]})]})})]})},x5=({children:s,className:e="",onClick:n})=>y.jsx("div",{onClick:n,className:`bg-slate-800/40 border border-slate-700/50 rounded-2xl shadow-sm backdrop-blur-xl transition-all duration-300 ${e}`,children:s}),R5=({label:s,icon:e,type:n="text",name:a,value:l,onChange:c,placeholder:f,options:m,isTextArea:g=!1})=>y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:s}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:`absolute left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-teal-400 transition-colors duration-300 ${g?"top-4":"inset-y-0"}`,children:y.jsx(he,{name:e,className:"w-5 h-5"})}),m?y.jsx("select",{name:a,value:l,onChange:c,className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-xl py-4 pl-12 pr-4 text-sm focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 outline-none appearance-none cursor-pointer hover:bg-slate-800/50",children:m.map(_=>y.jsx("option",{value:_.value,children:_.label},_.value))}):g?y.jsx("textarea",{name:a,value:l,onChange:c,placeholder:f,rows:"3",className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-xl py-4 pl-12 pr-4 text-sm focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 outline-none min-h-[100px] resize-y"}):y.jsx("input",{type:n,name:a,value:l===0?"":l,onChange:c,placeholder:f,className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-xl py-4 pl-12 pr-4 text-sm focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 outline-none"})]})]}),kE=({progressText:s})=>y.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/80 px-4 py-2 rounded-full border border-teal-500/20 shadow-xl shadow-teal-900/10 backdrop-blur-md transition-all scale-90 origin-right",children:[y.jsxs("div",{className:"gemini-loader-circle",children:[y.jsx("div",{className:"gemini-loader-path"}),y.jsx(DE,{className:"gemini-loader-icon w-3 h-3",strokeWidth:2})]}),y.jsx("span",{className:"text-xs font-medium bg-gradient-to-r from-teal-300 to-violet-300 bg-clip-text text-transparent animate-pulse",children:s})]}),N5=({weekDistribution:s,completionLog:e,todayIndex:n})=>y.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-4 rounded-2xl border border-slate-700/50 mb-6 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Tu Racha"}),y.jsxs("span",{className:"text-xs text-slate-300 font-medium",children:["Semana ",s.length>0?"Activa":"Off"]})]}),y.jsx("div",{className:"flex gap-2",children:[0,1,2,3,4,5,6].map(a=>{const l=e.has(a),c=a===n;let f="bg-slate-700/50",m="border-transparent";return l?f="bg-teal-500 shadow-[0_0_8px_rgba(20,184,166,0.5)]":c&&(f="bg-slate-800",m="border-teal-500 animate-pulse"),y.jsx("div",{className:`w-3 h-3 rounded-full border ${m} ${f} transition-all duration-500`},a)})})]}),ME=({exercises:s,limit:e})=>{if(!s||!Array.isArray(s)||s.length===0)return y.jsx("div",{className:"py-2 text-xs text-slate-500 italic text-center",children:"Detalles disponibles al iniciar."});const n=e?s.slice(0,e):s,a=e?Math.max(0,s.length-e):0;return y.jsxs("div",{className:"space-y-2 mt-4 mb-4",children:[n.map((l,c)=>{const f=l.tipo_bloque==="superserie";let m=null;if(f){const g=(l.ejercicio||"").split("+"),_=Es(g[0]),E=Es(g[1]||"").replace(/^[A-Z]\d+[\s.-]*/,"");m=y.jsxs("div",{className:"flex flex-col w-full gap-1",children:[y.jsx("div",{className:"flex justify-between items-baseline",children:y.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[y.jsx("span",{className:"text-[9px] font-black text-cyan-400 bg-cyan-900/30 px-1.5 py-0.5 rounded border border-cyan-500/20 whitespace-nowrap",children:"A1"}),y.jsx("p",{className:"text-xs font-medium text-slate-200 truncate",children:_})]})}),y.jsx("div",{className:"flex justify-between items-baseline",children:y.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[y.jsx("span",{className:"text-[9px] font-black text-blue-400 bg-blue-900/30 px-1.5 py-0.5 rounded border border-blue-500/20 whitespace-nowrap",children:"A2"}),y.jsx("p",{className:"text-xs font-medium text-slate-200 truncate",children:E})]})})]})}else{const g=Es(l.ejercicio);let _="General";g.match(/barra/i)?_="Barra":g.match(/mancuerna/i)?_="Mancuernas":g.match(/polea|cable/i)?_="Polea":g.match(/mquina|maquina/i)&&(_="Mquina"),m=y.jsxs("div",{className:"flex-1 min-w-0 flex justify-between items-center",children:[y.jsx("p",{className:"text-xs font-medium text-slate-200 truncate pr-2",children:g}),y.jsx("span",{className:"text-[8px] font-bold text-slate-500 uppercase bg-slate-900 px-1.5 py-0.5 rounded border border-slate-700/50 whitespace-nowrap",children:_})]})}return y.jsxs("div",{className:`flex items-start gap-3 p-2.5 rounded-xl border transition-all ${f?"bg-slate-800/80 border-cyan-900/20":"bg-slate-800/40 border-slate-700/30"}`,children:[y.jsx("span",{className:`shrink-0 flex items-center justify-center w-5 h-5 rounded-full text-[9px] font-bold mt-0.5 ${f?"bg-cyan-900/20 text-cyan-500":"bg-teal-900/20 text-teal-500"}`,children:c+1}),m]},c)}),a>0&&y.jsx("div",{className:"text-center pt-2",children:y.jsxs("span",{className:"text-[10px] text-slate-500 font-medium bg-slate-800/50 px-3 py-1 rounded-full border border-slate-700/50",children:["+ ",a," ejercicios ms..."]})})]})},I5=({routine:s,onView:e,onAdjust:n})=>{if(!s)return y.jsx("div",{className:"p-4 text-center text-xs text-slate-500 border border-dashed border-slate-700 rounded-2xl",children:"Todo listo por hoy."});const a=s.routine||s,l=Array.isArray(a.rutinaPrincipal)?a.rutinaPrincipal:[];return y.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700/50 shadow-xl p-5 mb-4 group",children:[y.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-teal-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3 pointer-events-none group-hover:bg-teal-500/10 transition-colors duration-500"}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{className:"flex-1 mr-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("span",{className:"px-2 py-0.5 rounded-md bg-teal-500/10 text-teal-400 text-[9px] font-black uppercase tracking-wider border border-teal-500/20 shadow-sm shadow-teal-900/20",children:"Sugerencia"}),y.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-slate-400 font-mono",children:[y.jsx(he,{name:"clock",className:"w-3 h-3"})," ",a.duracionEstimada||"45 min"]})]}),y.jsx("h2",{className:"text-xl font-black text-white leading-tight line-clamp-2 drop-shadow-md",children:RE(s.diaEnfoque||a.diaEnfoque)})]}),y.jsx("button",{onClick:c=>{c.stopPropagation(),n()},className:"p-2.5 rounded-full bg-slate-800 text-slate-400 border border-slate-700 hover:text-white hover:border-slate-500 hover:bg-slate-700 transition-all shadow-lg active:scale-95",children:y.jsx(he,{name:"settings",className:"w-4 h-4"})})]}),y.jsx(ME,{exercises:l,limit:3}),y.jsxs("button",{onClick:()=>e(s),className:"w-full py-3.5 bg-teal-500 hover:bg-teal-400 text-slate-900 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-teal-900/20 active:scale-[0.98] group-hover:shadow-teal-500/20 mt-2",children:[y.jsx(he,{name:"play",className:"w-4 h-4 fill-current"}),y.jsx("span",{className:"tracking-wide text-sm",children:"COMENZAR SESIN"})]})]})]})},C5=({routines:s,onView:e,onAdjust:n})=>{const[a,l]=ee.useState(null);return!s||s.length===0?y.jsx("div",{className:"text-center py-8 text-xs text-slate-500",children:"No hay opciones extra."}):y.jsxs("div",{className:"space-y-3 pb-20",children:[y.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Otras Opciones"}),s.map(c=>{const f=a===c.id,m=c.routine||{};return y.jsxs("div",{className:`rounded-2xl border transition-all duration-300 overflow-hidden ${f?"bg-slate-800 border-teal-500/30 ring-1 ring-teal-500/20":"bg-slate-800/40 border-slate-700/50"}`,children:[y.jsxs("div",{className:"w-full flex items-center justify-between p-4 text-left cursor-pointer",onClick:()=>l(f?null:c.id),children:[y.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[y.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${f?"bg-teal-500 text-slate-900 shadow-lg shadow-teal-500/20":"bg-slate-900 text-slate-500 border border-slate-700"}`,children:y.jsx(he,{name:"dumbbell",className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("h4",{className:`text-sm font-bold ${f?"text-white":"text-slate-300"}`,children:RE(c.diaEnfoque)}),y.jsx("p",{className:"text-[10px] text-slate-500 font-mono mt-0.5",children:m.duracionEstimada})]})]}),y.jsx("div",{className:`transition-transform duration-300 ${f?"rotate-180 text-teal-500":"text-slate-600"}`,children:y.jsx(he,{name:"chevronDown",className:"w-5 h-5"})})]}),f&&y.jsxs("div",{className:"px-4 pb-4 animate-fadeIn",children:[y.jsx("div",{className:"pt-2 border-t border-slate-700/50 mb-4",children:y.jsx(ME,{exercises:m.rutinaPrincipal||[],limit:99})}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:g=>{g.stopPropagation(),n(c)},className:"flex-1 py-2.5 rounded-lg border border-slate-600 text-slate-300 font-bold text-xs hover:bg-slate-700 transition-colors",children:"AJUSTAR"}),y.jsxs("button",{onClick:g=>{g.stopPropagation(),e(c)},className:"flex-[2] py-2.5 rounded-lg bg-teal-600 text-white font-bold text-xs hover:bg-teal-500 shadow-lg shadow-teal-900/20 transition-colors flex items-center justify-center gap-2",children:[y.jsx(he,{name:"play",className:"w-3 h-3 fill-current"})," INICIAR"]})]})]})]},c.id)})]})},D5=({nextRoutine:s,profile:e,onProfileChange:n,onAdjustNextSession:a,loading:l,progressText:c,lang:f})=>{const m={timeAvailable:"Tiempo",modality:"Modalidad",noEquipment:"Sin equipo",focusZone:"Zona",processing:"Procesando...",recalcParams:"Recalcular"},[g,_]=ee.useState([]),[E,S]=ee.useState(!1),[x,P]=ee.useState(!1),$=F=>{const te=g.includes(F)?g.filter(ie=>ie!==F):[...g,F];_(te),n&&n({target:{name:"muscleFocus",value:te.join(", ")}})},X=[{category:"Grupos",items:["Tren Superior","Tren Inferior","Core","Full Body"]},{category:"Msculos",items:["Glteos","Cudriceps","Pecho","Espalda","Brazos"]}];return y.jsxs(x5,{className:"p-6",children:[y.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-700/50 pb-4",children:[y.jsx("div",{children:y.jsxs("h3",{className:"text-lg font-bold text-slate-100 flex items-center gap-2",children:[y.jsx(he,{name:"settings",className:"w-5 h-5 text-slate-400"})," ",s.diaEnfoque]})}),l&&y.jsx(kE,{progressText:c})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-6 items-center",children:[y.jsx(R5,{label:m.timeAvailable,icon:"clock",type:"number",name:"timeAvailable",value:e.timeAvailable,onChange:n}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:m.modality}),y.jsxs("button",{onClick:()=>S(!E),className:`w-full py-3 px-4 rounded-xl border flex items-center justify-between transition-all ${E?"bg-indigo-500/20 border-indigo-500/50 text-indigo-300":"bg-slate-900/50 border-slate-700 text-slate-400"}`,children:[y.jsx("span",{className:"text-sm font-semibold",children:m.noEquipment}),y.jsx(he,{name:E?"toggleOn":"toggleOff",className:`w-6 h-6 ${E?"text-indigo-400":"text-slate-600"}`})]})]})]}),y.jsxs("div",{className:"border border-slate-700 rounded-xl overflow-hidden",children:[y.jsxs("button",{onClick:()=>P(!x),className:"w-full p-4 flex items-center justify-between bg-slate-900/50 hover:bg-slate-800 transition-colors",children:[y.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:m.focusZone}),y.jsx(he,{name:x?"chevronUp":"chevronDown",className:"w-4 h-4 text-slate-500"})]}),x&&y.jsx("div",{className:"p-4 bg-slate-900/30 animate-fadeIn border-t border-slate-700/50",children:y.jsx("div",{className:"flex flex-wrap gap-2.5",children:X.flatMap(F=>F.items).map(F=>{const te=g.includes(F);return y.jsx("button",{onClick:()=>$(F),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-300 border hover:scale-105 active:scale-95 ${te?"bg-teal-600 border-teal-500 text-white shadow-md shadow-teal-900/30":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:F},F)})})})]}),y.jsx("button",{onClick:()=>a(s,e,E),disabled:l,className:"w-full py-4 rounded-xl bg-slate-700 hover:bg-slate-600 text-white font-bold transition-all duration-300 disabled:opacity-50 disabled:scale-100 hover:scale-[1.02] active:scale-95 flex justify-center items-center gap-2 shadow-lg",children:l?m.processing:y.jsxs(y.Fragment,{children:[y.jsx(he,{name:"refresh",className:"w-5 h-5"})," ",m.recalcParams]})})]})]})},k5=({profile:s,onProfileChange:e,onGeneratePlan:n,onAdjustNextSession:a,loading:l,successMessage:c,errorMessage:f,history:m,onViewRoutine:g,generationProgress:_,lang:E,t:S,onAnalyzeBioage:x,bioageLoading:P,view:$,currentRoutine:X,routineId:F,onRoutineFeedback:te,onExerciseComplete:ie,isSessionActive:ae,setIsSessionActive:ye,restSeconds:ve,setRestSeconds:be,sessionSeconds:I})=>{const[w,R]=ee.useState(S.generating),[M,D]=ee.useState("recommended"),[V,N]=ee.useState(!1),[Re,Qe]=ee.useState(null),G=s.currentPlanId,re=(new Date().getDay()+6)%7,ce=m.filter(ne=>ne.planId===G&&ne.status!=="archived_history").sort((ne,me)=>ne.weekDay-me.weekDay),Me=new Map;m.forEach(ne=>{ne.planId===G&&ne.status==="completed"&&ne.completedOnDay!==void 0&&Me.set(ne.completedOnDay,ne)});const k=ce.filter(ne=>ne.status==="pending")[0],K=ce.filter(ne=>ne.id!==k?.id&&ne.status==="pending");ee.useEffect(()=>{_<30?R(S.analyzing):_<60?R(S.designing):_<90?R(S.optimizing):R(S.finalizing)},[_,S]);const oe=ne=>{Qe(ne),N(!0)};return $==="routine"?y.jsx(w5,{routine:X,routineId:F,onRoutineFeedback:te,successMessage:c,lang:E,onExerciseComplete:ie,isSessionActive:ae,setIsSessionActive:ye,restSeconds:ve,setRestSeconds:be,sessionSeconds:I}):y.jsxs("div",{className:"animate-fadeIn pb-24",children:[y.jsxs("div",{className:"space-y-2 mb-4",children:[c&&y.jsxs("div",{className:"p-4 bg-teal-500/10 border border-teal-500/20 text-teal-300 rounded-xl flex items-center shadow-lg backdrop-blur-md",children:[y.jsx(he,{name:"check",className:"mr-3 w-5 h-5"})," ",c]}),f&&y.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-300 rounded-xl flex items-center shadow-lg backdrop-blur-md",children:[y.jsx(he,{name:"alert",className:"mr-3 w-5 h-5"})," ",f]})]}),y.jsx(N5,{weekDistribution:ce,completionLog:Me,todayIndex:re}),y.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-slate-700/50 pb-1 px-2",children:[y.jsxs("div",{className:"flex gap-6",children:[y.jsxs("button",{onClick:()=>D("recommended"),className:`pb-2 text-xs font-bold transition-all relative uppercase tracking-wider ${M==="recommended"?"text-teal-400":"text-slate-500 hover:text-slate-300"}`,children:["Recomendado",M==="recommended"&&y.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-teal-500 rounded-t-full"})]}),y.jsxs("button",{onClick:()=>D("library"),className:`pb-2 text-xs font-bold transition-all relative uppercase tracking-wider ${M==="library"?"text-slate-200":"text-slate-500 hover:text-slate-300"}`,children:["Ms Opciones",M==="library"&&y.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-slate-200 rounded-t-full"})]})]}),y.jsxs("button",{onClick:()=>n(s),className:"pb-2 text-[10px] font-bold text-teal-400 hover:text-teal-300 flex items-center gap-1.5 transition-colors",children:[y.jsx(he,{name:"refresh",className:"w-3 h-3"})," ",S.regenerateCycle]})]}),y.jsxs("div",{className:"min-h-[250px]",children:[l?y.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:y.jsx(kE,{progressText:w})}):y.jsxs(y.Fragment,{children:[M==="recommended"&&y.jsx(y.Fragment,{children:k?y.jsx("div",{className:"animate-fadeIn",children:y.jsx(I5,{routine:k,onView:g,onAdjust:()=>oe(k)})}):y.jsxs("div",{className:"text-center py-12 border border-dashed border-slate-700/50 rounded-2xl bg-slate-800/20",children:[y.jsx("div",{className:"w-16 h-16 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto mb-3 border border-emerald-500/20",children:y.jsx(he,{name:"check",className:"w-8 h-8 text-emerald-500"})}),y.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Semana Completada!"}),y.jsx("p",{className:"text-slate-500 text-xs mb-5 max-w-[200px] mx-auto",children:"No hay rutinas pendientes. Gran trabajo!"})]})}),M==="library"&&y.jsxs("div",{className:"animate-fadeIn",children:[y.jsx(C5,{routines:K,onView:g,onAdjust:oe}),K.length===0&&k&&y.jsx("div",{className:"text-center py-10 opacity-50",children:y.jsx("p",{className:"text-xs text-slate-500",children:"Solo queda la rutina recomendada."})})]})]}),V&&Re&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-950/90 backdrop-blur-sm p-4 animate-fadeIn",children:y.jsxs("div",{className:"w-full max-w-md relative",children:[y.jsx("button",{onClick:()=>N(!1),className:"absolute -top-10 right-0 text-slate-400 hover:text-white",children:y.jsx(he,{name:"close",className:"w-8 h-8"})}),y.jsx(D5,{nextRoutine:Re,profile:s,onProfileChange:e,onAdjustNextSession:(ne,me,Se)=>{a(ne||Re,me,Se),N(!1)},loading:l,progressText:w,lang:E})]})}),ce.length===0&&!l&&y.jsxs("div",{className:"p-6 text-center border border-dashed border-slate-700 rounded-2xl mt-4",children:[y.jsx(he,{name:"sparkles",className:"w-8 h-8 text-teal-500 mx-auto mb-3"}),y.jsx("p",{className:"text-slate-400 text-xs mb-4",children:S.noPlan}),y.jsx("button",{onClick:()=>n(s),className:"w-full py-3 rounded-lg bg-teal-600 text-white font-bold text-xs shadow-lg shadow-teal-900/20 hover:bg-teal-500",children:S.startRoutine})]})]})]})},Ki=({children:s,className:e="",onClick:n})=>y.jsx("div",{onClick:n,className:`bg-slate-800/40 border border-slate-700/50 rounded-2xl shadow-sm backdrop-blur-xl transition-all duration-300 ${e}`,children:s}),vs=({label:s,icon:e,type:n="text",name:a,value:l,onChange:c,placeholder:f,options:m,isTextArea:g=!1})=>y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:s}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:`absolute left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-teal-400 transition-colors duration-300 ${g?"top-4":"inset-y-0"}`,children:y.jsx(he,{name:e,className:"w-5 h-5"})}),m?y.jsx("select",{name:a,value:l,onChange:c,className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-xl py-4 pl-12 pr-4 text-sm focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 outline-none appearance-none cursor-pointer hover:bg-slate-800/50",children:m.map(_=>y.jsx("option",{value:_.value,children:_.label},_.value))}):g?y.jsx("textarea",{name:a,value:l,onChange:c,placeholder:f,rows:"3",className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-xl py-4 pl-12 pr-4 text-sm focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 outline-none min-h-[100px] resize-y"}):y.jsx("input",{type:n,name:a,value:l===0?"":l,onChange:c,placeholder:f,className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-xl py-4 pl-12 pr-4 text-sm focus:ring-4 focus:ring-teal-500/10 focus:border-teal-500 outline-none"})]})]}),Pi=({label:s,name:e,value:n,onChange:a,unit:l,tooltip:c,isBio:f=!0})=>y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"flex justify-between items-center ml-1",children:y.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:s})}),y.jsxs("div",{className:"relative group",children:[y.jsx("input",{type:"number",name:f?`bio_${e}`:e,value:n===0?"":n,onChange:a,className:"w-full bg-slate-950/30 border border-slate-700/70 text-slate-200 rounded-lg py-3 pl-3 pr-10 text-sm focus:ring-2 focus:ring-violet-500/30 focus:border-violet-500 outline-none",placeholder:"0"}),y.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-slate-600 pointer-events-none",children:l})]})]});function M5({history:s,onViewRoutine:e,t:n}){const a=s.filter(l=>l.status==="archived_history").sort((l,c)=>(c.createdAt?.seconds||0)-(l.createdAt?.seconds||0));return y.jsxs("div",{className:"animate-fadeIn pb-20",children:[y.jsxs("h2",{className:"text-lg font-bold text-slate-100 mb-6 flex items-center gap-2",children:[y.jsx(he,{name:"list",className:"w-5 h-5 text-teal-400"})," ",n.tabHistory]}),a.length>0?y.jsx("div",{className:"space-y-4",children:a.map(l=>y.jsxs(Ki,{className:"p-5 flex items-center justify-between group hover:bg-slate-800 transition-colors cursor-pointer",onClick:()=>e(l),children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("span",{className:"text-xs font-mono text-slate-500 bg-slate-900 px-2 py-0.5 rounded",children:l.createdAt?.toDate?.().toLocaleDateString()||"N/A"}),y.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-teal-400 font-bold uppercase",children:[y.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-teal-500"})," ",n.completed]})]}),y.jsx("h4",{className:"text-base font-bold text-slate-200 group-hover:text-teal-300 transition-colors",children:l.diaEnfoque})]}),y.jsx("div",{className:"p-3 rounded-full bg-slate-900 text-slate-500 border border-slate-700 group-hover:bg-teal-600 group-hover:text-white group-hover:border-teal-500 transition-all",children:y.jsx(he,{name:"chevronRight",className:"w-5 h-5"})})]},l.id))}):y.jsxs("div",{className:"text-center py-16 opacity-50 bg-slate-800/30 rounded-2xl border border-dashed border-slate-700",children:[y.jsx(he,{name:"database",className:"w-12 h-12 mx-auto mb-4 text-slate-600"}),y.jsx("p",{className:"text-slate-500 font-medium",children:n.noRecords})]})]})}const hm=({isValid:s,text:e})=>y.jsxs("div",{className:`flex items-center text-xs transition-colors duration-300 ${s?"text-green-400":"text-slate-500"}`,children:[y.jsx(he,{name:s?"checkCircle":"xCircle",className:"w-4 h-4 mr-2 flex-shrink-0"}),y.jsx("span",{children:e})]}),OE=({value:s,onChange:e,placeholder:n,t:a})=>{const[l,c]=ee.useState(!1),f=ee.useMemo(()=>{const m=s.length>=6,g=/[A-Z]/.test(s),_=/[0-9]/.test(s);return{hasLength:m,hasUppercase:g,hasNumber:_}},[s]);return y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:l?"text":"password",value:s,onChange:e,placeholder:n||"Contrasea",className:"w-full bg-slate-900/70 border border-slate-700 rounded-lg pl-4 pr-10 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm transition-colors",required:!0}),y.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 hover:text-white transition-colors","aria-label":l?"Ocultar contrasea":"Mostrar contrasea",children:y.jsx(he,{name:l?"eyeOff":"eye",className:"w-5 h-5"})})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-x-4 gap-y-1 pt-1",children:[y.jsx(hm,{isValid:f.hasLength,text:a.passRequirementLength}),y.jsx(hm,{isValid:f.hasUppercase,text:a.passRequirementUpper}),y.jsx(hm,{isValid:f.hasNumber,text:a.passRequirementNumber})]})]})},O5=({onLinkAccount:s,t:e,error:n})=>{const[a,l]=ee.useState(""),[c,f]=ee.useState(""),[m,g]=ee.useState(!1),[_,E]=ee.useState(!1),S=async x=>{x.preventDefault(),g(!0),E(!1);const P=await s(a,c);g(!1),P&&E(!0)};return _?y.jsx(Ki,{className:"p-6 border-green-500/30 bg-green-900/20",children:y.jsxs("div",{className:"text-center",children:[y.jsx(he,{name:"checkCircle",className:"w-12 h-12 text-green-400 mx-auto mb-4"}),y.jsx("h3",{className:"text-lg font-bold text-white",children:e.accountLinkedTitle}),y.jsx("p",{className:"text-green-200/80 text-sm",children:e.accountLinkedMessage})]})}):y.jsxs(Ki,{className:"p-6 border-teal-500/30 bg-slate-800/50",children:[y.jsxs("h3",{className:"text-sm font-bold text-teal-300 uppercase tracking-wider mb-3 flex items-center gap-2",children:[y.jsx(he,{name:"shieldCheck",className:"w-4 h-4"})," ",e.saveAccountPrompt]}),y.jsx("p",{className:"text-xs text-slate-400 mb-4",children:e.saveAccountMessage}),y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("input",{type:"email",value:a,onChange:x=>l(x.target.value),placeholder:e.emailPlaceholder,className:"w-full bg-slate-900/70 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm",required:!0}),y.jsx(OE,{value:c,onChange:x=>f(x.target.value),placeholder:e.passwordPlaceholder,t:e}),y.jsx("button",{type:"submit",disabled:m,className:"w-full bg-teal-600 hover:bg-teal-500 disabled:bg-slate-700 disabled:text-slate-400 text-white font-bold py-2.5 rounded-lg text-sm shadow-lg shadow-teal-900/30 transition-all flex items-center justify-center gap-2",children:m?y.jsxs(y.Fragment,{children:[y.jsx(he,{name:"loader",className:"animate-spin w-5 h-5"})," ",e.processing]}):e.saveAccountButton}),n&&!m&&y.jsx("p",{className:"text-red-400 text-xs text-center pt-2 animate-fadeIn",children:n})]})]})},V5=({profile:s,onChange:e,onAnalyzeBioage:n,bioageLoading:a,t:l})=>{const[c,f]=ee.useState(!1),m=s.bioage||{},g=_=>{const E=_.target.name.replace("bio_","");e({target:{name:"bioage",value:{...m,[E]:_.target.value}}})};return y.jsxs("div",{className:"rounded-2xl border border-violet-500/20 bg-gradient-to-br from-slate-900/80 to-slate-800/80 overflow-hidden shadow-lg transition-all duration-300",children:[y.jsxs("button",{type:"button",onClick:()=>f(!c),className:"w-full p-5 flex items-center justify-between hover:bg-slate-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2.5 rounded-xl bg-violet-500/10 text-violet-300 border border-violet-500/20",children:y.jsx(he,{name:"scanEye",className:"w-5 h-5"})}),y.jsx("div",{className:"text-left",children:y.jsx("h3",{className:"text-sm font-bold text-slate-100",children:l.bioageTitle})})]}),y.jsx(he,{name:c?"chevronUp":"chevronDown",className:`w-5 h-5 text-slate-500 transition-transform ${c?"rotate-0":"-rotate-90"}`})]}),c&&y.jsx("div",{className:"p-5 pt-0 animate-fadeIn border-t border-slate-700/50",children:y.jsxs("div",{className:"space-y-6 mt-4",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsx(Pi,{name:"sq1rm",value:m.sq1rm,onChange:g,unit:"kg",label:"Squat 1RM"}),y.jsx(Pi,{name:"plank",value:m.plank,onChange:g,unit:"seg",label:"Plank"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsx(Pi,{name:"pullups",value:m.pullups,onChange:g,unit:"reps",label:"Dominadas"}),y.jsx(Pi,{name:"pushups",value:m.pushups,onChange:g,unit:"reps",label:"Flexiones"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx(Pi,{name:"waist",value:m.waist,onChange:g,unit:"cm",label:"Cintura"}),y.jsx(Pi,{name:"vo2max",value:m.vo2max,onChange:g,unit:"ml",label:"VO2 Max"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx(Pi,{name:"rhr",value:m.rhr,onChange:g,unit:"bpm",label:"FC Reposo"}),y.jsx(Pi,{name:"hrr",value:m.hrr,onChange:g,unit:"bpm",label:"Recuperacin"})]}),y.jsxs("button",{onClick:()=>n(s),disabled:a,className:"w-full py-3 rounded-xl bg-slate-800 border border-teal-500/30 text-teal-400 hover:bg-slate-700/80 transition-all font-bold text-xs flex items-center justify-center gap-2",children:[a?y.jsx(he,{name:"loader",className:"w-4 h-4 animate-spin"}):y.jsx(he,{name:"brain",className:"w-4 h-4"})," ",a?l.processing:l.calcBioAge]}),s.bioageEstimation&&y.jsxs("div",{className:"mt-4 p-4 bg-violet-900/20 border border-violet-500/30 rounded-xl animate-fadeIn",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-[10px] uppercase text-violet-400 font-bold",children:l.realAge}),y.jsxs("div",{className:"text-xl font-mono text-slate-300",children:[s.age," ",y.jsx("span",{className:"text-xs",children:"aos"})]})]}),y.jsx(he,{name:"arrowRight",className:"text-violet-500/50 w-6 h-6"}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-[10px] uppercase text-teal-400 font-bold",children:l.bioAgeResult}),y.jsxs("div",{className:"text-3xl font-black text-teal-300 drop-shadow-sm",children:[s.bioageEstimation.edadBiologica," ",y.jsx("span",{className:"text-base font-normal text-teal-500/80",children:"aos"})]})]})]}),s.bioageEstimation.evaluacion&&y.jsxs("div",{className:"text-xs text-slate-300 italic border-t border-violet-500/20 pt-2 mt-2 leading-relaxed",children:['"',s.bioageEstimation.evaluacion,'"']})]})]})})]})},j5=({profile:s,onChange:e,t:n})=>{if(s.gender!=="Mujer")return null;const a=s.menstrualCycle||{lastPeriod:"",cycleLength:28},l=JI(a.lastPeriod,a.cycleLength),c=f=>e({target:{name:"menstrualCycle",value:{...a,[f.target.name]:f.target.value}}});return y.jsxs(Ki,{className:"p-6 border-pink-500/20 bg-gradient-to-br from-slate-900 to-pink-900/10",children:[y.jsxs("h3",{className:"text-sm font-bold text-pink-300 uppercase tracking-wider mb-2 flex items-center gap-2",children:[y.jsx(he,{name:"flower",className:"w-4 h-4 text-pink-400"})," ",n.cycleTitle]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[y.jsx("input",{type:"date",name:"lastPeriod",value:a.lastPeriod,onChange:c,className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-lg py-3 px-3 text-xs outline-none"}),y.jsx("input",{type:"number",name:"cycleLength",value:a.cycleLength,onChange:c,className:"w-full bg-slate-900/50 border border-slate-700 text-slate-100 rounded-lg py-3 px-3 text-xs outline-none"})]}),l&&y.jsxs("div",{className:"bg-pink-500/10 border border-pink-500/30 rounded-xl p-4",children:[y.jsx("h4",{className:"text-lg font-bold text-pink-100",children:l.label}),y.jsx("p",{className:"text-xs text-pink-200/80",children:l.desc})]})]})},P5=({onGenerateBackup:s,onShowImportModal:e,onSignOut:n,t:a})=>y.jsxs(Ki,{className:"p-6",children:[y.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-5 flex items-center gap-2 pb-2 border-b border-slate-700/50",children:[y.jsx(he,{name:"database",className:"w-4 h-4 text-slate-500"})," ",a.dataManagement]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("button",{onClick:s,className:"p-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-colors",children:[y.jsx(he,{name:"download",className:"w-4 h-4"})," ",a.exportData]}),y.jsxs("button",{onClick:e,className:"p-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-colors",children:[y.jsx(he,{name:"upload",className:"w-4 h-4"})," ",a.importData]})]}),y.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:y.jsxs("button",{onClick:n,className:"w-full p-3 bg-red-900/50 hover:bg-red-800/70 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-colors text-red-400 hover:text-red-300",children:[y.jsx(he,{name:"logOut",className:"w-4 h-4"})," ",a.signOut]})})]});function L5({profile:s,onProfileChange:e,onProfileSave:n,onGenerateBackup:a,onShowImportModal:l,onSignOut:c,profileSuccess:f,profileError:m,onAnalyzeBioage:g,bioageLoading:_,t:E,isAnonymous:S,onLinkAccount:x,linkAccountError:P}){return y.jsxs("div",{className:"animate-fadeIn pb-20 space-y-6",children:[S&&y.jsx(O5,{onLinkAccount:x,t:E,error:P}),y.jsxs("form",{onSubmit:$=>{$.preventDefault(),n(s)},className:"space-y-8",children:[y.jsxs(Ki,{className:"p-6",children:[y.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-5 flex items-center gap-2 pb-2 border-b border-slate-700/50",children:[y.jsx(he,{name:"user",className:"w-4 h-4 text-teal-400"})," ",E.biometrics]}),y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsx(vs,{label:E.gender,icon:"user",type:"select",name:"gender",value:s.gender,onChange:e,options:[{value:"Hombre",label:E.male},{value:"Mujer",label:E.female}]}),y.jsx(vs,{label:E.age,icon:"calendar",type:"number",name:"age",value:s.age,onChange:e}),y.jsx(vs,{label:E.height,icon:"ruler",type:"number",name:"height",value:s.height,onChange:e}),y.jsx(vs,{label:E.weight,icon:"weight",type:"number",name:"weight",value:s.weight,onChange:e})]}),y.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-700/50 grid grid-cols-2 gap-6",children:[y.jsx(Pi,{name:"bodyFat",value:s.bodyFat,onChange:e,unit:"%",label:E.bodyFat,tooltip:"Opcional: Grasa",isBio:!1}),y.jsx(Pi,{name:"muscleMass",value:s.muscleMass,onChange:e,unit:"%",label:E.muscleMass,tooltip:"Opcional: Msculo",isBio:!1})]})]}),y.jsx(j5,{profile:s,onChange:e,t:E}),y.jsx(V5,{profile:s,onChange:e,onAnalyzeBioage:g,bioageLoading:_,t:E}),y.jsxs(Ki,{className:"p-6",children:[y.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-5 flex items-center gap-2 pb-2 border-b border-slate-700/50",children:[y.jsx(he,{name:"target",className:"w-4 h-4 text-violet-400"})," ",E.customFocus]}),y.jsxs("div",{className:"space-y-6",children:[y.jsx(vs,{label:E.mainGoal,icon:"star",type:"select",name:"mainGoal",value:s.mainGoal,onChange:e,options:[{value:"Perder grasa corporal",label:E.goalFat},{value:"Crecimiento muscular (Hipertrofia)",label:E.goalMuscle},{value:"Incremento de fuerza",label:E.goalStrength},{value:"Mejora de rendimiento cardiovascular",label:E.goalCardio}]}),y.jsx(vs,{label:E.expLevel,icon:"activity",type:"select",name:"experienceLevel",value:s.experienceLevel,onChange:e,options:[{value:"Principiante",label:E.expBeginner},{value:"Intermedio",label:E.expInter},{value:"Avanzado",label:E.expAdvanced}]}),y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsx(vs,{label:E.daysWeek,icon:"calendar",type:"number",name:"daysPerWeek",value:s.daysPerWeek,onChange:e}),y.jsx(vs,{label:E.timeAvailable,icon:"clock",type:"number",name:"timeAvailable",value:s.timeAvailable,onChange:e})]}),y.jsx(vs,{label:E.injuries,icon:"alert",type:"text",name:"injuries",value:s.injuries,onChange:e,placeholder:E.phInjuries,isTextArea:!0})]})]}),y.jsx("div",{className:"flex items-center gap-4 sticky bottom-24",children:y.jsxs("button",{type:"submit",className:"flex-1 py-4 bg-teal-600 hover:bg-teal-500 text-white font-bold rounded-xl shadow-lg shadow-teal-900/20 transition-all duration-300 hover:scale-[1.02] active:scale-95 flex justify-center items-center gap-2",children:[y.jsx(he,{name:"save",className:"w-5 h-5"})," ",E.saveFile]})}),f&&y.jsx("div",{className:"p-4 rounded-xl bg-teal-500/10 border border-teal-500/30 text-teal-400 text-sm font-medium text-center shadow-sm",children:f}),m&&y.jsx("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 text-sm font-medium text-center shadow-sm",children:m})]}),y.jsx("div",{className:"pt-8",children:y.jsx(P5,{onGenerateBackup:a,onShowImportModal:l,onSignOut:c,t:E})})]})}const U5=({mode:s,onSubmit:e,error:n,t:a,setMode:l,onPasswordReset:c,resetEmailSent:f,setResetEmailSent:m,setAuthError:g})=>{const[_,E]=ee.useState(""),[S,x]=ee.useState("");ee.useEffect(()=>{E(""),x("")},[s]);const P=te=>{te.preventDefault(),s==="reset"?$():e(_,S)},$=async()=>{await c(_)&&m(!0)},X={signin:a.signIn,signUp:a.signUp,reset:a.resetPassword},F={signin:a.signIn,signUp:a.signUp,reset:a.resetPassword};return f?y.jsxs("div",{className:"text-center animate-fadeIn",children:[y.jsx(he,{name:"checkCircle",className:"w-16 h-16 text-green-400 mx-auto mb-4"}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:a.resetEmailSentTitle}),y.jsx("p",{className:"text-slate-300 mb-6",children:a.resetEmailSentMessage}),y.jsx("button",{onClick:()=>l("signin"),className:"w-full text-center text-teal-400 font-semibold hover:text-teal-300 transition-colors",children:a.backToLogin})]}):y.jsxs("form",{onSubmit:P,className:"space-y-6 animate-fadeIn",children:[y.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:X[s]}),s==="reset"&&y.jsx("p",{className:"text-center text-slate-400 text-sm",children:a.resetPasswordPrompt}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("input",{type:"email",value:_,onChange:te=>E(te.target.value),placeholder:a.emailPlaceholder,className:"w-full bg-slate-900/70 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm",required:!0}),s!=="reset"&&y.jsx(OE,{value:S,onChange:te=>x(te.target.value),placeholder:a.passwordPlaceholder,t:a})]}),n&&y.jsx("p",{className:"text-red-400 text-sm text-center bg-red-500/10 p-3 rounded-lg border border-red-500/30",children:n}),y.jsx("button",{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 rounded-lg shadow-lg shadow-teal-900/30 transition-colors",children:F[s]})]})};function z5({onSignIn:s,onSignUp:e,onAnonymousSignIn:n,onPasswordReset:a,error:l,t:c,setAuthError:f}){const[m,g]=ee.useState("signin"),[_,E]=ee.useState(!1),S=$=>{f(null),E(!1),g($)},x=m==="signin"?c.signUp:c.signIn,P=()=>S(m==="signin"?"signup":"signin");return y.jsx("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4 font-sans",children:y.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx(he,{name:"dumbbell",className:"w-12 h-12 mx-auto text-teal-400 bg-teal-900/30 p-2 rounded-xl border border-teal-500/20"}),y.jsx("h1",{className:"text-4xl font-bold text-white mt-4 bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"Momentum AI"})]}),y.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 backdrop-blur-sm",children:[y.jsx(U5,{mode:m,onSubmit:m==="signin"?s:e,onPasswordReset:a,error:l,t:c,setMode:S,setAuthError:f,resetEmailSent:_,setResetEmailSent:E}),y.jsxs("div",{className:"text-center mt-6 text-sm",children:[m==="signin"&&y.jsx("button",{onClick:()=>S("reset"),className:"text-slate-400 hover:text-teal-400 transition-colors mb-4",children:c.forgotPassword}),m==="reset"&&!_&&y.jsx("button",{onClick:()=>S("signin"),className:"text-slate-400 hover:text-teal-400 transition-colors mb-4",children:c.backToLogin})]}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:y.jsx("div",{className:"w-full border-t border-slate-700"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-slate-800 text-slate-500",children:"o"})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("button",{onClick:P,className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg transition-colors",children:x}),y.jsx("button",{onClick:n,className:"w-full text-center text-slate-400 font-semibold hover:text-white transition-colors",children:c.signInGuest})]})]})]})})}const B5=()=>y.jsx("style",{children:`
    body { background-color: #0f172a; color: #f8fafc; }
    .minimal-scrollbar { scrollbar-width: thin; scrollbar-color: #334155 #0f172a; }
    .minimal-scrollbar::-webkit-scrollbar { height: 6px; width: 6px; }
    .minimal-scrollbar::-webkit-scrollbar-track { background: #0f172a; border-radius: 8px; }
    .minimal-scrollbar::-webkit-scrollbar-thumb { background-color: #334155; border-radius: 8px; border: 2px solid #0f172a; }
    
    /* Animaciones */
    .animate-fadeIn { animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    .animate-slideInRight { animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    .animate-pop { animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideInRight { from { opacity: 0; transform: translateX(50px); } to { opacity: 1; transform: translateX(0); } }
    @keyframes pop { 0% { transform: scale(0.9); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes gradient-move { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    
    /* Utilidades Extra */
    .gemini-loader-circle { width: 28px; height: 28px; position: relative; animation: spin-slow 2s linear infinite; }
    .gemini-loader-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #2dd4bf; }
    .gemini-loader-path {
      width: 28px; height: 28px; border-radius: 50%; padding: 2px;
      background: conic-gradient(from 0deg, #2dd4bf, #8b5cf6, #2dd4bf);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite: exclude;
      animation: spin-slow 2s linear infinite;
    }
    .lava-lamp-bg {
        background: linear-gradient(-45deg, #0f172a, #1e1b4b, #0f172a, #064e3b);
        background-size: 400% 400%;
        animation: gradient-move 15s ease infinite;
    }
    .text-stroke { -webkit-text-stroke: 1px rgba(255,255,255,0.1); }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* Confeti */
    .particle { position: absolute; width: 8px; height: 8px; border-radius: 50%; animation: particle-anim 1s forwards; pointer-events: none; z-index: 100; }
    @keyframes particle-anim {
        0% { transform: translate(0, 0) scale(1); opacity: 1; }
        100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
    }
  `}),q5=({show:s})=>y.jsxs("div",{className:`fixed inset-0 z-50 bg-slate-950 flex flex-col items-center justify-center transition-opacity duration-1000 pointer-events-none ${s?"opacity-100":"opacity-0"}`,children:[y.jsxs("div",{className:"relative mb-6",children:[y.jsx("div",{className:"absolute inset-0 bg-teal-500 blur-2xl opacity-20 rounded-full animate-pulse"}),y.jsx(he,{name:"dumbbell",className:"w-12 h-12 text-teal-400 relative z-10"})]}),y.jsxs("h1",{className:"text-xl font-black text-white tracking-tight",children:["Momentum ",y.jsx("span",{className:"text-teal-400",children:"AI"})]})]}),H5=({jsonString:s,onClose:e,onCopy:n,copySuccess:a,t:l})=>y.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fadeIn",children:y.jsxs(Ki,{className:"w-full max-w-lg p-6 border-slate-600 bg-slate-900",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-slate-100 font-bold text-lg",children:l.copyBackup}),y.jsx("button",{onClick:e,children:y.jsx(he,{name:"close",className:"text-slate-400 hover:text-white"})})]}),y.jsx("textarea",{readOnly:!0,value:s,className:"w-full h-48 bg-slate-950 text-slate-400 text-xs p-4 rounded-xl border border-slate-700 mb-5 minimal-scrollbar font-mono focus:outline-none focus:border-teal-500"}),y.jsx("div",{className:"flex justify-end gap-3",children:y.jsx("button",{onClick:n,className:`px-5 py-2.5 rounded-lg font-bold text-sm transition-colors shadow-lg ${a?"bg-emerald-600 text-white":"bg-teal-600 text-white hover:bg-teal-500"}`,children:a?y.jsxs(y.Fragment,{children:[y.jsx(he,{name:"check",className:"inline w-4 h-4 mr-1"})," ",l.copied]}):y.jsxs(y.Fragment,{children:[y.jsx(he,{name:"copy",className:"inline w-4 h-4 mr-1"})," ",l.copyToClip]})})})]})}),F5=({onClose:s,onImport:e,importError:n,t:a})=>{const[l,c]=e1.useState("");return y.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fadeIn",children:y.jsxs(Ki,{className:"w-full max-w-lg p-6 border-slate-600 bg-slate-900",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-slate-100 font-bold text-lg",children:a.importData}),y.jsx("button",{onClick:s,children:y.jsx(he,{name:"close",className:"text-slate-400 hover:text-white"})})]}),y.jsx("textarea",{value:l,onChange:f=>c(f.target.value),className:"w-full h-48 bg-slate-950 text-slate-200 text-xs p-4 rounded-xl border border-slate-700 mb-5 minimal-scrollbar font-mono focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"Pegar contenido JSON aqu..."}),y.jsx("div",{className:"flex justify-end gap-3",children:y.jsx("button",{onClick:()=>e(l),className:"px-5 py-2.5 rounded-lg bg-teal-600 text-white font-bold text-sm hover:bg-teal-500 shadow-lg",children:a.importBtn})}),n&&y.jsx("p",{className:"text-red-400 text-xs mt-3 bg-red-900/20 p-2 rounded border border-red-900/50",children:n})]})})},G5=({onContinue:s,onSave:e,onCancel:n,t:a})=>y.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fadeIn",children:y.jsxs(Ki,{className:"w-full max-w-md p-8 border-slate-600 bg-slate-900 text-center",children:[y.jsx(he,{name:"alertTriangle",className:"w-12 h-12 text-amber-400 mx-auto mb-4"}),y.jsx("h3",{className:"text-slate-100 font-bold text-2xl mb-2",children:a.signOutGuestTitle}),y.jsx("p",{className:"text-slate-400 mb-8",children:a.signOutGuestMessage}),y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsx("button",{onClick:e,className:"px-5 py-3 rounded-lg bg-teal-600 text-white font-bold text-sm hover:bg-teal-500 shadow-lg",children:a.saveAccountButton}),y.jsx("button",{onClick:s,className:"px-5 py-2.5 rounded-lg bg-red-800/80 text-white font-semibold text-sm hover:bg-red-700",children:a.signOutAndLoseData}),y.jsx("button",{onClick:n,className:"px-5 py-2 text-slate-400 font-medium text-sm hover:text-white",children:a.cancel})]})]})});function Q5(){const{t:s,activeTab:e,view:n,currentRoutine:a,showSplash:l,scrolled:c,headerRef:f,isImportModalOpen:m,importTextError:g,backupJson:_,copySuccess:E,isSessionActive:S,sessionSeconds:x,restSeconds:P,userId:$,isAuthReady:X,authError:F,linkAccountError:te,isAnonymous:ie,profile:ae,bioageLoading:ye,profileSuccess:ve,profileError:be,successMessage:I,history:w,loading:R,generationProgress:M,error:D,isSignOutWarningVisible:V,toggleLanguage:N,setActiveTab:Re,handleScroll:Qe,handleViewRoutine:G,handleBackToMain:re,handleRoutineFeedback:ce,handleExerciseComplete:Me,setRestSeconds:Pe,setIsSessionActive:k,onProfileChange:K,onProfileSave:oe,onAnalyzeBioage:ne,onGeneratePlan:me,onGenerateBackup:Se,onCloseBackupModal:se,onCopyToClipboard:pe,setIsImportModalOpen:Ee,onImportFromText:ut,onSignIn:Bt,onSignUp:mn,onAnonymousSignIn:Gt,onSignOutRequest:pn,onForceSignOut:Un,onLinkAccount:hn,onPasswordReset:ri,setAuthError:Yi,setIsSignOutWarningVisible:ft}=oC();if(!X||l)return y.jsx(q5,{show:!0});if(!$)return y.jsx(z5,{onSignIn:Bt,onSignUp:mn,onAnonymousSignIn:Gt,onPasswordReset:ri,error:F,t:s,setAuthError:Yi});const gt=()=>{ft(!1),Re("profile")};return y.jsxs(y.Fragment,{children:[y.jsx(B5,{}),_&&y.jsx(H5,{jsonString:_,onClose:se,onCopy:pe,copySuccess:E,t:s}),m&&y.jsx(F5,{onClose:()=>Ee(!1),onImport:ut,importError:g,t:s}),V&&y.jsx(G5,{onContinue:Un,onSave:gt,onCancel:()=>ft(!1),t:s}),y.jsxs("div",{className:"h-screen supports-[height:100dvh]:h-[100dvh] flex flex-col overflow-hidden font-sans bg-slate-900 text-slate-100 selection:bg-teal-500/30",children:[y.jsx("header",{ref:f,className:`w-full z-40 fixed top-0 left-0 border-b transition-all duration-300 ${c?"bg-slate-900/90 backdrop-blur-xl border-slate-700/50 py-2 shadow-md":"bg-transparent border-transparent py-3"}`,children:y.jsxs("div",{className:"max-w-md mx-auto px-6 flex items-center justify-between",children:[y.jsxs("h1",{className:`font-bold text-slate-100 flex items-center transition-all ${c?"text-sm":"text-base"}`,children:[n==="routine"?y.jsx("button",{onClick:re,className:"mr-3 text-slate-400 hover:text-white transition-colors p-2 rounded-full hover:bg-slate-800",children:y.jsx(he,{name:"arrowLeft",className:"w-6 h-6"})}):y.jsx("div",{className:"bg-teal-500/10 p-1.5 rounded-lg mr-2",children:y.jsx(he,{name:"dumbbell",className:"text-teal-400 w-4 h-4"})}),y.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:n==="routine"?s.routineInProgress:s.appTitle})]}),y.jsx("div",{className:"flex items-center gap-2 text-xs",children:n!=="routine"&&y.jsxs("div",{className:"flex items-center gap-2 scale-90 origin-right",children:[y.jsxs("button",{onClick:N,className:"flex items-center px-2 py-0.5 rounded-lg bg-slate-800 border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500 transition-all font-bold font-mono tracking-tighter",children:[y.jsx("span",{className:s.lang==="es"?"text-teal-400":"",children:"ES"}),y.jsx("span",{className:"mx-1 opacity-30",children:"|"}),y.jsx("span",{className:s.lang==="en"?"text-teal-400":"",children:"EN"})]}),$&&y.jsxs("span",{className:`flex items-center px-2 py-0.5 rounded-full border ${ie?"bg-yellow-500/10 border-yellow-500/20 text-yellow-300":"bg-teal-500/10 border-teal-500/20 text-teal-300"} font-semibold shadow-inner`,children:[y.jsx(he,{name:ie?"userCheck":"activity",className:"w-3.5 h-3.5 mr-2"}),ie?s.guest:s.online]})]})})]})}),y.jsx("main",{className:`flex-1 overflow-y-auto overflow-x-hidden minimal-scrollbar pt-16 ${n==="routine"?"snap-y snap-proximity":""}`,onScroll:Qe,children:y.jsxs("div",{className:"max-w-md mx-auto px-4 md:px-0 pb-32",children:[e==="training"&&y.jsx(k5,{profile:ae,onProfileChange:K,onGeneratePlan:me,loading:R,successMessage:I,errorMessage:D,history:w,onViewRoutine:G,generationProgress:M,t:s,onAnalyzeBioage:ne,bioageLoading:ye,view:n,currentRoutine:a,onRoutineFeedback:ce,onExerciseComplete:Me,isSessionActive:S,setIsSessionActive:k,restSeconds:P,setRestSeconds:Pe,sessionSeconds:x}),e==="history"&&y.jsx(M5,{history:w.filter(Tt=>Tt.status==="completed"),t:s}),e==="profile"&&y.jsx(L5,{profile:ae,onProfileChange:K,onProfileSave:oe,onAnalyzeBioage:ne,bioageLoading:ye,profileSuccess:ve,profileError:be,onGenerateBackup:Se,onShowImportModal:()=>Ee(!0),onSignOut:pn,isAnonymous:ie,onLinkAccount:hn,linkAccountError:te,t:s})]})}),y.jsx("div",{className:"fixed bottom-6 left-0 right-0 z-40 flex justify-center pointer-events-none",children:n==="main"&&y.jsx("nav",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 shadow-2xl rounded-full px-6 py-3 flex gap-8 pointer-events-auto",children:["training","history","profile"].map(Tt=>{const Os=e===Tt,zn={training:"target",history:"list",profile:"user"};return y.jsx("button",{onClick:()=>Re(Tt),className:`relative p-3 rounded-full transition-all duration-300 group ${Os?"bg-teal-500 text-white shadow-lg shadow-teal-500/30 -translate-y-2 scale-110":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:y.jsx(he,{name:zn[Tt],className:"w-6 h-6"})},Tt)})})})]})]})}E2.createRoot(document.getElementById("root")).render(y.jsx(e1.StrictMode,{children:y.jsx(Q5,{})}));
